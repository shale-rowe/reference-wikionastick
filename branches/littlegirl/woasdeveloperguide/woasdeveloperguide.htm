<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript">
/* <![CDATA[ */

/* DFQRCTsKlU-0000174-START */

var woas = {"version": "0.11.1"};

var __marker = "DFQRCTsKlU-0000174";

woas["config"] = {
"permit_edits":true,
"dblclick_edit":true,
"save_on_quit":false,
"open_last_page":false,
"allow_diff":true,
"key_cache":true,
"cumulative_save":false,
"debug_mode":false,
"main_page":'Main Page',
"auto_save":0};

var current = 'Main Page';

var backstack = [
'Main Page',
'Assemble WoaS',
'Main Page',
'Special::Advanced',
'Special::ExportWSIF',
'Main Page',
'WoaS philosophy'
];

var page_titles = [
'::Menu',
'Special::Advanced',
'Special::Import',
'Special::About',
'Main Page',
'Special::Search',
'Special::Lock',
'WoaS::Help::Security',
'Special::Options',
'WoaS::Help::Deprecated syntax',
'WoaS::Help::Special::Options',
'Special::Embed',
'WoaS::Bootscript',
'WoaS::Plugins',
'History',
'Special::Export',
'Special::License',
'WoaS::Aliases',
'Special::ExportWSIF',
'WoaS::Help::WSIF',
'Special::ImportWSIF',
'WoaS::Help::Macros',
'WoaS::Help::Editing',
'WoaS::Help::Index',
'WoaS::Template::Button',
'WoaS::Help::Special::Advanced',
'WoaS::Help::Special::Erase Wiki',
'WoaS::Help::Edit CSS',
'WoaS::Help::Special::Edit Bootscript',
'WoaS::Help::Special::Dead Pages',
'WoaS::Help::General usage',
'WoaS::Help::Nowiki text',
'WoaS::Template::Info',
'WoaS::Help::Wiki is read-only',
'WoaS::Help::Create a page',
'WoaS::Help::Delete a page',
'WoaS::Help::Edit a page',
'WoaS::Help::Erase all pages',
'WoaS::Help::Edit the menu',
'WoaS::Help::Headers',
'WoaS::Help::Rulers',
'WoaS::Help::Include text file',
'WoaS::Help::Include web page',
'WoaS::Help::Include wiki page',
'WoaS::Help::JavaScript',
'WoaS::Help::Join lines of text',
'WoaS::Help::Non-breaking spaces',
'WoaS::Help::Namespaces',
'WoaS::Help::Text formatting',
'WoaS::Help::Rename a page',
'WoaS::Help::Page scrolling',
'WoaS::Help::Table of Contents',
'WoaS::Help::Tags',
'WoaS::Help::Publish wiki online',
'WoaS::Help::Run wiki on a server',
'WoaS::Help::Requirements',
'WoaS::Help::Lists',
'WoaS::Help::Tables',
'WoaS::Help::Links',
'WoaS::Help::Images',
'WoaS::Help::Import',
'WoaS::Template::Search',
'WoaS::Help::Export',
'WoaS::Template::Example::Transclusion',
'WoaS::Help::Transclusion',
'WoaS::Help::Special::ExportWSIF',
'WoaS::Help::Special::ImportWSIF',
'Original WoaS developer guide',
'Template::Tooltip',
'Glossary',
'My paths',
'Status codes',
'Getting started',
'Standard routine',
'WoaS philosophy',
'Merging',
'Useful commands',
'Initial commit',
'Resolving conflicts',
'Assemble WoaS'
];

/* DFQRCTsKlU-0000174-DATA */
var page_attrs = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

var page_mts = [0x4bc38bb0,0x4bb975e1,0,0,0x4bc38a31,0,0,0x4b9d11af,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x4b9d00e9,0x4b9d1252,0,0,0,0x4bab8e8a,0,0,0x4b9d097f,0,0,0,0x4b9d06da,0x4b9d0716,0x4b9d0415,0x4b9d08dd,0x4b9d089e,0,0,0,0,0,0,0,0,0,0,0x4b9d1123,0x4b9d1076,0,0x4baa4760,0x4b9d10a9,0,0,0,0,0,0x4bace5ea,0x4b9d0f93,0,0x4b9d0952,0,0x4b9e89a3,0x4b9d13ca,0x4b9d13e1,0x4bb97ac2,0x4bb8f8c9,0x4bb94476,0x4bb953ab,0x4bb952f0,0x4bb95410,0x4bb96efe,0x4bb95798,0x4bb97695,0x4bb97a09,0x4bb96e52,0x4bb95ef6,0x4bc389e3];

var pages = [
'[[Main Page]]\n\
* *Administration*\n\
** [[Special::All Pages|All pages]]\n\
** [[Special::Delete Page|Delete Page]]\n\
** [[WoaS::Help::|Help]]\n\
** [[Special::New Page|New Page]]\n\
** [[Special::Search|Search]]\n\
\x3C!-- --\x3E\n\
* *Subversion guide*\n\
** [[Getting started]]\n\
** [[Initial commit]]\n\
** [[Standard routine]]\n\
\x3C!-- --\x3E\n\
* *Subversion extras*\n\
** [[Merging]]\n\
** [[Resolving conflicts]]\n\
** [[Useful commands]]\n\
\x3C!-- --\x3E\n\
* *Reference pages*\n\
** [[Assemble WoaS]]\n\
** [[Glossary]]\n\
** [[My paths]]\n\
** [[Status codes]]\n\
** [[WoaS philosophy]]\n\
',
'== Options\n\
You can customize Wiki on a Stick modifying a few [[Special::Options|Options]].  \n\
\n\
== Pages\n\
* [[Special::All Pages]]: a list of all user created pages in this wiki\n\
* [[Locked::]], [[Unlocked::]]: an index of all encrypted/plain pages\n\
* [[Tagged::]], [[Untagged::]]: an index of all tagged/untagged pages\n\
* [[Special::Search]]: search all wiki pages\n\
\n\
== Maintenance\n\
* [[Special::Dead Pages]]: a list of pages that have links to them, but were still not created \n\
* [[Special::Orphaned Pages]]: a list of pages that once were linked to, but now no page links to them anymore\n\
* [[Special::Export]]: export wiki into multiple linked static XHTML files\n\
* [[Special::ExportWSIF]]: export wiki into multiple or single [[WoaS::Help::WSIF|WSIF]] files\n\
* [[Special::Import]]: import wiki or theme from an early (or current) version\n\
* [[Special::ImportWSIF]]: import a wiki page (or collection of) in [[WoaS::Help::WSIF|WSIF]] format\n\
* [[Special::Erase Wiki]]: delete ALL wiki pages and reset with default data\n\
\n\
== Advanced features\n\
* [[Special::Edit CSS]]: edit the global CSS styles\n\
* [[Special::Edit Bootscript]]: edit the custom script run once when WoaS is being loaded\n\
',
'Import a wiki from an early (or current) version:\n\
\n\
File: \x3Cinput id="filename_" type="file" /\x3E&nbsp;\x3Cinput type="button" value="Import" onclick="import_wiki()" /\x3E\n\
\n\
\x3Clabel for="cb_import_content"\x3E\x3Cinput type="checkbox" id="cb_import_content" checked="checked"\x3E&nbsp;Import the wiki pages.\x3C/label\x3E\n\
\x3Clabel for="cb_import_css"\x3E\x3Cinput type="checkbox" id="cb_import_css"\x3E&nbsp;Import also CSS.\x3C/label\x3E\n\
Available only for versions v0.9 and above. /Caution: importing older CSS can garble the layout./\n\
\x3Clabel for="cb_import_icons"\x3E\x3Cinput type="checkbox" id="cb_import_icons" disabled="disabled"\x3E&nbsp;Import the icons theme (not yet available).\x3C/label\x3E\n\
',
'[[Special::TOC]]\n\
= Welcome to Wiki on a Stick!\n\
Wiki on a Stick (in short *WoaS*) is a [[http://en.wikipedia.org/wiki/Wiki|wiki]] that lives in *one self-modifying XHTML file*. It\'s perfect to be used at home or at office, on your laptop or USB pen drive. It can be used as a personal notepad, calendar, repository for software documentation and for many other purposes; it allows full customization and extension by your own scripts and plugins. It also offers [[WoaS::Help::Security|AES encryption]] of pages.\n\
\n\
== Version\n\
\n\
Current version is *v0.11.0*\n\
Versions 0.9&tilde;0.11.0 by Daniele C. ([[http://sf.net/users/legolas558/|legolas558]])\n\
Original version (v0.01 &tilde; v0.04) by Andr\u00e9 Wagner\n\
\n\
\x3Cbig\x3E[[Special::License|Wiki on a Stick is licensed under the GNU/GPL license]].\x3C/big\x3E\n\
\n\
== Download\n\
Wiki on a Stick can always be downloaded through the official SF.net WoaS project file download service:\n\
\x3Cbig\x3E[[https://sourceforge.net/projects/stickwiki/files/|Download Wiki on a Stick]]\x3C/big\x3E\n\
\n\
== Get support\n\
\n\
You can use the [[http://woas.iragan.com/|official WoaS forums]] and the [[http://sf.net/projects/stickwiki/|SF.net WoaS project facilities]].\n\
\n\
== Thanks to\n\
This project wouldn\'t be what it is without the help of other people. If you contributed to Wiki on a Stick and your name is not here (or if you do not want it to be listed here), please send an email to \x3Ca class="world" href="mailto:legolas558 _AT_ users.sourceforge.net"\x3Ethis email address\x3C/a\x3E.\n\
\n\
* *Jeremy Ruston* - the creator of the wonderful [[http://www.tiddlywiki.com/|TiddlyWiki]], who served as inspiration for Wiki on a Stick\n\
* *Philip O\'Donnel* - creator of the table syntax & parsing code\n\
* *Tim Lord*\n\
* *Knut Kohl*\n\
* *Rob Schmersel*\n\
* *Michiel van Everdingen* - [[http://home.versatel.nl/MAvanEverdingen/Code/|original javascript implementation]] of AES encryption\n\
* *Cyril Mazard* - search feature\n\
* *jimmac* - author of [[http://jimmac.musichall.cz/i.php?i=gorilla-stock|the icons set]] which we are currently using in WoaS\n\
* *martinellison* - transclusion patch\n\
* *Nilton Castillo* - bugfixes and enhancements (pluggable macro syntax)\n\
* *Littlegirl* - documentation and overall testing, various improvements\n\
* [[http://weekendtesting.com/archives/833|Europe Weekend Testing]] - which provided a testing session for WoaS\n\
* [[http://testconsultant.blogspot.com/|Jeroen Rosink]] - for testing WoaS releases\n\
\n\
== Important links\n\
* [[http://sf.net/projects/stickwiki/|SourceForge project home page]] - useful for contributing\n\
* [[http://woas.iragan.com/|Official WoaS forums]] - our discussion forums where you can also participate to the decision processes\n\
* [[http://sourceforge.net/tracker/?group_id=155218&atid=794925|SF.net WoaS project bug tracker]] - if you find a bug, post it here\n\
* [[http://sourceforge.net/tracker/?group_id=155218&atid=794928|SF.net WoaS project feature tracker]] - if you have have suggestions for improvements\n\
* [[http://www.iragan.com/woas_irc/|Official WoaS IRC Channel]] - #woas room at FreeNode servers\n\
* [[https://lists.sourceforge.net/lists/listinfo/stickwiki-devel|SF.net WoaS Development mailing list]] - for public discussion',
'= WoaS Developer Guide\n\
Welcome to the Wiki on a Stick community! There are various places you can visit to see what\'s being done, to get an idea of how and where you can help, and to keep in touch with others:\n\
* [[http://sourceforge.net/tracker/?words=tracker_browse&sort=open_date&sortdir=desc&offset=0&group_id=155218&atid=794925&assignee=&status=&category=&artgroup=&keyword=&submitter=&artifact_id=|WoaS bug tracker]]\n\
* [[http://woas.iragan.com/viewtopic.php?id=217|WoaS development IRC channel]] on the [[http://freenode.net/irc_servers.shtml|freenode IRC server]]\n\
* [[https://lists.sourceforge.net/lists/listinfo/stickwiki-devel|WoaS development mailing list]]\n\
* [[http://sourceforge.net/tracker/?atid=794928&group_id=155218&func=browse|WoaS feature requests]]\n\
* [[http://woas.iragan.com/index.php|WoaS forums]]\n\
* [[http://cia.vc/stats/project/stickwiki|WoaS Subversion logs]]\n\
Any help you can offer in the development process is heartily welcomed. If coding isn\'t your thing, there are still plenty of ways to contribute. You can participate in the forums, make feature requests, file bug reports, and share content.\n\
== Features\n\
Some of the things you\'ll find in this guide are:\n\
# A [[Glossary|glossary]] of terms used in this guide.\n\
# A Subversion path reference table.\n\
# A [[Status codes|status codes]] reference table.\n\
# A step-by-step guide that shows how to [[Assemble WoaS|assemble WoaS]].\n\
# Step-by-step guides that show how to use the Subversion server.\n\
# The [[WoaS philosophy]] page for becoming familiar with the core principles of the WoaS project.\n\
# [[Include::Template::Tooltip|Tooltips|This is a tooltip! Advanced users who don\'t need these can comment out or remove the tooltip entry in the global CSS settings of the wiki.]] that show additional information when you hover over them.\n\
',
'= Search in Wiki\n\
\n\
\x3Cinput id="string_to_search" type="text" onfocus="search_focus(true)" onblur="search_focus(false)" /\x3E&nbsp;\x3Cinput type="button" value="Search" onclick="do_search()" /\x3E&nbsp;\x3Cinput type="button" value="Clear" onclick="clear_search()" /\x3E\n\
\n\
\x3Cscript type="text/javascript" language="javascript"\x3E\n\
var tmp = $(\'wiki_text\');\n\
var pre = \'\x3Cpre class="wiki_preformatted"\x3E\';\n\
var hl_text = cached_search.replace(/\x3Cdiv class="search_results"\x3E((.|\\n)*?)\x3C\\/div\x3E/g,\n\
function (str, ct) {\n\
    return \'\x3Cdiv class="search_results"\x3E\'+pre+ct.substr(pre.length).replace(_hl_reg, \'\x3Cspan class="search_highlight"\x3E$1\x3C/span\x3E\')+\'\x3C/div\x3E\';\n\
});\n\
\n\
tmp.innerHTML = tmp.innerHTML + hl_text;\n\
\n\
hl_text = null;\n\
//_hl_reg = null;\n\
 $("string_to_search").focus();\n\
\x3C/script\x3E',
'== AES encryption\n\
Read more about the [[WoaS::Help::Security|embedded AES encryption]] used in Wiki On a Stick.\n\
\n\
== Password\n\
Enter your password for AES encryption. The more complex your password is, the more difficult it will be to attack the encryption. It is suggested *not* to use passwords whose textbox color is \x3Cspan style="background-color:red"\x3E&nbsp;red&nbsp;\x3C/span\x3E, and to accept passwords only when the textbox color is \x3Cspan style="background-color:lime"\x3E&nbsp;green&nbsp;\x3C/span\x3E. Punctuation and Mixed case characters will exponentially increase the strength of your password.\n\
\n\
 \x3Cinput type="password" id="pw1" style="background-color:red" value="" size="50" onfocus="custom_focus(true)" onblur="custom_focus(false)" onkeyup="pw_quality()" /\x3E&nbsp;\x3Cspan id="txtBits"\x3E&nbsp;\x3C/span\x3E\n\
 \x3Cinput type="password" id="pw2" value="" size="50" onfocus="custom_focus(true)" onblur="custom_focus(false)" /\x3E\n\
 \x3Cinput id="btn_lock" type="button" value="" /\x3E\n\
\n\
\x3Cscript\x3E\n\
function _lock_page() {\n\
if (current.indexOf("Lock::")!=0) return;\n\
var page = current.substring(6);\n\
\n\
$("btn_lock").value = "Lock "+page;\n\
$("pw1").focus();\n\
$("btn_lock").setAttribute("onclick", "lock_page(\'"+woas.js_encode(page)+"\')");\n\
}\n\
_lock_page();\n\
\x3C/script\x3E',
'== AES encryption\n\
Since Wiki on a Stick v0.9 the [[http://en.wikipedia.org/wiki/Advanced_Encryption_Standard|AES]] 256-bit high security data encryption standard is supported to protect a single page or groups of them.\n\
\n\
The first password you enter after having started Wiki on a Stick gets cached (unless you have specified not to do it) and you will no more be asked for it. Further encryptions and decryptions will always use the last password entered; such password is not anyway stored in your saved files (true AES encryption is used).\n\
\n\
[[Include::WoaS::Template::Info|*If you forget the password there is no way to retrieve it or your data.*]]\n\
== How do I encrypt a page?\n\
In order to encrypt a page you will have to click on the /lock/ icon in the navigation bar. The password interface will open. Type the password into the red box, using punctuation and mixed case, if possible. If the box turns green while you\'re typing in your password, it\'s a strong password. If it doesn\'t, you might wish to reconsider the password and try a stronger one. Once you\'ve chosen and typed in your password, type it into the white box below the now hopefully green one for verification. Then click the *Lock* button (which will automatically include the name of the page you wish to encrypt) to encrypt the page.\n\
\n\
When encrypting additional pages during a session, you\'ll be offered to use the same password you used to encrypt the first page. Accept by pressing the *OK* button or decline by pressing the *Cancel* button. If you decline, the password interface will open, allowing you to set a new password for the page. There is no limit to how many passwords you can use.\n\
\n\
== How do I unlock an encrypted page?\n\
If your page is already encrypted and you want to work with the page or change the encryption key you will first have to unlock it by entering its password. Do this by clicking the *Set password* icon in the navigation bar. You can now open the page normally to view, edit, or delete it.\n\
\n\
The password for decrypting a page (or pages) is cached so that you only need to enter it once per session. If you close or reload the wiki, you will need to reenter the password to work with the encrypted page(s). To disable the password cache, check the box for *Do not temporarily cache the AES key* in the wiki *Options*. If you\'ve used more than one password for encrypting your pages, you\'ll need to enter the password to unlock each encrypted page.\n\
\n\
== Security level\n\
Security is never absolute. Data encrypted with these pages might be compromised in a variety of ways, including but not limited to the following:\n\
\n\
* You have not disabled the AES key cache, so when you will enter the password for the first time other users (if not you) will be able to see encrypted pages and could possibly get your key\n\
* Your Web browser and/or JavaScript interpreter may contain bugs or deliberate security violations which report activity on your computer back to some other Internet site\n\
* Some other applet running on another page in your browser, perhaps without you being aware of its existence, is spying on other windows\n\
* Some other "spyware" application running on your computer may have compromised your system\'s security and be snooping on your activity\n\
* The implementation of the encryption may contain a bug which makes its results insecure, Wiki on a Stick is open-source, you can judge for yourself whether the tool merits your confidence.\n\
* Your computer\'s security may have been compromised physically; when\'s the last time you checked that a bug that transmits your keystrokes and/or screen contents to that white van parked down the street wasn\'t lurking inside your computer cabinet?\n\
\n\
Apart from the above, your normal usage of encrypted pages can be considered secure.',
'= Options\n\
\n\
\x3Clabel for="cb_allow_diff"\x3E\x3Cinput type="checkbox" id="cb_allow_diff" onclick="woas.config.allow_diff = $.checked(\'cb_allow_diff\')" /\x3EUse consistent newlines in saved data\x3Cbr /\x3E\n\
\x3Clabel for="cb_dblclick_edit"\x3E\x3Cinput type="checkbox" id="cb_dblclick_edit" onclick="woas.config.dblclick_edit = $.checked(\'cb_dblclick_edit\')" /\x3EDouble click to edit pages/menu\x3Cbr /\x3E\n\
\x3Clabel for="cb_save_on_quit"\x3E\x3Cinput type="checkbox" id="cb_save_on_quit" onclick="woas.config.save_on_quit = $.checked(\'cb_save_on_quit\')" /\x3EAutomatically save options (if changed) before quitting\x3Cbr /\x3E\n\
\x3Clabel for="cb_key_cache"\x3E\x3Cinput type="checkbox" id="cb_key_cache" onclick="woas.config.key_cache = !$.checked(\'cb_key_cache\')" /\x3EDo not temporarily cache the AES key\x3Cbr /\x3E\n\
\x3Clabel for="cb_fixed_layout"\x3E\x3Cinput type="checkbox" id="cb_fixed_layout" onclick="_set_layout($.checked(\'cb_fixed_layout\'))" /\x3EFixed menu area and navigation bar\x3Cbr /\x3E\n\
\x3Clabel for="cb_open_last_page"\x3E\x3Cinput type="checkbox" id="cb_open_last_page" onclick="woas.config.open_last_page = $.checked(\'cb_open_last_page\')" /\x3EReturn to last saved page when quitting\x3Cbr /\x3E\n\
\x3Clabel for="cb_debug_mode"\x3E\x3Cinput type="checkbox" id="cb_debug_mode" onclick="woas.config.debug_mode = $.checked(\'cb_debug_mode\')" /\x3EEnable debug mode and debug console (requires wiki reload)\x3Cbr /\x3E\n\
\x3Clabel for="cb_cumulative_save"\x3E\x3Cinput type="checkbox" id="cb_cumulative_save" onclick="woas.config.cumulative_save = $.checked(\'cb_cumulative_save\')" /\x3EEnable cumulative save (will save to disk only when quitting)\x3Cbr /\x3E\n\
\x3Cp\x3E\x3Cinput type="button" onclick="ro_woas()" value="Disallow edits" /\x3E\n\
/Caution: to re-enable editing you will have to manually edit WoaS/\x3C/p\x3E\n\
\x3Cp\x3E\x3Cinput type="button" onclick="save_options()" value="Save options" /\x3E\x3C/p\x3E\n\
\n\
\x3Cscript\x3E\n\
$("cb_allow_diff").checked = bool2chk(woas.config.allow_diff);\n\
$("cb_open_last_page").checked = bool2chk(woas.config.open_last_page);\n\
$("cb_key_cache").checked = bool2chk(!woas.config.key_cache);\n\
$("cb_dblclick_edit").checked = bool2chk(woas.config.dblclick_edit);\n\
$("cb_debug_mode").checked = bool2chk(woas.config.debug_mode);\n\
$("cb_save_on_quit").checked = bool2chk(woas.config.save_on_quit);\n\
$("cb_cumulative_save").checked = bool2chk(woas.config.cumulative_save);\n\
$("cb_fixed_layout").checked = ($("sw_wiki_header").style.position == "fixed");\n\
if (woas.browser.ie6) $("cb_fixed_layout").disabled = true;\n\
\x3C/script\x3E',
'= Deprecated syntax\n\
\n\
This page briefly summarizes WoaS deprecated syntax; the below deprecated syntax rules are still supported (unless otherwise specified), but you are invited to _no more_ use them because they will be declared /unsupported/ in some future release of WoaS.\x3Cstyle type="text/css"\x3E\n\
.bad_syntax {\n\
  color: red;\n\
  font-weight: bold;\n\
}\n\
.good_syntax {\n\
  color: green;\n\
  font-weight: bold;\n\
}\n\
\x3C/style\x3E\n\
== Lists\n\
\n\
Lists with \'+ sign are *unsupported*.\n\
\x3Cspan class="bad_syntax"\x3E{{{\n\
+ unordered lists with + sign instead of asterisk\n\
+ unordered lists with + sign\n\
}}}\x3C/span\x3E\n\
\n\
Only asterisk lists are parsed.\n\
\x3Cspan class="good_syntax"\x3E{{{\n\
* unordered element 1\n\
* unordered element 2\n\
}}}\x3C/span\x3E\n\
== Headers\n\
\x3Cspan class="bad_syntax"\x3E{{{! headers using the exclamation mark}}}\x3C/span\x3E\n\
\x3Cspan class="good_syntax"\x3E{{{= header which uses the equal sign}}}\x3C/span\x3E\n\
== Pre tags\n\
{{{\x3Cpre /\x3E}}} acting as nowiki blocks are *unsupported*. Now {{{\x3Cpre /\x3E}}} tags have no special meaning and are treated\n\
as any other XHTML tag.\n\
\n\
\x3Cspan class="good_syntax"\x3EYou should use {\x3C!-- --\x3E{{nowiki}}\x3C!-- --\x3E} blocks instead.\x3C/span\x3E\n\
== Rulers\n\
\x3Cspan class="bad_syntax"\x3E{{{---\n\
horizontal rulers using only 3 hyphens}}}\x3C/span\x3E\n\
\n\
\x3Cspan class="good_syntax"\x3E{{{----\n\
You are invited to use at least 4 hyphens\n\
}}}\n\
== Tags\n\
Deprecated: \x3Cspan class="bad_syntax"\x3E{{{[[Tags::some tag, some other tag]] and [[Tag::some tag]]}}}\x3C/span\x3E\n\
In favor of: \x3Cspan class="good_syntax"\x3E{{{[[Tags::some tag|other tag|another tag]]}}}\x3C/span\x3E\n\
== Inline scripts\n\
\x3Cspan class="bad_syntax"\x3E{{{\x3Cscript\x3E...\x3C/script\x3E}}}\x3C/span\x3E\n\
\n\
\x3Cspan class="good_syntax"\x3E{{{\x3Cscript type="text/javascript"\x3E...\x3C/script\x3E}}}\x3C/span\x3E\n\
This is not enforced by WoaS wiki parser but is instead a correct XHTML practice.',
'= Options\n\
\n\
=== Use consistent newlines in saved data\n\
Forces pages to be saved using consistent newlines splitting. This is particularly useful if you use a versioning system like Subversion (SVN), git or CVS.\n\
\n\
=== Double click to edit pages/menu\n\
Allows to switch to edit mode when double-clicking the page content or menu area.\n\
\n\
=== Automatically save options (if changed) before quitting\n\
Allows option changes to be automatically saved without having to click the *Save options* button at the bottom of the page.\n\
\n\
=== Do not temporarily cache the AES key\n\
Clears AES key right after decryption, useful if you leave WoaS open to possible unauthorized access; will require to re-enter the decryption key each time you want to read a page.\n\
\n\
=== Fixed menu area and navigation bar\n\
Fixes the menu and navigation bar in place, while allowing the page to scroll.\n\
\n\
=== Return to last saved page when quitting\n\
Automatically opens the last saved page.\n\
\n\
=== Enable cumulative save\n\
Will save to disk only when quitting\n\
\n\
=== Disallow edits (button)\n\
Puts the wiki into /server mode/; users will be told that it is not possible to save their changes, but editing will be allowed for sandbox (testing) purposes.\n\
',
'= Embed %1\n\
\n\
\x3Cinput id="filename_" type="file" /\x3E&nbsp;\x3Cinput type="button" value="Embed" onclick="woas._embed_process(\'%1\')" /\x3E\n\
',
'/* insert here your boot script */',
'= Plugins\n\
This page contains options for the active WoaS plugins.\n\
In order to install a plugin, [[Special::ImportWSIF|import its WSIF file]].',
'= History\n\
\n\
== Versions 0.01 &tilde; 0.04\n\
\x3Csub\x3Eby Andr\u00e9 Wagner\x3C/sub\x3E\n\
\n\
As they say, /"necessity is the mother of invention"/. I needed a way to store information in a tree-like structure, but every software I tested felt like it was something missing. I tested a few mindmap software, tree structure software and personal wikis, but they were too complicated to install; I didn\'t yet have what I was looking for, or the tool wasn\'t closs-platform.\n\
\n\
The closest thing I found was [[http://www.tiddlywiki.com/|TiddlyWiki]], but it still wasn\'t perfect: it was too much blog-like, and what I needed was something wiki-like. So TiddlyWiki served as inspiration for the software I was about to create (I even used their saving routines).\n\
\n\
The core part of the code was written in one rainy afternoon. A few days later (after correcting most problems) I released it and the feedback I received was much more than I could ever expect. I guess that many other people had my same needs  :-) So this gave me motivation to continue working on Wiki on a Stick and to release three more versions.\n\
\n\
=== The principles\n\
Since the beginning I followed two basic principles: *simplicity* and *stability*. For simplicity I mean that the software should be easy enough for anyone to use, and the interface should be as plain as possible. And for stability I mean that the user data is sacred above all things, and the user should never loose his data, no matter what happens. I think these were the two facts that brought the good acceptance from the users.\n\
\n\
Unfortunatly, the duties of my graduation thesis made me stop working on WoaS and the software became dormant for a couple of months. It made me feel bad, since the mailing lists were at full throttle, with many people requesting features and sending patches that I couldn\'t even test.\n\
\n\
So I was very glad when Daniele offered himself to take over the task of managing the project. He did a great work and now WoaS is a much more rich application, with a even greater userbase. It feels really nice to see that people all around the world are using the software I created, and my desire is to see that WoaS grows in quality, features and userbase, and to remain a simple yet useful tool to everyone.\n\
\n\
== Versions 0.9.x\n\
\x3Csub\x3Eby Daniele C.\x3C/sub\x3E\n\
\n\
When I first found WoaS I felt that this software has a great potential; my first contribute to WoaS was to resolve all the bug tracker items and review the patches; the result was put into a v0.04G released in a SF.net patches tracker item (as attachment). That modified version was mostly a bug-fix and feature-fix modification, with small new features like custom keys for navigation and edits cancelling. V0.04G also missed the import feature (I forgot to add it back) and had a nasty double-click to edit feature which was not really good. That was my experimentation, I did not expect people to really use my modified version but since Andr\u00e9 had no time to review it, people was actually starting to use it.\n\
\n\
Some time later I took courage and asked to take-over the project; Andr\u00e9 Wagner kindly added me to the project as a developer and a project admin and I could start working on WoaS for real.\n\
\n\
My first big project management change was to switch to [[http://subversion.tigris.org/|Subversion (SVN)]] for the versioning of all our WoaS files; development could this way be fully documented and followed "live" by the mailing list (formerly google group) partecipants, which are the first solid community gathered around WoaS.\n\
\n\
Version 0.9B was the first official version which I worked on. My first big change was to have storage of pages not in content-escaped hidden divs but as javascript strings; this brought more speed to the page loading process. I also had to solve some problems inherent to the double file vs single file compatibility (WoaS can since then work with the 2-files version and single file version) and some IE saving issues, but finally the result was good enough.\n\
\n\
A lot of features and improvements have been implemented during the (still current) v0.9.x development cycle, without never slowing down some parts of WoaS for each new feature implemented (further speed optimizations will be engineered when the codebase is stable enough); we are as always gathering the users\' feedback to add usability and more powerful features to WoaS. Such features must of course be coherent with WoaS principles and base philosophy.\n\
\n\
=== Object orienting\n\
\n\
Wiki on a Stick codebase has been rewritten as object-oriented in order to be more maintanable and modular (the development version contains multiple javascript source files which are as always merged into one before releases).\n\
\n\
== Development of 0.10.x version\n\
\n\
Development of 0.9.7B was stale and WoaS was getting full of little bugs which prevented it from being successfully used; during last months of 2009 and first months of 2010 WoaS got new blood with 0.10.x releases.\n\
Some of the best additions were [[WoaS::Help::WSIF|WSIF format]] and a pluggable macro syntax, but finally the product had reached the stability which its users deserved and exited its Beta status to enter a Production development stage.',
'= Export content into XHTML files\n\
\n\
==Paths\n\
Specify the destination directory which will contain all the exported XHTML files.\n\
\n\
Note: *Directory must exist if using a non-Mozilla browser.*\n\
\n\
\x3Cinput id="woas_ep_xhtml" type="text" size="80" /\x3E\n\
\n\
Specify the destination directory which will contain all the exported embedded pictures.\n\
\n\
Note: *Directory must exist if using a non-Mozilla browser.*\n\
\n\
\x3Cinput id="woas_ep_img" type="text" size="80" /\x3E\n\
\n\
==File naming\n\
\n\
Default extension for generated XHTML files\n\
\n\
\x3Cinput id="woas_ep_ext" type="text" size="8" value="htm" /\x3E\n\
\n\
\x3Clabel for="woas_cb_index_main"\x3E\x3Cinput type="checkbox" id="woas_cb_index_main" checked="checked"\x3EThe main page will be named index.htm\x3C/label\x3E\n\
\x3Clabel for="woas_cb_unix_norm"\x3E\x3Cinput type="checkbox" id="woas_cb_unix_norm" checked="checked"\x3EApply UNIX-style normalization (lowercase and spaces replaced by underscores) to generated filenames\x3C/label\x3E\n\
\n\
==Custom JavaScripts\n\
\x3Clabel for="woas_cb_js_ign"\x3E\x3Cinput type="radio" id="woas_cb_js_ign" name="woas_cb_js" checked="checked"\x3EDo not export\x3C/label\x3E\n\
\x3Clabel for="woas_cb_js_dyn"\x3E\x3Cinput type="radio" id="woas_cb_js_dyn" name="woas_cb_js"\x3ERun before exporting but do not export the javascript\x3C/label\x3E\n\
\x3Clabel for="woas_cb_js_exp"\x3E\x3Cinput type="radio" id="woas_cb_js_exp" name="woas_cb_js"\x3EExport javascript as-is\x3C/label\x3E\n\
\x3Clabel for="woas_cb_js_head"\x3E\x3Cinput type="radio" id="woas_cb_js_head" name="woas_cb_js" disabled="disabled"\x3EExport javascript into &lt;head /&gt; (you might need to include the framework code)\x3C/label\x3E\n\
\n\
\x3Clabel for="woas_cb_js_fw"\x3E\x3Cinput type="checkbox" id="woas_cb_js_fw" disabled="disabled"\x3EExport the javascript framework too\x3C/label\x3E\n\
\n\
==Other options\n\
META author (optional)\n\
\n\
\x3Cinput id="woas_ep_author" type="text" size="12" value="" /\x3E\n\
\n\
\x3Clabel for="woas_cb_sep_css"\x3E\x3Cinput type="checkbox" id="woas_cb_sep_css" checked="checked"\x3EExport CSS into shared file\x3C/label\x3E\n\
\x3Clabel for="woas_cb_export_menu"\x3E\x3Cinput type="checkbox" id="woas_cb_export_menu" checked="checked"\x3EExport menu and submenus\x3C/label\x3E\n\
\n\
\x3Cinput type="button" value="Export XHTML" onclick="woas.export_wiki()" /\x3E\n\
\n\
\x3Cscript type="text/javascript"\x3E\n\
var path = woas.ROOT_DIRECTORY + "export" + woas.DIRECTORY_SEPARATOR;\n\
$(\'woas_ep_xhtml\').value = path;\n\
$(\'woas_ep_img\').value = path;\n\
\n\
function _ep_focus() { search_focused = true; }\n\
function _ep_blur() { search_focused = false; }\n\
\n\
$(\'woas_ep_xhtml\').onfocus = $(\'woas_ep_img\').onfocus = $(\'woas_ep_ext\').onfocus = _ep_focus;\n\
$(\'woas_ep_xhtml\').onblur = $(\'woas_ep_img\').onblur = $(\'woas_ep_ext\').onblur = _ep_blur;\n\
\n\
\x3C/script\x3E',
'= Special::License\n\
\n\
Retrieved from [[http://www.gnu.org/licenses/gpl2.txt]]:\n\
\n\
\x3Ciframe border="0" width="100%" height="300" src="http://www.gnu.org/licenses/gpl2.txt"\x3E\x3C/iframe\x3E',
'# all lines not starting with \'$\' are ignored\n\
$JS  Javascript',
'= Export into WSIF format\n\
\n\
See also [[WoaS::Help::WSIF]].\n\
\n\
== Destination path\n\
Destination directory that will contain the exported WSIF file(s).\n\
\n\
Note: *Directory must exist if using a non-Mozilla browser.*\n\
\n\
\x3Cinput id="woas_ep_wsif" type="text" size="80" /\x3E\n\
\n\
== File generation\n\
\n\
\x3Clabel for="woas_cb_single_wsif"\x3E\x3Cinput type="checkbox" id="woas_cb_single_wsif" checked="checked"\x3EExport all pages into a single WSIF file\x3C/label\x3E\n\
\x3Clabel for="woas_cb_inline_wsif"\x3E\x3Cinput type="checkbox" id="woas_cb_inline_wsif"\x3EDo not export embedded files as external file blobs\x3C/label\x3E\n\
\n\
==Other options\n\
WoaS Author (optional)\n\
\n\
\x3Cinput id="woas_ep_author" type="text" size="12" value="" /\x3E\n\
\n\
\x3Cinput type="button" value="Export WSIF" onclick="woas.export_wiki_wsif()" /\x3E\n\
\n\
\x3Cscript type="text/javascript"\x3E\n\
var path = woas.ROOT_DIRECTORY + "wsif" + woas.DIRECTORY_SEPARATOR;\n\
$(\'woas_ep_wsif\').value = path;\n\
\n\
function _ep_focus() { search_focused = true; }\n\
function _ep_blur() { search_focused = false; }\n\
\n\
$(\'woas_ep_author\').onfocus = $(\'woas_ep_wsif\').onfocus = _ep_focus;\n\
$(\'woas_ep_author\').onblur = $(\'woas_ep_wsif\').onblur = _ep_blur;\n\
\n\
\x3C/script\x3E',
'= WSIF\n\
\n\
*W*iki on a *S*tick *I*nterchange *F*ormat is the preferred format for exporting full WoaS data into a single file and share it with whoever you like.\n\
\n\
== Format description\n\
\n\
WSIF format is similar to MIME email attachments format; each line comes like an /email header/ definition, as in following example:\n\
\n\
{{{header.name: header-value}}}\n\
\n\
All WSIF content must be ASCII, so /header-value/ must be ECMA-escaped when necessary; this corresponds to escaping slashes "\\" to "\\\\" and any UTF-8 sequence to the corresponding "\\u0000" string, where /0000/ is the lowercase hexadecimal value of the UTF-8 character (like in ECMAScript).\n\
\n\
WSIF files can contain custom headers, given that the following namespaces are currently reserved for official WSIF format support:\n\
* *wsif*\n\
* *woas*\n\
\n\
For example you could define a new namespace for header definitions called /custom/:\n\
{{{custom.x: 100\n\
custom.y: 200\n\
custom.content: Hello world!\n\
}}}\n\
It is up to you then to parse such header-value couples and give them proper representation.\n\
== Inline boundaries\n\
\n\
A line starting with two dashes (/--/) introduces an *inline boundary*, which is a properly encoded snippet.\n\
\n\
Example boundary:\n\
{{{--my-random-id\n\
this is the inline snippet\n\
--my-random-id\n\
}}}\n\
/my-random-id/ must be a (usually random) string *unique inside the boundary content*, but it does not need to be unique inside the whole WSIF file, which must be read sequentially (like in a state machine).\n\
\n\
= wsif namespace\n\
\n\
The *wsif.* namespace currently defines only an information header:\n\
\n\
* *wsif.version* - WSIF format version into which content is offered\n\
Version 1.1.0 and above are currently supported.\n\
= woas namespace\n\
\n\
The *woas.* namespace defines general WoaS content properties and specific WoaS pages; the following headers are defined for general context:\n\
\n\
* *woas.version* - version of WoaS used to produce the WSIF file\n\
* *woas.pages* - total count of WoaS pages stored inside WSIF file\n\
\n\
The following are header definitions specific for WoaS pages:\n\
\n\
* *woas.page.title* - ECMA-escaped page title; this header has a special meaning because it is the page start marker inside the state machine; it is suggested that WSIF implementations write it as first header for page definition stanzas;\n\
* *woas.page.attributes* - a positive integer value in decimal format specifying the page attributes;\n\
* *woas.page.last_modified* - a positive integer value in decimal format representing seconds lasted from the UTC epoch up to last modified time; this header is defined only if data is available from WoaS;\n\
* *woas.page.length* - content length of the inline snippet; only inline files define it; this is not the decoded page length but the length of the content inside the inline boundaries;\n\
* *woas.page.original_length* - real page length as seen by WoaS; it is currently defined only for encrypted pages;\n\
* *woas.page.encoding* - snippet encoding format, see [[#Encoding]];\n\
* *woas.page.disposition* - tells whether page is /inline/ or /external/;\n\
* *woas.page.boundary* - string used for inline boundary recognition (without leading dashes); this header is specified only for inline snippets;\n\
* *woas.page.disposition.filename* - filename used for external page content, not ECMA-escaped; defined only with external pages;\n\
* *woas.page.mime* - mime type of external pages which have a defined mime type, like images for example;\n\
\n\
All headers are mandatory (under their specific state definition branch), except /last_modified/ and /original_length/.\n\
\n\
= Encoding\n\
\n\
The *woas.page.encoding* header can contain one of the following values:\n\
\n\
* *8bit/plain* - data is ASCII text which can use 8bits to represent characters; only ASCII text should be used and not UTF-8;\n\
* *ecma/plain* - data is ECMA-escaped UTF-8 text;\n\
* *8bit/base64* - data is base64-encoded binary data;\n\
* *text/wsif* - data is WSIF (currently used only for external WSIF pages)\n\
\n\
Pages or header values are encoded in *ecma/plain* format when UTF-8 sequences are found inside the value string, otherwise *8bit/plain* is used; *8bit/base64* is instead used for binary files or encrypted pages.\n\
\n\
= Usage notes\n\
\n\
WSIF format is pretty straightforward to produce or interpret, however please consider the following facts:\n\
\n\
* *woas.page.disposition.filename* must be plain ASCII (this limitation might be removed in future versions of the format) and should be a relative filename;\n\
* it is safe to embed a WSIF file inside another, given that boundaries are properly implemented\n\
\n\
WoaS project offers an official PHP library (libwsif) for reading/writing WSIF files, as well as a documented example.',
'Import a wiki page (or collection of) in [[WoaS::Help::WSIF|WSIF format]].\n\
\n\
File: \x3Cinput id="filename_" type="file" /\x3E&nbsp;\x3Cinput type="button" value="Import WSIF" onclick="import_wiki_wsif()" /\x3E\n\
\n\
\x3Clabel for="woas_cb_import_overwrite"\x3E\x3Cinput type="checkbox" id="woas_cb_import_overwrite" checked="checked"\x3EOverwrite pages with the same title\x3C/label\x3E\n\
== Javascript security\n\
\x3Clabel for="woas_cb_import_comment_js"\x3E\x3Cinput type="checkbox" id="woas_cb_import_comment_js" checked="checked"\x3EComment javascript code blocks\x3C/label\x3E\n\
\x3Clabel for="woas_cb_import_comment_macros"\x3E\x3Cinput type="checkbox" id="woas_cb_import_comment_macros" checked="checked"\x3EComment macro definition and call blocks\x3C/label\x3E\n\
\x3Clabel for="woas_cb_import_woas_ns"\x3E\x3Cinput type="checkbox" id="woas_cb_import_woas_ns" checked="checked"\x3ESkip pages of the [[WoaS::]] namespace\x3C/label\x3E',
'= Macros\n\
\n\
Wiki on a Stick (version 0.10.7 and above) supports wiki macros for pluggable wiki syntax.\n\
\n\
== Definition\n\
\n\
A macro block is defined as follows:\n\
\n\
{{{\x3C\x3C\x3C ... the macro content here ... \x3E\x3E\x3E}}}\n\
\n\
However the above macro example is not parsed in any particular way by WoaS. If you want to run a plugged-in parser on the macro content you should use this syntax instead:\n\
\n\
{{{\x3C\x3C\x3Cmacroname:\n\
24\n\
56\n\
89\n\
28\n\
19\n\
33\n\
\x3E\x3E\x3E}}}\n\
\n\
= Real example\n\
\n\
For example, let\'s define the sum macro:\n\
\n\
{{{\x3C\x3C\x3C%my_sum:\n\
\n\
  var elements = macro.text.split(/[\\s\\n]+/), total = 0;\n\
  for (var i=0,l=elements.length;i\x3Cl;++i) {\n\
    if (!elements[i].length) continue;\n\
    try { total += parseInt(elements[i]); } catch(e) { }\n\
  }\n\
  macro.text = total.toString();\n\
\x3E\x3E\x3E}}}\n\
\x3C\x3C\x3C%my_sum:\n\
\n\
  var elements = macro.text.split(/[\\s\\n]+/), total = 0;\n\
  for (var i=0,l=elements.length;i\x3Cl;++i) {\n\
    if (!elements[i].length) continue;\n\
    try { total += parseInt(elements[i]); } catch(e) { }\n\
  }\n\
  macro.text = total.toString();\n\
\x3E\x3E\x3E\n\
Note that macro definition happens with the special \'%\' sign before the macro name. Macros cannot be overriden with the macro definition.\n\
Such defined macro uses the macro object which has two standard properties:\n\
* *reprocess* - set to true when text can be re-processed by WoaS parser (default false)\n\
* *text* - the content of macro block after the double colon\n\
\n\
Now we call the macro:\n\
\n\
{{{\x3C\x3C\x3Cmy_sum:\n\
24\n\
56\n\
89\n\
28\n\
19\n\
33\n\
\x3E\x3E\x3E}}}\n\
\n\
And this is the actual result:\n\
\x3C\x3C\x3Cmy_sum:\n\
24\n\
56\n\
89\n\
28\n\
19\n\
33\n\
\x3E\x3E\x3E',
'= Editing\n\
You can edit the contents of the main text area by typing normally. There are links and buttons in the editor to help with adding wiki syntax to the page to control how the content looks (bold, italic, lists, etc.).\n\
\n\
== Editor features\n\
* Cancel all changes by clicking the *Cancel* icon in the navigation bar at any time.\n\
* Change the title of a page by editing the contents of the *Page title* box.\n\
* Save all changes by clicking the *Save* icon in the navigation bar at any time.\n\
* See an example of how tables are built by clicking the *About tables* link.\n\
* Toggle the display of the button rows by clicking the *Show/Hide wiki buttons|Show/Hide XHTML buttons* links.\n\
\n\
{|\n\
|+ Wiki Code buttons\n\
| *Button* || *What it does*\n\
| Wiki URL || Add a wiki link to a page.\n\
| URL || Add an external link to a page.\n\
| = || Insert wiki syntax for a level one header. Use this at the beginning of any line.\n\
| == || Insert wiki syntax for a level two header. Use this at the beginning of any line.\n\
| Img || Include a wiki image in the page.\n\
| *B* || Wrap selected text with bold syntax.\n\
| /i/ || Wrap italic text with bold syntax.\n\
| u || Wrap selected text with underline syntax.\n\
| {{{nowiki}}} || Wrap wiki syntax around the selected text to make it nowiki (raw) text.\n\
| * || Insert the wiki syntax for a bulleted list item.\n\
| # || Insert the wiki syntax for a numbered list item.\n\
| @ || Insert the wiki syntax for an alphanumeric list item.\n\
| ---- || Insert a ruler (horizontal line). Use this at the beginning of any line.\n\
| Tags || Interface for inserting tags in your page to categorize it. Use a pipe between multiple tags.\n\
|}\n\
\n\
*Note:* it\'s recommended to use wiki syntax instead of XHTML syntax, because this is a wiki.\n\
\n\
{|\n\
|+ XHTML Code buttons\n\
| *Button* || *What it does*\n\
| *B* || Wrap selected text with bold tags.\n\
| /i/ || Wrap selected text with emphasis tags (italics).\n\
| u || Wrap selected text with underline tags.\n\
| s || Wrap selected text with strike-through tags.\n\
| Sup || Wrap selected text with superscript tags (appearing half a character above the baseline).\n\
| Sub || Wrap selected text with subscript tags (appearing half a character below the baseline).\n\
| Left || Wrap selected text with a left-aligned div.\n\
| Center || Wrap selected text with a center-aligned div.\n\
| Right || Wrap selected text with a right-aligned div.\n\
| Justify || Wrap selected text with a justified div.\n\
| List || Add unordered list tags around the selected text.\n\
| List = || Add ordered list tags around the selected text.\n\
| li[*] || Wrap selected text with list item tags.\n\
| Blockquote || Wrap selected text with blockquote tags, indenting it beneath the current line.\n\
| Image || Include an external image.\n\
| Link || Include an external link URL.\n\
|}\n\
',
'= Help index\n\
The first time you save a change to Wiki on a Stick, your browser will ask for permission to save data to the disk. This is normal and necessary for the wiki to make changes to itself. You can give permission each time or make the setting permanent.\n\
\n\
You will find the *Help* icon in the navigation bar on every page in this wiki. When you click on it, it will either open this page or a specific help page that explains how to work with the page you currently have open.\n\
\n\
When browsing the pages in this Help pop-up, you will find a *Back* button in the upper right corner that takes you back to this page or a *Close* button in the same place that closes the pop-up.\n\
== Contents:\n\
* *Features*\n\
** [[WoaS::Help::Security]]\n\
** [[WoaS::Help::WSIF]]\n\
* *Interface*\n\
** [[WoaS::Help::Edit CSS]]\n\
** [[WoaS::Help::Edit the menu]]\n\
** [[WoaS::Help::Export]]\n\
** [[WoaS::Help::General usage]]\n\
** [[WoaS::Help::Import]]\n\
** [[WoaS::Help::Requirements]]\n\
* *Online use*\n\
** [[WoaS::Help::Publish wiki online]]\n\
** [[WoaS::Help::Run wiki on a server]]\n\
* *Page management*\n\
** [[WoaS::Help::Create a page]]\n\
** [[WoaS::Help::Delete a page]]\n\
** [[WoaS::Help::Edit a page]]\n\
** [[WoaS::Help::Erase all pages]]\n\
** [[WoaS::Help::Namespaces]]\n\
** [[WoaS::Help::Page scrolling]]\n\
** [[WoaS::Help::Rename a page]]\n\
* *Specific Help pages*\n\
** [[WoaS::Help::Editing]]\n\
** [[WoaS::Help::Special::Advanced]]\n\
** [[WoaS::Help::Special::Dead Pages]]\n\
** [[WoaS::Help::Special::Edit Bootscript]]\n\
** [[WoaS::Help::Special::Erase Wiki]]\n\
** [[WoaS::Help::Special::Options]]\n\
* *Syntax*\n\
** [[WoaS::Help::Deprecated syntax]]\n\
** [[WoaS::Help::Headers]]\n\
** [[WoaS::Help::Images]]\n\
** [[WoaS::Help::Include text file]]\n\
** [[WoaS::Help::Include web page]]\n\
** [[WoaS::Help::Include wiki page]]\n\
** [[WoaS::Help::JavaScript]]\n\
** [[WoaS::Help::Join lines of text]]\n\
** [[WoaS::Help::Links]]\n\
** [[WoaS::Help::Lists]]\n\
** [[WoaS::Help::Macros]]\n\
** [[WoaS::Help::Non-breaking spaces]]\n\
** [[WoaS::Help::Nowiki text]]\n\
** [[WoaS::Help::Rulers]]\n\
** [[WoaS::Help::Table of Contents]]\n\
** [[WoaS::Help::Tables]]\n\
** [[WoaS::Help::Tags]]\n\
** [[WoaS::Help::Text formatting]]\n\
** [[WoaS::Help::Transclusion]]\n\
* *Troubleshooting*\n\
** [[WoaS::Help::Wiki is read-only]]\n\
',
'\x3Cdiv class="woas_topnote"\x3E\x3Cinput type="button" class="woas_help_button" value="%1" title="%1" onclick="%2"\x3E\x3C/div\x3E',
'= Advanced\n\
The Advanced page offers some tools for administration of your wiki. Descriptions are provided, and most of the Special links lead to pages that have individual help available. Below are links to help pages for the ones that don\'t offer individual help automatically.\n\
* *Special::Erase Wiki* - See the [[WoaS::Help::Special::Erase Wiki]] page\n\
* *Special::Edit CSS* - See the [[WoaS::Help::Edit CSS]] page.\n\
* *Special::Edit Bootscript* - See the [[WoaS::Help::Special::Edit Bootscript]] page.\n\
',
'= Erase Wiki\n\
When you click the *Special::Erase Wiki* link in the Advanced page you can erase all user-created pages. Doing this will also erase the Main Page, and all content from the menu, which will then be re-populated with some common-use Special:: links. Global CSS settings (including any you have customized) will be preserved and will not be reset to default values.\n\
\n\
If you have not given permanent permission to your browser for editing wiki pages, you will receive a security warning when attempting to erase the wiki. If you deny permission to the browser, you will receive a message that saving the file failed. You will be returned to your wiki, but the Main Page will be blank. Reloading the wiki after a failure to save restores WoaS to the previous status.\n\
',
'= Edit CSS\n\
The look of most of this wiki can be customized by changing the CSS settings.\n\
\n\
\x3C\x3C\x3Cinclude:WoaS::Template::Info\n\
A tutorial about CSS is available at [[http://www.w3schools.com/css/|this address]].\x3E\x3E\x3E\n\
== Edit the CSS settings\n\
# Open the wiki in a browser.\n\
# Click the *Advanced* icon in the navigation bar.\n\
# Click the *Special::Edit CSS* link in the *Advanced* section to open the CSS settings in the editor.\n\
# Make whatever changes you like to the CSS entries in the main text area (including replacing them entirely with rules of your own).\n\
# Save your changes by clicking the *Save* icon in the navigation bar.\n\
\n\
== Restore the default CSS settings\n\
To return to the default settings if you don\'t like the changes you\'ve made:\n\
# Open a fresh copy of Wiki on a Stick in a browser.\n\
# Click the *Advanced* icon in the navigation bar.\n\
# Click the *Special::Edit CSS* link in the *Advanced* section to open the CSS settings in the editor.\n\
# Select and copy all the content in the main text area.\n\
# Open your wiki in a browser.\n\
# Click the *Advanced* icon in the navigation bar.\n\
# Click the *Special::Edit CSS* link in the *Advanced* section to open the CSS settings in the editor.\n\
# Delete all of the contents of the main text area.\n\
# Paste the settings you copied from the fresh copy of WoaS into the main text area.\n\
# Click the *Save* icon in the navigation bar to save the changes.\n\
\n\
If you have edited the CSS settings and accidentally made your wiki unusable, you can restore the default CSS this way:\n\
# Open a fresh copy of Wiki on a Stick in a text editor.\n\
# Find the section that begins with {{{\x3Cstyle type="text/css"\x3E}}} and ends with {{{\x3C/style\x3E}}}.\n\
# Copy the code between those two style tags.\n\
# Open your wiki in a text editor.\n\
# Find the section that begins with {{{\x3Cstyle type="text/css"\x3E}}} and ends with {{{\x3C/style\x3E}}}.\n\
# Replace the code between those two style tags with the code you copied from the the fresh copy of Wiki on a Stick.\n\
# Save the change to your wiki.\n\
',
'= Edit Bootscript\n\
If you want to execute some javascript at boot time (when WoaS is loaded into the browser), you should modify the *WoaS::Bootscript* page by clicking the *Special::Edit Bootscript* link in the *Advanced features* section of the *Special::Advanced* page.\n\
\n\
Be careful not to break javascript execution during this stage; in order to debug your boot-time javascript, you might use blocks like:\n\
{{{\n\
    try {\n\
       your_code(here);\n\
   }\n\
   catch (e) {\n\
       alert(e);\n\
   }\n\
}}}\n\
== Applications\n\
The Bootscript can be used to override WoaS core functions in order to replace them with customized functions which finally call the overriden function or perfectly emulate its behaviour.\n\
\n\
[[Include::WoaS::Template::Info|The WoaS JavaScript API is not yet specified.]]',
'= Dead Pages\n\
This page displays a list of pages that contain links to nonexistent pages. Both the link and the page it\'s on are shown in each entry.\n\
',
'= General usage\n\
\n\
== Cancel any action\n\
Cancel any action by clicking the *Cancel* icon in the navigation bar, clicking the *Cancel* button on any alert that pops up, or pressing the *Esc* key.\n\
\n\
== Navigation\n\
Use the *Back* and *Forward* arrow icons in the navigation bar to go back or forward one page, the *Main Page* icon in the banner to return to the Main page, or click the buttons and links in the menu and wiki pages.\n\
\n\
== Pages linking to the current page\n\
Click the *Backlinks* link in the menu to see which pages link to the page you currently have open.\n\
\n\
== Print a page\n\
Click the *Print* icon in the banner. A new browser window will open with a printer-friendly version of the main text area. Use the browser\'s print functions to print the page.\n\
\n\
== Syntax\n\
This wiki accepts plain text, WoaS wiki syntax and XHTML. See the *Syntax* pages listed in the *Help index* by clicking the *Help* icon in the navigation bar for help with using the syntax in your pages.\n\
\n\
*Note:* WoaS syntax is partially compatible with Creole 0.1 syntax',
'= Nowiki text\n\
/Nowiki text/ is a section of raw or preformatted text that is not parsed as wiki syntax. Anything you place inside nowiki brackets will be displayed in monospace font exactly as you typed it.\n\
\n\
== Multi-line blocks\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E{\\\n\
{{This is a code block\n\
made of one\n\
or more lines.\n\
}}\\\n\
}\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
{{{This is a code block\n\
made of one\n\
or more lines.}}}\n\
== Inline nowiki blocks\n\
\n\
A normal sentence can contain an inline nowiki block, like {{\x3C!-- --\x3E{this block}}\x3C!-- --\x3E}.\n\
\n\
Example (with the mathematical equation inside a nowiki block):\n\
\n\
The equation {{{E = mc^2}}} indicates that energy always exhibits mass in whatever form the energy takes.\n\
\n\
== Nowiki block properly indented beneath a list item\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E* List item:&#123;&#123;&#123;\n\
This is a code block\n\
made of one\n\
or more lines.\n\
&#125;&#125;&#125;\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
* List item:{{{\n\
This is a code block\n\
made of one\n\
or more lines.\n\
}}}\n\
\n\
== Nowiki block with custom CSS style\n\
The example uses /lightcyan/ and /purple/ colors, but you can replace those with whatever colors you like, using [[http://www.w3schools.com/Html/html_colornames.asp|color names or hexadecimal notation]].\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E\n\
{{{\x3Cspan style="background-color:lightcyan; color:purple;"\x3E}}}&#123;&#123;&#123;This is a code block\n\
made of one\n\
or more lines.\n\
&#125;&#125;&#125;{{{\x3C/span\x3E}}}\n\
\n\
\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cspan style="background-color:lightcyan; color:purple;"\x3E{{{This is a code block\n\
made of one\n\
or more lines.\n\
}}}\x3C/span\x3E\n\
',
'\x3Cdiv style="background-color: #FFFFAA; border: 0.1em solid; padding: 0.2em;"\x3E\x3Cimg src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAAXNSR0IArs4c6QAAArtQTFRF8ox%2FAAAAAAABAQEBAQECAgICAwMDBAQFBQUABgYGCQgJCgoLDAsMDQwPDQ0NDw4PDw8HEhETExMUFRQUGRkNGhsUGxscHx8eISATIR8lJCQVJiUsJyUqKCcuLCwtLiw0Ly4vMzE4NzYoQT9FQz9ERkZGSkdTS0hMTEhNUk5bU1JVY15kYWBkZWFubGh5bmt1cGt6c212cm5%2BcXFwfHaDfXxehoKQjIiUkYyfkoyllZKal5CpmJGqmJGrmZKtmpaim5WunJaunZewn5mxoJqyopquoZuxpJylopyyopy1pJ22pJ24pJ61pJ%2B1paC1pqC1qaC0pqG1qKG7qqKuqaKxqKK4paWkq6O7qaS3q6p%2BraW4rae6rKmvrqm1rqm6r6nDsKu1sKu9sKu%2Bs6yxs7GDsay9sq29s667tK7FuK%2FBtbDAtbDBt7HEubS%2BubTCurTKurXFvLqjvLfGvLjEv72LvL2VvbjLvr%2BPwL%2BKvbvBw7nHv7vDwMGHw7rHwb3Fwr3Lw8SQxb%2FRxsDRxsHMxcLGxsPLyMPQx8XKyMXIysuOycbIzMfVzcrMz8zU0NGi0czZ0M%2FL0c%2FL0c%2FN0s7X08%2FZ1NPN1ten1tTR1tXP19XS2tfc3Nyt3N2s3dni397W4N%2FX4N%2FZ4t7m4eDY4t%2Fm4eHY4uHb4uDl4uLX4%2BLa5OLo5OTb5ubd6OjJ6Ofh6erE6efr6efs6ujs6%2Bju6%2B3B6%2Brj6%2Bnt6%2Brl7O6%2F6%2Bvk7Ovr7Ovu7evu7vDC7ezv7e3p7u7p7%2B7w7%2B7x7%2B%2Fx8fPF8PDt8e%2F18fDs8fDy8fDz8%2FXC8fHx8%2FD38vLt8vLu8vL08%2FPt8%2FPu9PP09vjI9fXw9vX09vbx9%2FX59%2Fby9%2Fb39%2Ffx%2BPf4%2Bfj5%2Bfj6%2Bfnz%2Bfn1%2Bfr1%2B%2F7K%2Bvr2%2B%2Fr5%2FPr%2F%2B%2Fv7%2FP%2FR%2Ffv%2B%2Ffz9%2F%2F7%2FFnlyNwAAAAF0Uk5TAEDm2GYAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH2gMHDxg0DfX8UQAAAUBJREFUKM9jYCAIGBl5hLgYGTGEuXViWpvTzZVZUaUYFdofXzu4YW53o5kgsgyj3LIXFy8e2rphclaZBS%2BSDHvlsxvPb5%2FbtXFKQVyGHkKCUev08TtPbp3Yu7KtKMnfUxIuw2h19MCVu9dP7Z41c3qeR5AmXII1YdOuy%2Ffv3dyyZMfqLhdvA7gEZ%2BzC9UcePrp6%2Fuz%2B%2BdWOXiYIo%2Bz7F%2B%2B8cGb5qkUz6vxsww0REvpN9b3zjq3oKU7zcbLOVEdIyOSkZk%2FatrYj1NfZNiCYH8mDuvmB1Qv2TYxwsHGt0kDyICObUXz01KUT3OyiarVRAouJWc0ysSU3JNldBT18mYUL16ybXaHEiBkfNQ%2B290WKyGNKNFzaMy1FQhZTovzp4TklUtKYEp0nN5eaCihiSPBxiIapMopjSw5iLIzGhBMNAHCEbLFZHo5dAAAAAElFTkSuQmCC" alt="Info" border="0" /\x3E %1\x3C/div\x3E',
'= Wiki is read-only\n\
If you clicked the *Disallow edits* button in the wiki *Options*, this wiki became read-only. To undo that:\n\
# Back up this wiki.\n\
# Open it in a text editor.\n\
# Do a search for: {{{"permit_edits":false,}}}\n\
# Replace it with: {{{"permit_edits":true,}}}\n\
# Save the file.\n\
# Close the text editor.\n\
# Open the wiki and use normally.\n\
',
'= Create a page\n\
# Click the *New Page* link in the menu.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type the page title. Maximum length is 256 characters, although you might want to use a shorter title to not interfere with the navigation bar. Page titles are case sensitive, all characters are allowed except angled brackets, square brackets, curly braces and pipe characters ("&lt;&gt;[]{}|")\x3Cbr\x3E\x3Cbr\x3E\n\
# Press the *Enter* key or click the *OK* button.\x3Cbr\x3E\x3Cbr\x3E\n\
# When asked if you\'d like to add a link into the main menu, accept by pressing the *Enter* key or clicking the *OK* button, or refuse by clicking the *Cancel* button.\x3Cbr\x3E\x3Cbr\x3E\n\
# A level one header with the title of your page will be inserted for you automatically. You can edit or delete the header if you like.\x3Cbr\x3E\x3Cbr\x3E\n\
# Edit the contents of the main text area by typing normally.\x3Cbr\x3E\x3Cbr\x3E\n\
# Use the editor\'s buttons to insert code to format the text, or type the code in manually. Note that the use of plain text doesn\'t require any code.\x3Cbr\x3E\x3Cbr\x3E\n\
# Save your changes by clicking on the *Save* icon in the navigation bar.\n\
\n\
An alternate method of creating a page is to type a new page title inside nested brackets. The link will be red. Click it to create the new page. Example:\n\
\n\
\x3Cdiv class="woas_helptext"\x3EType this into a page:\x3C/div\x3E{{{\n\
[[My new page]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
[[My new page]]\n\
\n\
== Troubleshooting\n\
* There are four reasons why you may not be able to create a page:\x3Cbr\x3E\x3Cbr\x3E\n\
** You didn\'t type a title for the page in the title box that popped up. In this case a message will pop up letting you know that pages must be titled and giving you an opportunity to title the page.\x3Cbr\x3E\x3Cbr\x3E\n\
** There is already a page by that title. In this case a message will pop up letting you know the page already exists.\x3Cbr\x3E\x3Cbr\x3E\n\
** The wiki is being run in [[WoaS::Help::Publish wiki online|read-only mode]], so no changes are allowed. See the [[WoaS::Help::Wiki is read-only]] page for instructions on how to return the wiki to editing mode.\x3Cbr\x3E\x3Cbr\x3E\n\
** You are trying to use a [[WoaS::Help::Namespaces|namespace]] that is reserved by WoaS. In this case a message will pop up letting you know the namespace is reserved and giving you an opportunity to choose a different title/namespace for the page.\n\
',
'= Delete a page\n\
# *From the menu:*\x3Cbr\x3E\x3Cbr\x3E\n\
## Click the *Delete Page* link in the menu while displaying the page you wish to delete, or click it from any page and type in the name of the page you wish to delete.\x3Cbr\x3E\x3Cbr\x3E\n\
## You\'ll be asked for confirmation.\x3Cbr\x3E\x3Cbr\x3E\n\
## When the page is deleted, you\'ll be returned to the page you were on before deleting the page.\x3Cbr\x3E\x3Cbr\x3E\n\
## You may have to remove any links to the deleted page from the [[WoaS::Help::Edit the menu|menu]] or other pages.\x3Cbr\x3E\x3Cbr\x3E\n\
# *From the editor:*\x3Cbr\x3E\x3Cbr\x3E\n\
## Click the *Edit* icon in the navigation bar.\x3Cbr\x3E\x3Cbr\x3E\n\
## Select everything inside the main text area and delete it.\x3Cbr\x3E\x3Cbr\x3E\n\
## Save your changes by clicking the *Save* icon in the navigation bar.\x3Cbr\x3E\x3Cbr\x3E\n\
## Edit the [[WoaS::Help::Edit the menu|menu]] to remove the link to the deleted page if it isn\'t removed automatically.\n\
',
'= Edit a page\n\
All pages (except WoaS pages within reserved [[WoaS::Help::Namespaces|namespaces]]) can be edited or deleted. In order to edit such pages, click the *Edit* icon in the navigation bar. You can find all the user pages by clicking the *Special::All Pages* link in the menu.\n\
# Click the *Edit* icon in the navigation bar or double-click on the page if you\'ve enabled that setting in the wiki *Options*.\x3Cbr\x3E\x3Cbr\x3E\n\
# Edit the contents of the main text area by typing normally.\x3Cbr\x3E\x3Cbr\x3E\n\
# Use the editor\'s buttons to insert code to format the text, or type the code in manually. Note that the use of plain text doesn\'t require any code.\x3Cbr\x3E\x3Cbr\x3E\n\
# Save your changes by clicking on the *Save* icon in the navigation bar.\n\
',
'= Erase all pages\n\
To erase all user-created pages in this wiki and start fresh:\n\
# *Make sure you are using a wiki you don\'t mind losing.* If not, make a copy and erase the copy.\n\
# Click the *Advanced* icon in the navigation bar.\n\
# Click on *Special::Erase Wiki* in the *Maintenance* section.\n\
\n\
See also: [[WoaS::Help::Special::Erase Wiki]]\n\
',
'= Edit the menu\n\
# Click the *Edit menu* button at the bottom of the menu.\x3Cbr\x3E\x3Cbr\x3E\n\
# Edit the contents of the main text area by typing normally. The menu can contain links, lists, tables, colored text, etc. as a normal wik page\x3Cbr\x3E\x3Cbr\x3E\n\
# Save your changes by clicking on the *Save* icon in the top right navigation panel.\n\
\n\
You can use various styles for your menu; you can find detailed explanation of list styles in the [[WoaS::Help::Lists]] page.\n\
\n\
== Add a sub-menu beneath the menu\n\
See the *Namespace sub-menu* section of the [[WoaS::Help::Namespaces]] page.\n\
',
'= Headers\n\
Below are examples on how to use wiki markup to create headers in this wiki; there are six levels of supported headers.\n\
\n\
{{{\n\
= Header level 1\n\
}}}\n\
= Header level 1 =\n\
\n\
{{{\n\
== Header level 2\n\
}}}\n\
== Header level 2\n\
\n\
{{{\n\
== Header level 3\n\
}}}\n\
== Header level 3\n\
\n\
{{{\n\
== Header level 4\n\
}}}\n\
== Header level 4\n\
\n\
{{{\n\
== Header level 5\n\
}}}\n\
== Header level 5\n\
\n\
{{{\n\
== Header level 6\n\
}}}\n\
== Header level 6\n\
',
'= Help::Rulers \n\
Rulers (horizontal rules or lines) use the full width of the page by default. They can be styled to a smaller width by surrounding them with HTML &lt;div&gt; tags. Styling can also control their position.\n\
\n\
== Standard horizontal rule ==\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
----\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\x3Cbr\x3E\n\
----\n\
\n\
\n\
== Custom width horizontal rule aligned left ==\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing 50% with the width you like:\x3C/div\x3E{{{\n\
\x3Cdiv style="width:50%";\x3E\n\
----\n\
\x3C/div\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cdiv style="width:50%";\x3E\n\
----\n\
\x3C/div\x3E\n\
\n\
== Custom width horizontal rule aligned right ==\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing 50% with the width you like:\x3C/div\x3E{{{\n\
\x3Cdiv style="width:50%; float:right;"\x3E\x3Chr\x3E\x3C/div\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cdiv style="width:50%; float:right;"\x3E\x3Chr\x3E\x3C/div\x3E\n\
\n\
== Custom width centered horizontal rule ==\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing 50% with the width you like:\x3C/div\x3E{{{\n\
\x3Ccenter\x3E\x3Cdiv style="width:50%";\x3E\n\
----\n\
\x3C/div\x3E\x3C/center\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Ccenter\x3E\x3Cdiv style="width:50%";\x3E\n\
----\n\
\x3C/div\x3E\x3C/center\x3E\n\
',
'= Include text file\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PATH with the full path to the file:\x3C/div\x3E{{{\n\
\x3Ciframe height="400" width="100%" src="file:///PATH"\x3E\x3C/iframe\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo include a text file in the page inside an iFrame.\x3C/div\x3E\n\
* *Linux example:*\x3Cbr\x3E{{{\n\
\x3Ciframe height="400" width="100%" src="file:///home/username/Desktop/file.txt"\x3E\x3C/iframe\x3E\n\
}}}\x3Cbr\x3E\n\
* *Windows example:*\x3Cbr\x3E{{{\n\
\x3Ciframe height="400" width="100%" src="file:///C:/Users/Username/Documents/file.txt"\x3E\x3C/iframe\x3E\n\
}}}\n\
',
'= Include web page\n\
Web pages can be included in a page as embedded objects or in iFrames.\n\
\n\
[[Include::WoaS::Template::Info|Some pages may not render correctly depending on how they\'re coded. Embedding more than one web page in a wiki page will cause the final embedded web page to steal the focus when the page is loaded, so it\'s best to have only one per page.]]\n\
== Embed a web page as an object\n\
This method makes the embedded web page become a seamless part of the page.\n\
\n\
* *Embed a local HTML file as an object:*\x3Cbr\x3E\x3Cbr\x3E\n\
** \x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PATH with the full path to HTML file you wish to include, and changing the width and height to suit your taste:\x3C/div\x3E{{{\n\
\x3Chtml\x3E\x3Cobject data="PATH" style="width:100%; height:630px;"\x3EFile not found.\x3C/object\x3E\x3C/html\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo embed a local HTML file in a page.\x3C/div\x3E\x3Cbr\x3E\n\
*** For example, if you want to embed the {{{/Work/MyProject.html}}} file as an object, you\'d use this command:\x3Cbr\x3E{{{\n\
\x3Chtml\x3E\x3Cobject data="/Work/MyProject.html" style="width:100%; height:630px;"\x3EFile not found.\x3C/object\x3E\x3C/html\x3E\n\
}}}\x3Cbr\x3E\x3Cbr\x3E\n\
* *Embed a remote URL as an object:*\x3Cbr\x3E\x3Cbr\x3E\n\
** \x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing URL with the URL of the page you wish to include, and changing the width and height to suit your taste:\x3C/div\x3E{{{\n\
\x3Chtml\x3E\x3Cobject data="URL" style="width:100%; height:630px;"\x3EURL not found.\x3C/object\x3E\x3C/html\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo embed an external URL in a page.\x3C/div\x3E\x3Cbr\x3E\n\
*** For example, if you want to embed the Google page at [[http://www.google.com]] as an object, you\'d use this command:\x3Cbr\x3E{{{\n\
\x3Chtml\x3E\x3Cobject data="http://www.google.com" style="width:100%; height:630px;"\x3EURL not found.\x3C/object\x3E\x3C/html\x3E\n\
}}}\n\
\n\
== Embed a web page in an iFrame\n\
This method creates a frame around the embedded web page. The code shown below is for a plain frame, but you can style the iFrame further by adding a border, changing the border style to dotted, dashed, solid, double, groove, ridge, inset, or outset, changing the border width to whatever thickness you like, and the border color to whatever color you like.\n\
\n\
* *Embed a local HTML file in an iFrame:*\x3Cbr\x3E\x3Cbr\x3E\n\
** \x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PATH with the full path to HTML file you wish to include, and changing the width and height to suit your taste:\x3C/div\x3E{{{\n\
\x3Ciframe height="400" width="100%" height:630px; src="PATH"\x3E\x3C/iframe\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo include a local HTML file in a wiki page.\x3C/div\x3E\x3Cbr\x3E\n\
*** For example, if you want to embed the {{{/Work/MyProject.html}}} file in an iFrame, you\'d use this command:\x3Cbr\x3E{{{\n\
\x3Ciframe height="400" width="100%" height:630px; src="/Work/MyProject.html"\x3E\x3C/iframe\x3E\n\
}}}\x3Cbr\x3E\x3Cbr\x3E\n\
* *Embed a remote URL in an iFrame:*\x3Cbr\x3E\x3Cbr\x3E\n\
** \x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing URL with the URL of the page you wish to include, and changing the width and height to suit your taste:\x3C/div\x3E{{{\n\
\x3Ciframe height="400" width="100%" height:630px; src="URL"\x3E\x3C/iframe\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo include a web page in a wiki page.\x3C/div\x3E\x3Cbr\x3E\n\
*** For example, if you want to embed the Google page at [[http://www.google.com]] in an iFrame, you\'d use this command:\x3Cbr\x3E{{{\n\
\x3Ciframe height="400" width="100%" height:630px; src="http://www.google.com"\x3E\x3C/iframe\x3E\n\
}}}\n\
',
'= Include wiki page\n\
To include the contents of a wiki page inside another wiki page, use an {{{[[Include::]]}}} tag on a line by itself, inserting the name of the page you\'d like to include after the double colons in the tag.\n\
\n\
[[Include::WoaS::Template::Info|Page names are case sensitive.]]\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing Page Name with the name of the page you wish to include:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[Include::Page Name]]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo include the contents of another wiki page in the current page.\x3C/div\x3E\n\
\n\
== Example\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[Include::Special::Search]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
[[Include::Special::Search]]\n\
',
'= JavaScript\n\
== Adding JavaScript to your page\n\
To add JavaScript to your page, you must enclose it inside JavaScript tags.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing YOUR_CODE_HERE with your JavaScript code:\x3C/div\x3E{{{\n\
\x3Cscript type="text/javascript"\x3E\n\
YOUR_CODE_HERE\n\
\x3C/script\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo add JavaScript to your page.\x3C/div\x3E\n\
== Adding JavaScript to the wiki source\n\
It is possible to add &lt;script/&gt; tags to your wiki source and they will be correctly rendered in the document &lt;head/&gt; tag upon page loading; also external scripts (using the /src/ attribute) will be parsed and activated, always respecting the order of declaration of the &lt;script /&gt; tags.\n\
\n\
[[Include::WoaS::Template::Info|Since the JavaScript tags are activated from within the &lt;head /&gt; tag, you cannot use document.write() or similar inline JavaScript statements.]]\n\
== Using external JavaScript\n\
You can include external JavaScript on a page by placing the script file in the same directory as this wiki and then inserting a reference to it in the body of the page.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing SCRIPTNAME.JS with the name of your script:\x3C/div\x3E{{{\n\
\x3Cscript src="SCRIPTNAME.JS"\x3E\x3C/script\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo include an external JavaScript in a page.\x3C/div\x3E\n\
=== Example\n\
This page contains this code:\x3Cbr\x3E{{{\n\
\x3Cscript src="example.js"\x3E\x3C/script\x3E\n\
}}}\n\
To see an example using external JavaScript:\n\
# Create a text file in the same directory as this wiki.\x3Cbr\x3E\x3Cbr\x3E\n\
# Paste this into the file:\x3Cbr\x3E{{{\n\
alert("This is an example alert!");\n\
}}}\x3Cbr\x3E\n\
# Save the file as *example.js*\x3Cbr\x3E\x3Cbr\x3E\n\
# Reload the wiki.\x3Cbr\x3E\x3Cbr\x3E\n\
# Open this page from the menu (not in the help pop-up) to run the *example.js* script and see the alert.\n\
\x3Cscript src="example.js"\x3E\x3C/script\x3E\n\
== Using JavaScript to create a temporary page\n\
Using this code, you can get this wiki to create a link to a dynamically created temporary page with custom content (it accepts HTML tags as part of the content) under the JavaScript [[WoaS::Help::Namespaces|namespace]]. The temporary page will be created each time the link is clicked, and it will be uncreated as soon as you navigate to another page or close the wiki.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing CONTENT with your content, NAME with the page name, and LINK with the text you want the link to have:\x3C/div\x3E{{{\n\
\x3Cscript\x3Efunction temporary(arg) {return \'CONTENT\';}\x3C/script\x3E[[Javascript::temporary(\'NAME\')|LINK]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a dynamically created temporary page.\x3C/div\x3E\n\
[[Include::WoaS::Template::Info|Only one of these links may be used per page.]]\n\
Paste each of these into a new page one by one to see what they do:\n\
* This one uses the temporary page name as part of its content:\x3Cbr\x3E{{{\n\
\x3Cscript\x3Efunction temporary(arg) {return \'This page was dynamically created using *\'+arg+\'* as content!\';}\x3C/script\x3E[[Javascript::temporary(\'sample\')|Click here]]\n\
}}}\x3Cbr\x3E\n\
* This one demonstrates the use of various HTML tags in the content of the page:\x3Cbr\x3E{{{\n\
\x3Cscript\x3Efunction temporary(arg) {return \'This page contains more than one line.\x3Cbr\x3EThis line contains \x3Cb\x3Ebold\x3C/b\x3E, \x3Ci\x3Eitalic\x3C/i\x3E, \x3Cu\x3Eunderlined\x3C/u\x3E, and \x3Cfont color="red"\x3Ecolored\x3C/font\x3E text.\x3Cbr\x3E\x3Cbr\x3EAnd here is a list:\x3Cbr\x3E\x3Cul\x3E\x3Cli\x3Eitem1\x3C/li\x3E\x3Cli\x3Eitem2\x3C/li\x3E\x3Cli\x3Eitem3\x3C/li\x3E\x3C/ul\x3E\';}\x3C/script\x3E[[Javascript::temporary(\'My Page\')|Click here]]\n\
}}}\n\
\n\
== Using JavaScript for page redirection\n\
The code below will redirect from the current page to the wiki page you specify a predefined number of seconds after the current page loads.\n\
\n\
[[Include::WoaS::Template::Info|WARNING! Use this code carefully! Back up your wiki before trying it!]]\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PAGENAME with the name of the page to redirect to, and 10 with the number of seconds the script should delay:\x3C/div\x3E{{{\n\
\x3Cscript type="text/javascript"\x3E\n\
setTimeout(onload="go_to(\'PAGENAME\')",10*1000);\n\
\x3C/script\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo redirect the current page to the PAGENAME page 10 seconds after the current page loads.\x3C/div\x3E\n\
[[Include::WoaS::Template::Info|Note that this will redirect to the next page even if you\'re in the editor! The only indication you will have if you\'re in the editor is that name in the the Page title box will change to the name of the redirected page. If you don\'t check this before saving, your changes will be saved to the redirected page, overwriting its contents.\x3Cbr\x3E\x3Cbr\x3EIt\'s a good idea to put this code near the top of any page (preferably directly beneath the first header on the page) so that you can find it quickly, and also to make the delay at *least* 10 seconds so that you have time to open the page in the editor, change the *PAGENAME* portion of the code to a nonexistent page, and then save the page before the timer runs out. Then you can reopen the page safely without risk of it redirecting while you\'re working on it. All that will happen if you give the script a nonexistent page name is that an alert will pop up asking if you\'d like to create the nonexistent page. You can click *Cancel* when that popup comes up and continue working without further interruption. An even safer method is to open the wiki in a text editor and make changes to the page contents from there.]]\n\
== Using JavaScript to reload the wiki\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Cinput type="button" value="Reload wiki" onClick="window.location.href=window.location.href"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a button that reloads the wiki when you click it.\x3C/div\x3E\n\
',
'= Join lines of text\n\
If you have lengthy content that you\'d like to break up into shorter lines in the editor while still being presented as a long line when the page is viewed, you can split the line up into as many pieces as you like, inserting a backslash at the *end* of each line to let the wiki parser know you want that line joined with the one below it. When you save the page, the line will be displayed intact.\n\
\n\
[[Include::WoaS::Template::Info|Backslashes *within* a line will be ignored by the wiki parser and will not influence how the text is displayed.]]\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
Putting a \\ at the end of any line \\\n\
makes it join together \\\n\
with the line below it.\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
Putting a \\ at the end of any line \\\n\
makes it join together \\\n\
with the line below it.\n\
',
'= Non-breaking spaces\n\
A non-breaking space can add extra space between characters on a line since this is not possible simply by pressing the space bar more than once.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
&nbsp;\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a non-breaking space.\x3C/div\x3E\n\
== Examples\n\
\x3Cdiv class="helptext"\x3ETo insert 5 spaces between two words, insert 5 non-breaking spaces between them, like this:\x3C/div\x3E{{{\n\
word&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word\n\
}}}\x3Cbr\x3E\x3Cdiv class="helptext"\x3ETo create this:\x3C/div\x3E\n\
word&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;word\n\
\n\
\x3Cdiv class="helptext"\x3EAnother method is to insert a combination of spaces and non-breaking spaces. To insert 5 spaces between two words, insert 1 space, 3 non-breaking spaces, and 1 space between them, like this:\x3C/div\x3E{{{\n\
word &nbsp;&nbsp;&nbsp; word\n\
}}}\x3Cbr\x3E\x3Cdiv class="helptext"\x3ETo create this:\x3C/div\x3E\n\
word &nbsp;&nbsp;&nbsp; word\n\
',
'= Namespaces\n\
When you create a page and use the *::* separator in the page name, you will be using a *namespace* to define parent and child pages. For example, {{{[[Recipes::Desserts]]}}} and {{{[[Recipes::Main dishes]]}}} would both belong to the {{{[[Recipes::]]}}} namespace.\n\
\n\
You can also use sub-namespaces, like {{{[[Recipes::Desserts::Cakes]]}}}.\n\
* *Recipes::* is the namespace.\n\
* *Desserts::* is a sub-namespace of *Recipes::*.\n\
* *Cakes::* is a sub-namespace of *Desserts::*.\n\
[[Include::WoaS::Template::Info|Each namespace can have as many child pages under it as you like (within the resource limits of your hardware).]]\n\
An advantage of creating parent and child pages is that the full path to each page is displayed in the navigation bar, so when you\'re on any page in a particular namespace, the parent page name will be in the navigation bar with the namespace (and sub-namespace, if the page has one) as a clickable link which will open an automatically generated page listing all the pages in that namespace (or sub-namespace) for quick navigation.\n\
\n\
== Namespaces reserved by this wiki\n\
These namespaces are reserved by the wiki for use by the wiki:\n\
* *Javascript::* for direct JavaScript execution\n\
* *Lock::* used internally for encrypted pages\n\
* *Locked::* for encrypted pages\n\
* *Special::* for all the special pages\n\
* *Tagged::* for all the tagged pages\n\
* *Tags::* for tagging pages\n\
* *Unlock::* used internally for encrypted pages\n\
* *Unlocked::* for plain (unencrypted) pages\n\
* *WoaS::* for aliases, the bootscript page, the Help pages, and templates used by the Help pages\n\
\n\
These namespaces are reserved by the wiki for use by the wiki and the user:\n\
* *File::* for embedded files\n\
* *Image::* for embedded images\n\
* *Include::* for transclusion\n\
\n\
=== Namespace sub-menu\n\
If you add *::Menu* to the end of a page name, a sub-menu will be temporarily added below the main menu when any pages belonging to that page\'s namespace are opened. You can determine what goes into that temporary menu entry by editing the page with *::Menu* in its name. All content on the page will be displayed in the sub-menu. The sub-menu will vanish as soon as you navigate away from that namespace.\n\
\n\
For example, if you have these pages:\n\
* {{{[[Recipes::Menu]]}}}\n\
* {{{[[Recipes::Desserts]]}}}\n\
* {{{[[Recipes::Main dishes]]}}}\n\
* {{{[[Recipes::Side dishes]]}}}\n\
* {{{[[Recipes::Soups]]}}}\n\
You can type *My favorite recipes!* into the {{{[[Recipes::Menu]]}}} page, and any time you open any of the Recipes pages, *My favorite recipes!* will appear in the sub-menu of the main menu. Or you can type {{{[[Recipes::]]}}} into the {{{[[Recipes::Menu]]}}} page to have a listing of all pages in the Recipes:: namespace in the submenu any time a page in the Recipes:: namespace is opened.\n\
',
'= Text formatting\n\
== Blinking\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Cblink\x3EThis is blinking text.\x3C/blink\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cblink\x3EThis is blinking text.\x3C/blink\x3E\n\
\n\
[[Include::WoaS::Template::Info|This is not supported in Chrome, IE, or Safari.]]\n\
== Bold\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
*This is bold text.*\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
*This is bold text.*\n\
\n\
== Colored\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Cfont color="#FF00FF"\x3EThis is colored text.\x3C/font\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cfont color="#FF00FF"\x3EThis is colored text.\x3C/font\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EOr use this code in a page:\x3C/div\x3E{{{\n\
\x3Cfont color="fuchsia"\x3EThis is colored text.\x3C/font\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cfont color="fuchsia"\x3EThis is colored text.\x3C/font\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EOr use this code in a page:\x3C/div\x3E{{{\n\
\x3Cspan style="color:#FF00FF"\x3EThis is colored text.\x3C/span\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cspan style="color:#FF00FF"\x3EThis is colored text.\x3C/span\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EOr use this code in a page:\x3C/div\x3E{{{\n\
\x3Cspan style="color:fuchsia"\x3EThis is colored text.\x3C/span\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cspan style="color:fuchsia"\x3EThis is colored text.\x3C/span\x3E\n\
\n\
== Italic\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
/This is italic text./\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
/This is italic text./\n\
\n\
== Plain\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
This is plain text.\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
This is plain text.\n\
\n\
== Underlined\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
_This is underlined text._\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
_This is underlined text._\n\
\n\
== Underlined Bold Italic\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
_*/This is underlined and bold and italic text./*_\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
_*/This is underlined and bold and italic text./*_\n\
',
'= Rename a page\n\
# Click the *Edit* icon in the banner.\n\
# Edit the contents of the text inside the *Page title* area at the top of the page.\n\
# Save your changes by clicking on the *Save* icon in the navigation bar.\n\
',
'= Page scrolling\n\
By default, this wiki offers two choices for scrolling in the wiki *Options*. The *Fixed menu area and navigation bar* is disabled by default. This locks all page elements in place so the entire page scrolls as one connected unit. Enabling it locks the navigation bar and menu in place while allowing the rest of the page to scroll.\n\
\n\
You can change the settings by clicking the *Advanced* icon in the navigation bar and then clicking the *Options* link in the *Options* section.\n\
',
'= Table of Contents\n\
You can insert a Table of Contents into your page by using a special wiki tag. It will be automatically populated with all the headers on a page. The Table of Contents expects the first header on a page to be a Level 1 header. If you use any other level header first, that header and any headers after it will be represented by hash marks until a Level 1 header is encountered. From that point on, the headers will be numbered properly.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code on a line by itself in your page:\x3C/div\x3E{{{\n\
[[Special::TOC]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo add a Table of Contents to a page.\x3C/div\x3E\n\
\n\
[[Include::WoaS::Template::Info|Note that the placement of the Table of Contents is determined by where you put the tag in the page.]]\n\
',
'= Tags\n\
Tags are special links used by this wiki to group pages together into categories so they can easily be found again. A tag can be placed anywhere on a page, but it\'s a good idea to choose a standard location like the bottom of the page so you can easily find and edit them as your wiki grows. You can choose any name you like for the tag. You can also give a page more than one tag if the page fits into more than one category.\n\
\n\
Tag a page by using a {{{[[Tags::]]}}} link, adding the tag name or names after the double colons. This can be done by using the *Tags* button in the editor or by typing the tag in manually using the instructions below.\n\
\n\
=== Add a tag to a page (method 1)\n\
# Place your cursor at the bottom of the page.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Tags* button in the editor.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type in a name for the tag.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *OK* button.\n\
\n\
=== Add a tag to a page (method 2)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing EXAMPLE with the name of the tag you\'d like to add:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[T\x3C!-- --\x3Eags::EX\x3C!-- --\x3EAMPLE]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo add a tag to your page.\x3C/div\x3E\n\
=== Add more than one tag to a page (method 1)\n\
# Place your cursor at the bottom of the page.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Tags* button in the editor.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type in names for the tags, separating each from the one before it with a pipe. For example:\x3Cbr\x3E\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing EXAMPLE1, EXAMPLE2, and EXAMPLE3 with the names of the tags you\'d like to add:\x3C/div\x3E\x3Cbr\x3E\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[T\x3C!-- --\x3Eags::EX\x3C!-- --\x3EAMPLE1|EX\x3C!-- --\x3EAMPLE2|EX\x3C!-- --\x3EAMPLE3]\x3C!-- --\x3E]\x3C/div\x3E\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo add three tags to your page.\x3C/div\x3E\x3Cbr\x3E\n\
# Click the *OK* button.\n\
\n\
=== Add more than one tag to a page (method 2)\n\
To use more than one tag on a page, use one tag link and add as many tags as you like, separating each from the one before it with a pipe. For example: {{{[[Tags::Recipes|Chocolate|Layered cakes]]}}}.\n\
\n\
=== Choosing tag names\n\
Tag names are case sensitive. For example: {{{[[Tags::Recipes]]}}} and {{{[[Tags::recipes]]}}} are two different tags.\n\
\n\
Tag names can be more than one word long with a space between each word. For example: {{{[[Tags::Layered cakes]]}}}.\n\
\n\
=== Add a link to tagged pages\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing EXAMPLE with the tag you\'d like to use:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[Tagged::EXAMPLE]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo create a listing of pages tagged with EXAMPLE.\x3C/div\x3E\n\
\n\
=== Add a filtered link to tagged pages\n\
By putting an exclamation mark (*!*) in front of the tag name, you can filter out a specific tag from a tagged pages list:\x3Cbr\x3E\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing EXAMPLE with the tag you\'d like to filter out:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[Tagged::!EXAMPLE]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo create a filtered listing of tagged pages that are not tagged with EXAMPLE.\x3C/div\x3E\n\
\n\
=== Include a listing of tagged pages\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing EXAMPLE with the tag you\'d like to use:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[Include::Tagged::EXAMPLE]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo display a listing of pages tagged with EXAMPLE inside the current page.\x3C/div\x3E\n\
\n\
=== Include a filtered listing of tagged pages\n\
By putting an exclamation mark (*!*) in front of the tag name, you can filter out a specific tag from a tagged pages list:\x3Cbr\x3E\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing EXAMPLE with the tag you\'d like to filter out:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[Include::Tagged::!EXAMPLE]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo display a filtered listing of tagged pages that are not tagged with EXAMPLE inside the current page.\x3C/div\x3E\n\
',
'= Publish wiki online\n\
This wiki can be published online as a single-file, framed web page by making it read-only. The read-only format is also great for sharing your work with others by email. Most email programs accept .htm pages as attachments.\n\
# Make a backup copy of this wiki.\n\
# Click the *Advanced* icon in the banner.\n\
# Scroll to the bottom of the page.\n\
# Click the *Disallow edits* button to make the file read-only.\n\
# Upload the wiki to a web server and publish a link to it.\n\
To enable wiki editing again, see the [[WoaS::Help::Wiki is read-only]] page.\n\
',
'= Run wiki on a server\n\
This is a personal wiki that\'s not designed to be used on a server. Any changes you make to the file will only be permanent if the wiki is on your computer. Advanced users may be able to find a way to get around that, but it\'s currently not possible by default.\n\
',
'= Requirements =\n\
\n\
== Supported Browsers\n\
Wiki on a Stick is actively supported on the following browsers:\n\
\n\
* Firefox 1.5\n\
* Firefox 2\n\
* Firefox 3\n\
* Firefox 3.5+\n\
* Opera\n\
* Internet Explorer 5.5\n\
* Internet Explorer 6\n\
* Internet Explorer 7*\n\
* Internet Explorer 8*\n\
\x3Cdiv class="alertnote"\x3E* On IE7-IE8 you might want to rename your application to .hta to enable its trusted privileges.\x3C/div\x3E\n\
== Limitations\n\
* Firefox (and possibly other browsers, too) cannot save to filenames containing UTF8 characters. Use unix-style filenames instead.\n\
* Internet Explorer 6 and 7 do not support embedded images (that\'s why you will not see button icons).\n\
* Internet Explorer does not allow saving to a network path in the form /\\\\machine\\share\\bookonastick.htm/. To use this wiki over a network with Internet Explorer, map network paths to network drives first.\n\
* Internet Explorer 6 does not allow a fixed menu.\n\
\n\
== TiddlySaver\n\
\x3Csub\x3Eoriginal text by J.Ruston, 13 August 2007 (created 21 August 2006)\x3C/sub\x3E\n\
\x3Csub\x3Emodified by Daniele C. on 29 September 2007\x3C/sub\x3E\n\
\n\
The TiddlySaver Java applet allows Wiki on a Stick from a file:// URL to save changes when using Safari, Opera and other Java-enabled browsers.\n\
\n\
The Java applet "TiddlySaver.jar", a very small file, must be placed in the same directory as your WoaS file. In order to use it you will need to give it the necessary privileges by editing your .java.policy file.\n\
\n\
For Windows, the file will be at C:\\Documents and Settings\\your-user-name\\.java.policy. Add the following lines (substituting the directory  as appropriate):\n\
{{{\n\
grant codeBase "file:${user.home}/My Documents/tiddlywiki-folder/*" {\n\
  permission java.io.FilePermission "${user.home}${/}My Documents${/}stickwiki-folder${/}*", "read,write";\n\
};\n\
}}}\n\
On Mac OS X, the file is found at /Users/your-user-name/.java.policy:\n\
{{{\n\
grant codeBase "file:${user.home}/Documents/tiddlywiki-folder/*" {\n\
  permission java.io.FilePermission "${user.home}${/}Documents${/}stickwiki-folder${/}*", "read,write";\n\
};\n\
}}}\n\
It can be tricky creating files whose name starts with a period, so you can use this \x3Ca href="http://stickwiki.sourceforge.net/src/.java.policy"\x3Epre-built .java.policy file\x3C/a\x3E. The same file is suitable for Macs too, just edit it and delete the "My " bit, leaving just "Documents". Make sure you save it in the right place for each operating system!\n\
\n\
If you have trouble setting up the permissions correctly, you can try granting broader permissions to the applet like this:\n\
{{{\n\
grant codeBase "file://localhost/home/users/Desktop/\n\
TiddlySaver.jar"\n\
 { permission java.security.AllPermission; };\n\
}}}\n\
The TiddlySaver java applet was written by J.Rouston.\n\
\n\
',
'= Lists\n\
Simple single-level lists can be created by using the three list buttons in the editor.\n\
* The *{{{*}}}* button inserts the wiki syntax for a bulleted list item\n\
* The *{{{#}}}* button inserts the wiki syntax for a numbered list item.\n\
* The *{{{@}}}* button inserts the wiki syntax for an alphanumeric list item.\n\
* The *{{{List}}}* button wraps HTML ul tags around the selected text to create an unordered list.\n\
* The *{{{List =}}}* button wraps HTML ol tags around the selected text to create an ordered list.\n\
* The *{{{li[*]}}}* button wraps HTML li tags around the selected text to create a list item.\n\
If you\'d like to create mixed lists, nested lists, or lists with additional types of list items, the methods below can be used instead.\n\
\n\
== Wiki markup lists\n\
Wiki markup lists are created with between one and five specific characters ({{{@}}}, {{{*}}}, or {{{#}}}) at the beginning of a line, followed by a space, and then whatever text you\'d like the list item to have. Each list must begin with a list item with only one character at the beginning of the line, and there can be no blank lines between entries in the list. To create a blank line beneath a list item, you can insert two HTML {{{\x3Cbr\x3E}}} tags at the end of of the list item\'s text. Wiki and HTML markup are accepted in list items.\n\
\n\
=== Alphanumeric List\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
@ Test\n\
@ Test\n\
@ Test\n\
@@ Test\n\
@@@ Test\n\
@@@@ Test\n\
@ Test\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
@ Test\n\
@ Test\n\
@ Test\n\
@@ Test\n\
@@@ Test\n\
@@@@ Test\n\
@ Test\n\
\n\
=== Bulleted List\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
* Test\n\
* Test\n\
** Test\n\
*** Test\n\
**** Test\n\
* Test\n\
* Test\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\x3Cbr\x3E\n\
* Test\n\
* Test\n\
** Test\n\
*** Test\n\
**** Test\n\
* Test\n\
* Test\n\
\n\
=== Fancy List\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
* ITEM 1 - ITEM 1 SUBTEXT \x3Cblockquote\x3EITEM 1 MORE SUBTEXT\x3C/blockquote\x3E\n\
* ITEM 2 - ITEM 2 SUBTEXT \x3Cblockquote\x3EITEM 2 MORE SUBTEXT\x3C/blockquote\x3E\n\
* ITEM 3 - ITEM 3 SUBTEXT \x3Cblockquote\x3EITEM 3 MORE SUBTEXT\x3C/blockquote\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\x3Cbr\x3E\n\
* ITEM 1 - ITEM 1 SUBTEXT \x3Cblockquote\x3EITEM 1 MORE SUBTEXT\x3C/blockquote\x3E\n\
* ITEM 2 - ITEM 2 SUBTEXT \x3Cblockquote\x3EITEM 2 MORE SUBTEXT\x3C/blockquote\x3E\n\
* ITEM 3 - ITEM 3 SUBTEXT \x3Cblockquote\x3EITEM 3 MORE SUBTEXT\x3C/blockquote\x3E\n\
\n\
=== Numbered List\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
# Test\n\
# Test\n\
## Test\n\
### Test\n\
#### Test\n\
# Test\n\
# Test\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\x3Cbr\x3E\n\
# Test\n\
# Test\n\
## Test\n\
### Test\n\
#### Test\n\
# Test\n\
# Test\n\
\n\
=== Numbered Fancy List\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
# ITEM 1 - ITEM 1 SUBTEXT \x3Cblockquote\x3EITEM 1 MORE SUBTEXT\x3C/blockquote\x3E\n\
# ITEM 2 - ITEM 2 SUBTEXT \x3Cblockquote\x3EITEM 2 MORE SUBTEXT\x3C/blockquote\x3E\n\
# ITEM 3 - ITEM 3 SUBTEXT \x3Cblockquote\x3EITEM 3 MORE SUBTEXT\x3C/blockquote\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\x3Cbr\x3E\n\
# ITEM 1 - ITEM 1 SUBTEXT \x3Cblockquote\x3EITEM 1 MORE SUBTEXT\x3C/blockquote\x3E\n\
# ITEM 2 - ITEM 2 SUBTEXT \x3Cblockquote\x3EITEM 2 MORE SUBTEXT\x3C/blockquote\x3E\n\
# ITEM 3 - ITEM 3 SUBTEXT \x3Cblockquote\x3EITEM 3 MORE SUBTEXT\x3C/blockquote\x3E\n\
\n\
== HTML Lists\n\
HTML lists work the same way as they do in any web page. Specifying the list type can be done in the {{{ol}}}, {{{\x3Cul\x3E}}}, or {{{\x3Cli\x3E}}} tags, depending on how you need to use them. Wiki markup is accepted in list items. If you\'d rather not type in the code for HTML lists, there\'s a *More lists* button in the editor that opens a fourth row of buttons for creating fancy lists.\n\
\n\
=== Specifying list type in the &lt;ol&gt; tag\n\
This method is useful when an entire list will use one list item type. This way you only need to specify the type once, and all the list items can be entered normally.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col style="list-style-type:lower-alpha;"\x3E\n\
\x3Cli\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli\x3Elower-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col style="list-style-type:lower-alpha;"\x3E\n\
\x3Cli\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli\x3Elower-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col style="list-style-type:upper-alpha;"\x3E\n\
\x3Cli\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli\x3Eupper-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col style="list-style-type:upper-alpha;"\x3E\n\
\x3Cli\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli\x3Eupper-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col style="list-style-type:decimal;"\x3E\n\
\x3Cli\x3Edecimal\x3C/li\x3E\n\
\x3Cli\x3Edecimal\x3C/li\x3E\n\
\x3Cli\x3Edecimal\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col style="list-style-type:decimal;"\x3E\n\
\x3Cli\x3Edecimal\x3C/li\x3E\n\
\x3Cli\x3Edecimal\x3C/li\x3E\n\
\x3Cli\x3Edecimal\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col style="list-style-type:lower-roman;"\x3E\n\
\x3Cli\x3Elower-roman\x3C/li\x3E\n\
\x3Cli\x3Elower-roman\x3C/li\x3E\n\
\x3Cli\x3Elower-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col style="list-style-type:lower-roman;"\x3E\n\
\x3Cli\x3Elower-roman\x3C/li\x3E\n\
\x3Cli\x3Elower-roman\x3C/li\x3E\n\
\x3Cli\x3Elower-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col style="list-style-type:upper-roman;"\x3E\n\
\x3Cli\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli\x3Eupper-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col style="list-style-type:upper-roman;"\x3E\n\
\x3Cli\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli\x3Eupper-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
=== Specifying list type in the &lt;ul&gt; tag\n\
This method is useful when an entire list will use one list item type. This way you only need to specify the type once, and all the list items can be entered normally.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Cul style="list-style-type:circle;"\x3E\n\
\x3Cli\x3Ecircle\x3C/li\x3E\n\
\x3Cli\x3Ecircle\x3C/li\x3E\n\
\x3Cli\x3Ecircle\x3C/li\x3E\n\
\x3C/ul\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cul style="list-style-type:circle;"\x3E\n\
\x3Cli\x3Ecircle\x3C/li\x3E\n\
\x3Cli\x3Ecircle\x3C/li\x3E\n\
\x3Cli\x3Ecircle\x3C/li\x3E\n\
\x3C/ul\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Cul style="list-style-type:disc;"\x3E\n\
\x3Cli\x3Edisc\x3C/li\x3E\n\
\x3Cli\x3Edisc\x3C/li\x3E\n\
\x3Cli\x3Edisc\x3C/li\x3E\n\
\x3C/ul\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cul style="list-style-type:disc;"\x3E\n\
\x3Cli\x3Edisc\x3C/li\x3E\n\
\x3Cli\x3Edisc\x3C/li\x3E\n\
\x3Cli\x3Edisc\x3C/li\x3E\n\
\x3C/ul\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Cul style="list-style-type:none;"\x3E\n\
\x3Cli\x3Enone\x3C/li\x3E\n\
\x3Cli\x3Enone\x3C/li\x3E\n\
\x3Cli\x3Enone\x3C/li\x3E\n\
\x3C/ul\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cul style="list-style-type:none;"\x3E\n\
\x3Cli\x3Enone\x3C/li\x3E\n\
\x3Cli\x3Enone\x3C/li\x3E\n\
\x3Cli\x3Enone\x3C/li\x3E\n\
\x3C/ul\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Cul style="list-style-type:square;"\x3E\n\
\x3Cli\x3Esquare\x3C/li\x3E\n\
\x3Cli\x3Esquare\x3C/li\x3E\n\
\x3Cli\x3Esquare\x3C/li\x3E\n\
\x3C/ul\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Cul style="list-style-type:square;"\x3E\n\
\x3Cli\x3Esquare\x3C/li\x3E\n\
\x3Cli\x3Esquare\x3C/li\x3E\n\
\x3Cli\x3Esquare\x3C/li\x3E\n\
\x3C/ul\x3E\n\
\n\
=== Specifying list type in the &lt;li&gt; tag\n\
This method is useful when an creating a fancy list with more than one list item type.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
\x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
\x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
\x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
\x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
\x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
\x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
\x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
\x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
\x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
\x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
\x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
\x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
\x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
\x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
\x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
\x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
\x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
\x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
\x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
\x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
\x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
\x3C/ol\x3E\n\
\n\
=== Mixed HTML list\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
   \x3Col\x3E\n\
   \x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
      \x3Col\x3E\n\
      \x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
         \x3Col\x3E\n\
         \x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
            \x3Col\x3E\n\
            \x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
               \x3Col\x3E\n\
               \x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
                  \x3Col\x3E\n\
                  \x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
                     \x3Col\x3E\n\
                     \x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
                        \x3Col\x3E\n\
                        \x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
                        \x3C/ol\x3E\n\
                     \x3C/ol\x3E\n\
                  \x3C/ol\x3E\n\
               \x3C/ol\x3E\n\
            \x3C/ol\x3E\n\
         \x3C/ol\x3E\n\
      \x3C/ol\x3E\n\
   \x3C/ol\x3E\n\
\x3C/ol\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Col\x3E\n\
\x3Cli style="list-style-type:lower-alpha;"\x3Elower-alpha\x3C/li\x3E\n\
   \x3Col\x3E\n\
   \x3Cli style="list-style-type:upper-alpha;"\x3Eupper-alpha\x3C/li\x3E\n\
      \x3Col\x3E\n\
      \x3Cli style="list-style-type:circle;"\x3Ecircle\x3C/li\x3E\n\
         \x3Col\x3E\n\
         \x3Cli style="list-style-type:decimal;"\x3Edecimal\x3C/li\x3E\n\
            \x3Col\x3E\n\
            \x3Cli style="list-style-type:disc;"\x3Edisc\x3C/li\x3E\n\
               \x3Col\x3E\n\
               \x3Cli style="list-style-type:lower-roman;"\x3Elower-roman\x3C/li\x3E\n\
                  \x3Col\x3E\n\
                  \x3Cli style="list-style-type:none;"\x3Enone\x3C/li\x3E\n\
                     \x3Col\x3E\n\
                     \x3Cli style="list-style-type:square;"\x3Esquare\x3C/li\x3E\n\
                        \x3Col\x3E\n\
                        \x3Cli style="list-style-type:upper-roman;"\x3Eupper-roman\x3C/li\x3E\n\
                        \x3C/ol\x3E\n\
                     \x3C/ol\x3E\n\
                  \x3C/ol\x3E\n\
               \x3C/ol\x3E\n\
            \x3C/ol\x3E\n\
         \x3C/ol\x3E\n\
      \x3C/ol\x3E\n\
   \x3C/ol\x3E\n\
\x3C/ol\x3E\n\
',
'= Tables\n\
The content inside tables can contain internal and external links, and these kinds of [[WoaS::Help::Text formatting|Text formatting]]:\n\
* Blinking\n\
* Bold\n\
* Colored\n\
* Italic\n\
* Plain\n\
* Underlined\n\
* Underlined Bold Italic\n\
\n\
== Basic Table:\n\
\x3C/font\x3E\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
{|\n\
| CELL1 || CELL2\n\
| CELL1 || CELL2\n\
|}\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
{|\n\
| CELL1 || CELL2\n\
| CELL1 || CELL2\n\
|}\n\
\n\
\x3Cdiv class="woas_helptext"\x3EOr use this code in a page:\x3C/div\x3E{{{\n\
{|\n\
| CELL1 || CELL2\n\
|-\n\
| CELL1 || CELL2\n\
|}\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
{|\n\
| CELL1 || CELL2\n\
|-\n\
| CELL1 || CELL2\n\
|}\n\
\n\
The line that starts with {{{|- }}} is a comment line. You can type some text after it which will only be visible when viewing the source:\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
{|\n\
| CELL1 || CELL2\n\
|- This is a comment.\n\
| CELL1 || CELL2\n\
|}\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
{|\n\
| CELL1 || CELL2\n\
|- This is a comment.\n\
| CELL1 || CELL2\n\
|}\n\
\n\
== Complex Table:\n\
Tables can have a specially formatted title row created by adding a pipe followed by a plus symbol and a space before the title text (example: {{{|+ Title}}}), and can contain internal and external wiki links.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page:\x3C/div\x3E{{{\n\
{|\n\
|+ TITLE\n\
| *HEADER1* || *HEADER2* || *HEADER3*\n\
|-\n\
| CELL1 || CELL2 || CELL3\n\
|-\n\
| CELL1 || [[http://www.google.com|Link to Google]] || CELL3\n\
|-\n\
| CELL1 || [[Main Page]] || CELL3\n\
|-\n\
| CELL1 || || CELL3\n\
|}\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
{|\n\
|+ TITLE\n\
| *HEADER1* || *HEADER2* || *HEADER3*\n\
|-\n\
| CELL1 || CELL2 || CELL3\n\
|-\n\
| CELL1 || [[http://www.google.com|Link to Google]] || CELL3\n\
|-\n\
| CELL1 || [[Main Page]] || CELL3\n\
|-\n\
| CELL1 || || CELL3\n\
|}\n\
\n\
\x3Cdiv class="woas_helptext"\x3EOr use this code in a page:\x3C/div\x3E{{{\n\
{|\n\
|+ TITLE\n\
| *HEADER1* || *HEADER2* || *HEADER3*\n\
| CELL1 || CELL2 || CELL3\n\
| CELL1 || [[http://www.google.com|Link to Google]] || CELL3\n\
| CELL1 || [[Main Page]] || CELL3\n\
| CELL1 || || CELL3\n\
|}\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
{|\n\
|+ TITLE\n\
| *HEADER1* || *HEADER2* || *HEADER3*\n\
| CELL1 || CELL2 || CELL3\n\
| CELL1 || [[http://www.google.com|Link to Google]] || CELL3\n\
| CELL1 || [[Main Page]] || CELL3\n\
| CELL1 || || CELL3\n\
|}\n\
\n\
See also: [[WoaS::Help::Table of Contents]]\n\
',
'= Links\n\
== Wiki links\n\
Below are methods for creating links using wiki syntax.\n\
\n\
=== Anchor link\n\
You can use a special anchor link to link to a header on the current page. After clicking an anchor link, use the browser\'s back button to return to where you were on the page.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing HEADER NAME with the name of the header you\'d like to link to:\x3C/div\x3E{{{\n\
[[#HEADER NAME]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create an anchor link.\x3C/div\x3E\n\
=== Email link\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing USERNAME with the name of the person, SERVER with the name of their server, and LINK TEXT with the text you\'d like displayed as a link:\x3C/div\x3E{{{\n\
[[mailto://USERNAME@SERVER|LINK TEXT]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
[[mailto://USERNAME@SERVER|LINK TEXT]]\n\
\n\
=== Email link with subject\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing USERNAME with the name of the person, SERVER with the name of their server, SUBJECT with the subject of the email, and LINK TEXT with the text you\'d like displayed as a link:\x3C/div\x3E{{{\n\
[[mailto://USERNAME@SERVER?subject=SUBJECT|LINK TEXT]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
[[mailto://USERNAME@SERVER?subject=SUBJECT|LINK TEXT]]\n\
\n\
=== External link (labeled)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing URL with the address of the web page, and LABEL with the text for the link:\x3C/div\x3E{{{\n\
[[URL|LABEL]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a labeled external link like this one:\x3C/div\x3E\n\
[[http://www.google.com|Click here for Google]]\n\
\n\
=== External link (plain)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing URL with the address of the web page:\x3C/div\x3E{{{\n\
[[URL]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a plain external link like this one:\x3C/div\x3E\n\
[[http://www.google.com]]\n\
\n\
=== Image as link\n\
==== Base64 image as link\n\
See the [[WoaS::Help::Images]] page.\n\
==== Image as link to wiki page\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing IMAGENAME with the name of an embedded image page, and PAGENAME with the name of a page in this wiki:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[I\x3C!-- --\x3Enclude:\x3C!-- --\x3E:Image:\x3C!-- --\x3E:IMAGENAME|style="cursor:pointer" oncl\x3C!-- --\x3Eick="go_\x3C!-- --\x3Eto(\'PA\x3C!-- --\x3EGENAME\')"]]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo create an image that links to a page in this wiki.\x3C/div\x3E\n\
\n\
==== Image as link to web page\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing Image::IMAGENAME with the name of an embedded image page, and URL with the address of a web page:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[In\x3C!-- --\x3Eclude:\x3C!-- --\x3E:Image:\x3C!-- --\x3E:IMAGENAME|style="cursor:pointer" border="0" onc\x3C!-- --\x3Elick="win\x3C!-- --\x3Edow.o\x3C!-- --\x3Epen(\'URL\')"]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo create an image that links to a web page.\x3C/div\x3E\n\
\n\
=== Include link\n\
You can include the contents of another page of this wiki in the current page by using an include link.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PAGENAME with the name of the page you\'d like to include:\x3C/div\x3E\n\
\x3Cdiv class="woas_helpcode"\x3E[\x3C!-- --\x3E[Include::PAGENAME]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="woas_helptext"\x3ETo include the contents of another page in the current page.\x3C/div\x3E\n\
\n\
=== Internal action link (labeled)\n\
These are internal wiki actions in the form of links:\x3Cbr\x3E\x3Cbr\x3E\n\
{|\n\
| *Use this code in a page:* || *To create this:*\n\
| {{{[[Special::All Pages|All pages]]}}} || [[Special::All Pages|All pages]]\n\
| {{{[[Special::Backlinks|Backlinks]]}}} || [[Special::Backlinks|Backlinks]]\n\
| {{{[[Special::Dead Pages|Dead links]]}}} || [[Special::Dead Pages|Dead links]]\n\
| {{{[[Special::Delete Page|Delete page]]}}} || [[Special::Delete Page|Delete page]]\n\
| {{{[[Special::Duplicate Page|Duplicate page]]}}} || [[Special::Duplicate Page|Duplicate page]]\n\
| {{{[[Special::Edit CSS|Edit CSS]]}}} || [[Special::Edit CSS|Edit CSS]]\n\
| {{{\x3Ca class="link" onclick="javascript:edit()"\x3EEdit page\x3C/a\x3E}}} || \x3Ca class="link" onclick="javascript:edit()"\x3EEdit page\x3C/a\x3E\n\
| {{{[[Special::Go to|Go to...]]}}} || [[Special::Go to|Go to...]]\n\
| {{{[[Tagged::Help|Help pages]]}}} || [[Tagged::Help|Help pages]]\n\
| {{{[[Locked::|Locked pages]]}}} || [[Locked::|Locked pages]]\n\
| {{{[[Special::Main Page|Main page]]}}} || [[Special::Main Page|Main page]]\n\
| {{{[[Special::New Page|New page]]}}} || [[Special::New Page|New page]]\n\
| {{{[[Special::Orphaned Pages|Orphaned pages]]}}} || [[Special::Orphaned Pages|Orphaned pages]]\n\
| {{{[[Special::Recentchanges|Recentchanges]]}}} || [[Special::Recentchanges|Recentchanges]]\n\
| {{{[[Special::Search|Search]]}}} || [[Special::Search|Search]]\n\
| {{{[[Tagged::Syntax|Syntax pages]]}}} || [[Tagged::Syntax|Syntax pages]]\n\
| {{{[[Tagged::|Tagged pages]]}}} || [[Tagged::|Tagged pages]]\n\
| {{{[[Unlocked::|Unlocked pages]]}}} || [[Unlocked::|Unlocked pages]]\n\
| {{{[[Untagged::|Untagged pages]]}}} || [[Untagged::|Untagged pages]]\n\
|}\n\
\n\
=== Internal link (labeled)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PAGENAME with the page you want to link to and LABEL with the link text:\x3C/div\x3E{{{\n\
[[PAGENAME|LABEL]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a labeled internal link like this one:\x3C/div\x3E\n\
[[WoaS::Help::Index|Click here for the Help index page]]\n\
\n\
=== Internal link (plain)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PAGENAME withe the page you want to link to:\x3C/div\x3E{{{\n\
[[PAGENAME]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a plain internal link like this one:\x3C/div\x3E\n\
[[WoaS::Help::Index]]\n\
\n\
== HTML links\n\
Below are methods for creating links using HTML syntax.\n\
\n\
=== Alert box link (button)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing YOUR MESSAGE GOES HERE with the content for the alert, and YOUR BUTTON TEXT GOES HERE with the text for your button:\x3C/div\x3E{{{\n\
\x3Cscript type="text/javascript"\x3E\n\
function alertme () {alert("YOUR MESSAGE GOES HERE.");}\n\
\x3C/script\x3E\n\
\x3Cinput type=button value="YOUR BUTTON TEXT GOES HERE" onClick="alertme()"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a button that opens an alert.\x3C/div\x3E\n\
\n\
=== Alert box link (labeled)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing YOUR MESSAGE GOES HERE with the content for the alert, and YOUR LINK TEXT GOES HERE with the text for your link:\x3C/div\x3E{{{\n\
\x3Ca href=\'javascript:alert("YOUR MESSAGE GOES HERE");\'\x3EYOUR LINK TEXT GOES HERE\x3C/a\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\n\
\x3Ca href=\'javascript:alert("YOUR MESSAGE GOES HERE");\'\x3EYOUR LINK TEXT GOES HERE\x3C/a\x3E\n\
\n\
=== Anchor links to anywhere on a page\n\
With a combination of HTML and wiki syntax, you can create anchor links to anywhere on a page, rather than just to headers.\n\
\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing NAME with the name of the anchor:\x3C/div\x3E{{{\n\
\x3Ca name="NAME"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3EUse this code somewhere else on the same page, replacing NAME with the anchor name:\x3C/div\x3E{{{\n\
[[#NAME]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create an anchor link to anywhere on a page.\x3C/div\x3E\n\
\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3EOr use this code somewhere else on the same page, replacing NAME with the anchor name and LABEL with the text for the link:\x3C/div\x3E{{{\n\
[[#NAME|LABEL]]\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a labeled anchor link to anywhere on a page.\x3C/div\x3E\n\
\n\
=== Edit page link\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing LINK with the text for your link:\x3C/div\x3E{{{\n\
\x3Ca class="link" onclick="javascript:edit()" title="Edit this page"\x3ELINK\x3C/a\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a link that opens the current page in the editor.\x3C/div\x3E\n\
\n\
=== External link (button)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing YOUR BUTTON TEXT GOES HERE with the text for your button, and URL with the address of the web page:\x3C/div\x3E{{{\n\
\x3Cinput type="button" value="YOUR BUTTON TEXT GOES HERE" onclick="window.open(\'URL\');"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a button that opens an external link in another tab or window.\x3C/div\x3E\n\
\n\
=== Internal link (button)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing BUTTONTEXT with the text you want on the button and PAGENAME with the page you want to link to:\x3C/div\x3E{{{\n\
\x3Cinput value="BUTTONTEXT" onclick="go_to(\'PAGENAME\')" type="submit" /\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a button that opens an internal link in another tab or window.\x3C/div\x3E\n\
\n\
=== Internal link (button - with 5 second delay)\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing BUTTONTEXT with the text you want on the button and PAGENAME with the page you want to link to:\x3C/div\x3E{{{\n\
\x3Cinput type="button" value="BUTTONTEXT" onClick="setTimeout(\'go_to(\\\'PAGENAME\\\')\',5000);"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create a button that opens a wiki page five seconds after you click it.\x3C/div\x3E\n\
',
'= Images\n\
Wiki on a Stick offers various ways of using images in your pages. You can link to local image files on your drive, remote image files, or embed image files into the wiki.\n\
\n\
== Add an external image from the internet\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing URL with the full link to the image:\x3C/div\x3E{{{\n\
\x3Cimg src="URL"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo add an external image from the internet.\x3C/div\x3E\n\
\n\
* *Example:*\x3Cbr\x3E\x3Cbr\x3E\n\
** \x3Cdiv class="woas_helptext"\x3EUse this code:\x3C/div\x3E{{{\n\
\x3Cimg src="http://www.gnu.org/graphics/heckert_gnu.small.png"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\x3Cbr\x3E\x3Cimg src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJEAAACMCAAAAABZ%2BxS6AAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH1AkZAiQF53xPugAAGFFJREFUeNrNXH9MVHe2%2F1QmS1OSaTrJmOUdZnYWybDsBJgSUXgID62BpayUEvz1RMKqhfW39Wmrr2qtGik1UnWFwKoLq0RXKWgJ9EHUrU83UOFJkUgDD3iwYKA7E9hlwmxmdoac98e9M8zcucMPq%2B1%2B%2F5mZ7733ez%2F3fM%2F3nM8553vnJcY%2FWVPMfNgyOm6xAAHBUKnUPzSi8QdfP%2B6xeHQE6mLiU4Oe%2FVbO%2FuG%2FjluhfFWp0s3wdC%2FJz9poXWNbgCFaF6IKETq%2BdT4d6Wl%2FGpixW%2FdMcIZr73bZVa8tBEz%2FMNmhjF2yMnweiNrK7ryamh7rK4%2Fh6ivjv94bOG88fYVNuoz4aKVLFwZ6vmnt1GVsDJY7mX1aczal1TuE7476hzZm7j6TueFM8yQz28oiEm7z%2FJrtpDb3kU%2Fv2PW12k0dvmf7IBrKpxT3LRsTiEJX7VlKQjNm7mvksX20aUiAa5sToPsJK5qZebLjwqal%2B%2B472NZ83iQc6d2jFYfyaJJZc5acC9q%2FEcDjyoWBgXfaXP0Bhk4AStUgCg4q2g%2F1rE8PGf%2FqyjXNjHNlDQIwfryuYK%2Bi6UrfU6FTtajTDuXuzcKSenyw%2F%2FiamfRodFtb%2Bgk1AGS0e66y8BMxn5%2Bwbtmi7KqtW1SqQu2VNgSE9fTMvPLOjq5UPLgWfTwMFUcVqZ2DQOo3w%2BKxRTFme%2FJ2wHmqZPUphV89ehipvy58uyrOk757cmhogpmZJyfFk86PMbNtiHdkzjJd9dpQ7YY%2FMvOxVZcn2HFhRT1PHFmXFJeUJgyuHRDOypz0p0f1%2BoRuZp7ovn8jQkTk0qih1ubmIYfnhRMfaJtn02hjvfAMvZIDjrXC6PmCsuozx%2BT1qGGb7jM1cCdP%2BJlqABa9BYw%2BaOnsmwKAgDBDVFSYCrAP999pmCpOn23RN717Imv612DPoBUIMRgAc4oZAJCs%2BXFyNFo3%2FrwqSEaP2leHfKYGnMmDAIDwuwBgqalrgy42epEmwDzc0%2FX1uOvsRb%2FYMgev0rT%2FtfSfAhifGP22a1xl%2BDHsXf2qNzcaTHZ8e%2FYeACi%2FUqIlb1m5wgfReKrzi2AAJYXC78KNgKXkoj02PdVjRZm7vwXwmvqnyrmZRmtTe78TQEiQ%2BmdRgj0cbbzZnnw0DLiXAwAoOAw0bNty2Eez87UdzMzNemGKI23MNUbtnl5%2BAa17q77IwSyYudAhZq6hRqlm11MZM3dkC3gyL4%2BxbQ%2FlDvALao8S0kx8O4WIiOKuM%2FMm%2FYg3ItviVQ5m3iSsyhFmnsx2WYIX0iY3GHuZO3YSEdEx5rHIXG9Ep7W9zMwrBNDM7Mg0dvCLbI53jEPMQ0REtI6Z613ztkBwxhfzwgBAWGZqAAcHq6NnU9vx4eHh0WcmZqWGAjteFSgFgPTET5wejO2ifQcAjNoBAEqg9kZ12Ezjjd5p6RqcAgDoYt9aJuF9zrtffj1sgea1sPhUlX9IbxYeFZbsIAAcSm14y7367XFZhwHg7CkAUJYsty7LOjwDnq7iO4YlP9colYD9ac%2BXLaqNWzysgbP2VEBWjC4QFnNf%2B734LfH%2Bhml%2Fuy56cxMA1MUA2Gypdq%2F%2BW1oTM%2FMxIiJaMcBcZJz0rwFjW0OPeBmFkdMRxlvuX0%2FSjNen%2FY2tJmGDXwuyJ5sdB4iIjB3MfJ%2BG3Jq9KZeZuUZY%2BWPMptAZltkfIzb4cBpbkXaP%2BAwVoflj3ip8OeKCn6FGQjuY84mIIpiZF1cwMysAWO%2BdAoAoQZY98TgfnOV3xioO798tfLM%2F7jEDqpCohQh87638jEs6wLm%2F9j8LAGC0fdAeHGUAoNiYWNB%2FXDbCCM6qisYwAGgAIFVwqcx8Wys8n5GIiM7z2AwiuqCtF%2BnuplCRH1DKBRvzZLa%2Bnh3vUFzFCNtqMoUji4%2BZmJknM99xyI7WEemwaYmI3mdmvq13%2Bf7jbXUAgG11AJBcVXLxK3%2Fk%2FuLx0nQAzsrKQc9u3bkYOLd9kTHYCSBgZVSl2U328nYrAWtOyG9kx1t2KiALAIrXALD8%2FG44sABAT4wYIgAADKjL8AeoQgB0L%2FmoFyAMvl0LxW%2FfrOsE4nOCmk4tWe06Yi9f9jkQVNX5oTyizp8pAeApAChDuiEiWiR4%2B3sAoNk12rXcD6CGo0fTAeu7OYPSI1O7LgKlGev3pra0Ve8Navhql5vwjG8vsCLoD3UlciMa2pW7AeDsAwAI6xH1iJo9iOx%2FcSP5WfoPQ08yc28cybYLQmxyPyJpYmQr6Y8Zpw8lmZgf6e%2FLxSlp7EggIoocYuYDOwUvMopgAM4yAEDiLzAYLE%2Fo%2B7akHgRa04flBXj0%2BKEAAImXBsuCS4ttF%2FOmjWb%2Fm32IKdwuc2HwX6EoAIAJCwD1qDBrTgQAUJQGAsCwE1Z5cmjeuOgc0LTe6s8ulI8qACB%2BYzWwpgqleR5OZ6MZWalb7D7XBA4DdQDwngGASkQEwd8ZjgLAYDUgKyJr9o8uKdCSb%2FfvXESumToKIPE966BHDD2cY0VhgKx2t7QAiCkAgCCLC5Eg3zU6APhE%2Fpb2HEuVCj15U7PnWRRBAJAX1BLr6QoPQVF%2Bs0nmqhIACBDW%2BbgLkRkAhjMGAWDchKcy1737TaUG5nXWmQjBhLi4VAAQFG72siHVN6Ap3C8lL0%2BDEA8AbW%2F3uboWAIANgDWrCwDwa9nI%2BXjduWhYc8wzUp5vhY8oqxkArIvGvY4e7kHWG7ucktUSAiGmsVg9EAnCDqrSAIB6O4KHfSbuWvnhVGB%2F10x4VMHiY2rKD%2FUBj3uy7nkr4jY7PhqVWKX%2BMASuAbDoZrQHomDh4cIblgFQmhCOdqllPLCxACis8w%2FHcKqts2HUJPyIL%2BmEZdf2WonO9XwIZXlpq1dfd6zzbBmg%2Fmw6T7YAQKCgAKrdAPpTS6JUn3sP1bor8ThwzcfoKjWipkRdalofjIWGBpeKZ3Wt%2Bvf1H1dXnYrxPL%2FqBgzHd3vOpaVt5d1TU4D5PADAFCCuj4WCejTtAgB7w%2FbVlf%2Bh9rKMYeUKNB3wHDxgSXKMQQn0tY0G6cTQEOs%2BTRSp8JXi4uXQAQhshyGk06XP%2B9XL1%2FQXXJtmJjcMOuHel%2FARAMu%2FiF4k%2B6SQoxBMfi5PROR7GPpeY5KJ%2BWHotFMwbqpx%2BxmvrNYB%2FWUHM%2FMto4s2DtFOZh6pyRcGj%2Bhl3jrNTCYiG8VohOgWM%2B9MEznkzk3M%2FLdc8Z4HmK%2FTBQ9AxgHmh0Koq82%2FNeDNdE578ckLEQlnupn3nHf36K8KnwNbiYgowcSOd3Jdz7N1FbONiCjz6ggz86p8EVHZYiGou72BiOgMMx8g15hXIxIGmG%2FriYi0B3zo7FXy7po4n0lJ109nuyWXvcf17Vao6HQdW5OamZkdB4xDzJN6F2FjjigSEd2nvwiQVhARFU0yO%2FZR%2FgAz966jXBNzhZaIaJM05h5ZG0nkItUdpyf4PjPz2OWE3D1J3S4cIudkl5yTBpgvaNddbr6QkNTLlzO103mqAWoUEU1oa5iZeYeY%2Blp1nbnGSCnZCWSsYR7LJyIy1nvDKVuXnUBERrd0QkPjSMBs23Tm9CZmnixad5Ivh7ovvC3oUj1z774Vcbm%2FszFHiloUaWLmy9oJV0brzbBzAK4cdFuXJsBa12kLNqwMRO3RcQDJ57xDwcKS4KgmAKs%2FdfXcK38AMSi49iC8%2Fxwsq%2FqBm7FN22pd1u%2BTc4K92p7s4hOvCzY1JyxWBax23nTFa2f0NmbuuHUyQZTS9AJqFnKGJyUT1kgJk%2FeJiFo9Oov2pDEzPyky7otoZT5JRGttzEdS3Asz0xUrdDBz75MxQWoUMSGsy%2BvueE38ziYxeUQdbOplZu4VszcfSDXaSI3cLOYQPEPCDma2%2FW7Ph93MtgiitQ5mHiGTO1nuym%2Fqn3Cvnkg0OFTEzHwkwjadG9mQJgzosjiRWqLzzA9FZpotjW0ekZG5mcgoptp7mzsczMwD%2BzwIKxHVDzEzR0wLst5t0zqSPBhxqInZFHqaXREkkJfXEg88rnazdQCFwSEbBYesPKeQRpGIBwYRXq4Bxq81DauUPbG%2FB6BzDrodVCcQcOPO3w%2Fq8Oq0w09PFz2N2SOtmpcOAGcDt3jmIVNfuQk0dcF5zsNTvCwyhFPrJUW3SFVpPMzvxhco4Lz0ID05GLAmn0gF8PjEJRe9PngFsTeB9hjEF08nI4aX%2BXI%2B9X8rgcF%2FO7xlmh8Bh9o%2BB1L37m3zjHhEQDESQPjy1ep44JWq7QqM1yZXrQ8GEJR6BQCix4%2B7zrIBGQBiYJ%2FwSJxoVkrxpGdoKgB8qMnzYqKJ6SeWK4HKFgSbpA9xUPL7QVWdDiIbV7mLGppaIensJkVB2PUrIQ7WGDyuTpUyW4Fi1951OWBRRjhhPQDg9ZanbVLe%2F4Z3%2Fsf%2Bub1apujntFnGAWDjqItnqpAIy73q6os3yj1PTPa%2Bbr%2B6FQDMR1cnSqqi6hO7EtcjGuiyBOm8uOJeya3fmubSACztw%2F1f9kMzMoWm9QDiU1tFnV2Ee2X3pgAEPvB8goWG6dFDnuJX6QcBOHcGfuTFswEgK%2BdoDwC0aOpygAD3VfGSdKQgQpe%2BFb%2Bec%2FBiPzD8clT8RQsAHG1xGX6U3J0CAPvBG54DrHbLECd0OmVYqRMoaSlX%2BiDC4UV5ZgABDeExwHvu7gJZFuviptVuSl5YXdcHAJoYcdrCFgX8qQAA3gio9rx0jRqAUoOjyoD4gwZArcDnpz6KkatmjSxeJRAXh36fLZQWbyCtlhLkUwCu5HOctugvJhetcrEA16f2SBwRUe%2FJOAmDIaLr1NyYxtwscMUjfqpZT%2FSZQiktd4zXhnbk0wdE5%2BXz46vELxsSJnlCS0S0j1nKVs5rQ4mI%2FsLeaUDOJqJHW5td0Cu0Bxz%2B6rQP9UkDzMxjzOevc3ZKPWnHZBE1u2Q0ZNzk4GNEpH%2FEvT4p%2BVwioiOOh42SUrCeqGLsichidtDpGSrHHcZIkc1MMm%2FoPUm58pN2%2BkP36Gmrmrlm37FudhxzdEtOm4hb1dzdmhD5RNJfQ7RTZAPXjYtvz1jLHkmjrS7hP%2BFsqpFHlFkxnYr9XULmmVvNzVfXPuQyH1lqUyIpdKfP9TsodIKZe88sDT0yMXMtG85zZxUZecKKd4ajUzZPMhpb5xmIDbYPDr8cnq525lVJzywsMSS%2FuaZTmkW0b2vK0nV1jqrXyNQNffAP7NFSSlGzjbmDNsiL6DxNyHUXnfStx6QcY15R79ufRpTy4X25DC7kEt9FSUTalK25VCFf9lkcKbf%2BLlyWucEjbTefXOe7VaGe%2FNXuIN89cHnnCi3RkOzB65Qy96rVgTRuJqMPWBM9mh8iZmbHUqN80TyOsueOaCziqk2fHbpCahq0ZX4uWDBDykzzsmx%2F2fB86miqguP2jNgmZUald3%2F0FX%2FZsRkeLztOtuwbmrQvYR7FxonQottJ7CjTrmr1yhtrEzasG5vfrHGaHKLJFdT8RGubB6QP9A9pgvlJGqVd8ChsNa6NoxvzQzSgTZPp3UofMKfcnweiAe0mGmJmR022loxF04bjDD2ROd3%2FPjbngalE397CuvDDQE5dop%2FNYXXtFqjDohI9bKJuzTWYNYAiK8veXVdetT4%2B%2BBUAPbV1bxvmpUf7KNe3GnFBCNEcv5QtVAzla8mYnZ0ZSUZP92OK9Mj%2BjLzvKk8sPeOY1%2BpvpiTfC4pIzFV1nJStlunPCPsInuyg%2FAlP95Y0ycwD9YL62YaGhoaGxuZrj4roso9Sb6UVLtWsMflesiL04bTeRsR5%2BI5G%2FdI9G4xESU9mVzu%2FiPaISSUPESTQhunJ8jW5j%2Bjk7RUUeUQQ7cg6yp42%2BU%2ByKWLD1asrZt2zNAOiVUkSs39AS%2BSYaagKOqKNKLp%2F%2FoJ7z2CoVMyTmRueGVENbfX82ft%2BKOmJZhzqDBFdFciey51G7pM8w%2FXQWS2Z%2FOq3FpfDHa3au1oaOhG0%2FfWNM%2FuLMAA6wNz8j4AYIUJLX5KzrdTrDgZ796ybP2RXcRJliia%2F%2BViKlogijph4bJZZm4yI1E9wt56IaIe4kib3ZXpR3SF%2FrHRmGdlz%2Bt8UHq1vVycQaFiyLDEQUKnGB2faTBK0vaE6CHesgNJ%2Bs%2FMzNQAEneq6FpzjSURn3foih%2BhG%2F%2FpCBQB05ZgRMPWeK4gMb2mXIrKWjGqiXOmOgm4AMQBif3O6cmeVMLRBYpftsyGSYyNNykJFz5UGc2WWeXtnNFTTitLic%2Bq5mAx3%2FkXx6d%2BB%2BO0BiFF%2BVNpyRe52TxH8LDJqD%2F9ToZAuKDgIj5Ka2lVB88gxpXqqu0IN4OB2uxpI33vpV7LRefizyGiqPac7Jt0ApL83XTMFAPxYemrGJcAyLJaDRAqmVAPA9qB2mT1UleqoZ5HR0XNRB3XAOFQArJ6IfEQeCCCw88ZUeRDQN%2BiZP1Ns7orxMSqbzccVeJbV79mI3Ib%2FtCQe9iBlW5kn3pEYA5%2BUwWQmveOY1WYvmJ0pB06njhr8UOzDX9%2FBjbckxkCaiRvPa8sonV1Ec5CR21%2F26knrx8DdSrD5sKm%2FSSK0SDo2F8q5YB5hRVhP3tQd%2BUNvBZVZpAH5q167bzYX2M8dnstd5oMISIbFz5FtxTPtZ3%2F87r81RdVm4TkhMns6U38bjtM1fo3x4NnUjM6VWGSY42PPNq168iBZk5Tv77zr5IeMTTR3jDDz%2B1Q2t9BlVkRx5JnZCE3wt3wdCQkzrmxHLuVPPhfNVnvOGkIG179bIW9qTwyem9EU%2F%2F7ivW3PRY9C4LlFLBot1Ycvymt9%2BtkZd3HgF6vvmp8HojAMeJrChvK34UcWhaqC8Zk3tMP5PDS7niTpKxuRH658X%2FKehUTDT2vnlHZ6abY36kZj0ebtYGNHdRrd5jDZ%2FaRRpV6%2Bw9TS1j%2FyD7yiekXV%2F3hKPfN%2BZtl3auRa3NMSb49V8bEVSL0kd%2B6VQ0hPjl4kMOKulpZ%2BL5N1Yk7v5M2O6EBVzse%2BKdjkKvkNzoUtADRqmEemAJ1BFwiYx0dHR1GQp5mbgZwd0YP1IV9JncIWU%2FUSfxb6TkvfUztUi6Jfj1%2Fo7i0u%2FkaJ52Sz2RFJ0lz%2BYj%2FlEv%2Btkeb81sDsfk2xGo1SbUc65tdC8Pe5njoHT7sR1ZIeHbrwwtocEOneGLwnKd3iUNv8btMH9XNEhB2QuLItKvPbb5fU9s0d0V1l2FxPnQPvRWzi3S4vcqOpvtjX2QaIoa%2FfZjGZLRYgJHj4Tuqcwb80l7ege1L%2B9Zq0rysVwJu%2F9ePB%2Bga%2FGex7Op1DV36he54yQnjepTvSvQxKAPiiMk%2FGILV1edCF4Kjw4JdfiVc9XxnBujLgrrRGdm10vNai%2FhoQXwoV29k%2FeEVQlSvnvdjmZrbuaz%2BU6b0tZN0ca23eoaOWKKVxcuBqxNzioXmyWnc8%2B0eZUJaWMrNtK4149%2FeeueVgZo7Q214cIs6NGJF2lRGdZMfpCAqVv8REK%2FgFIppMSpuU5uApcoLfF194k8330jO8JDjnCDLoM4tkc%2FUVIEOJmwCGK%2FpqD8kw1uLA48%2FgRuZRAzJ%2BIKkK0C9drwYJ71d6MgZR%2B7pfnIwAXXVTsZcvUePrQ04xZ5Yq4WOjrQCQjgcvwtNOhyXXPvd0cKrKIFRmBcqkHQDgawB4xW%2Be4DllIsI%2Bq%2FbMd0bfCEb7XWGz0og0Bdot7PcLebGIoK5ubfCEdDcdAHbrgHuSXFejAmY8PqRc%2FiI1W6x%2B1EvzVJRiMhKleW2T6NBeHtl0W0%2F1L9AeTVPmL73N4Fqixhryrp09MmoHMiN89iu%2FIEQ85L3QHb%2BktY4EItKeFMU0cUxLS%2BOI9kw8AyB%2B6bv%2FS8zmpqCe1tVTAALLVwKWi8IWu4DS9GcabsF3xeMsb0IUlpQGALBbgTvLioUVH%2FZsgL4zohvxxxF4CEivBICFaN3syo%2F0dP0giB7vHVWtvhsNCBGUBcXTe2D3O38IRP%2BL452f6gBcqxMKMX%2BePta5zfkDIHodQvHDIjj5WqtnLeeLjHY4HwNm5%2FeIKGyvsOX4mgVRAMzv%2FtrzaGdGiO4U%2BioU36dm7xp%2FDAAPsP09APjiE0l5Sbm%2FeP3GeY2o%2BI6IFL9pFWKl%2FaMBUwB6pEFUlvMPwd%2BvPcISAMiCRbNb7uhTZ2n8%2FMYLOPpcEhqhE08SYv%2FPLSCl0%2BUK1JeXf79rzd0%2BUvUpTi2D8CcTUNWJeYLEuiXzHek5yQiICfzRjzL%2F3I31if%2FD%2BNtPihe0TwGa5d0tpp%2FOT1dfer7%2Fx1b5ifXjZdX3Hk%2B9sUP35TfDdvXPlhnmOcRzRoTx2i7N%2BmDnoPnpT5Y82wgv%2FdP9Z92CfzZA%2BH8h6HFxmnJRXwAAAABJRU5ErkJggg%3D%3D"\x3E\n\
\n\
== Add a local image from your hard drive\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing PATH with the full path to the local file you\'d like to display:\x3C/div\x3E{{{\n\
\x3Cimg src="file://PATH"\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo add a local image from your hard drive.\x3C/div\x3E\n\
\n\
* *Linux example using a default Kubuntu image:*\x3Cbr\x3E{{{\n\
\x3Cimg src="file:///usr/share/icons/default.kde/16x16/actions/stop.png"\x3E\n\
}}}\x3Cbr\x3E\n\
* *Windows example using a default Windows 7 image:*\x3Cbr\x3E{{{\n\
\x3Cimg src="file://localhost/C:/Documents and Settings/All Users/Documents/My Pictures/Sample Pictures/Blue hills.jpg"\x3E\n\
}}}\n\
\n\
== Embed an image in the wiki\n\
This wiki provides an interface for embedding images. Each image will be given its own page, which you can use in an include link to insert the image anywhere in this wiki.\n\
\n\
[[Include::WoaS::Template::Info|Embedded images are encoded with Base64 and are 33% bigger than the original files. Since this wiki is a single file, excessive use of images will slow down performance.]]\n\
\n\
*Note:* It is better to keep the extension in the image name because this could be used on some browsers to infer the mime type of the image\n\
\n\
\x3Cspan class="woas_helptext"\x3E*Replace NAME in these instructions with the name of your image:*\x3C/span\x3E\n\
\n\
=== From the menu\n\
# Click the *New Page* link in the menu.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type {{{Image::NAME}}} into the box that comes up. This will bring up the image embedding interface.\x3Cbr\x3E\x3Cbr\x3E\n\
# Browse to the image on your computer.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Embed* button.\n\
\n\
=== From any page\n\
# Create an include link for a new image by typing {{{[[Include::Image::NAME]]}}} into a page, or click the editor\'s *Image* button and type in a name for the image.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Save* icon in the navigation bar to save the page.\x3Cbr\x3E\x3Cbr\x3E\n\
# Part of the include link you just created will be red, indicating that the image doesn\'t exist yet.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click on the red part of the link to launch the embedding interface.\x3Cbr\x3E\x3Cbr\x3E\n\
# Browse to the image you\'d like to embed.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Embed* button. You\'ll be taken to the *Image::NAME* page with your image embedded in it.\x3Cbr\x3E\x3Cbr\x3E\n\
\n\
== Use an embedded image\n\
Once an image is embedded, you can use the same include link you used to add the embedded image to include the image anywhere in the wiki. \n\
# Create a new page or open an existing page in the editor by clicking the *Edit* icon in the navigation bar.\x3Cbr\x3E\x3Cbr\x3E\n\
# Create an include link for an already embedded image. There are two ways you can do this:\x3Cbr\x3E\x3Cbr\x3E\n\
## Use this code wherever you like:\x3Cpre\x3E[\\\n\
[In\\\n\
clude::Image::N\\\n\
AME]\\\n\
]\x3C/pre\x3E\n\
## Or click the editor\'s *Image* button and type in the name of the image.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Save* icon in the navigation bar to save the page. The image should now be where the include link was.\n\
\n\
== Use a data:URI image\n\
\n\
It is always better and advisable to embed an image instead of using a data:URI image, mostly because embedded images can be reused inside the wiki and do not garble the edit window when editing the page.\n\
\n\
However if you want to use anyway a data:URI image you can do it by directly adding the XHTML snippet:\n\
\n\
{{{\x3Cimg src="data:image/EXTENSION;ENCODING,ENCODED_IMAGE"\x3E}}}\n\
\n\
\x3Cdiv class="woas_help_text"\x3EExample:\x3C/div\x3E\n\
{{{\x3Cimg src="data:image/png;base64,R0lGODlhBgAFAIABAAAAAP///yH5BAEAAAEALAAAAAAGAAUAAAIJDGJ4ic1qgAwFADs="\x3E}}}\n\
\x3Cdiv class="woas_helptext"\x3EResult:\x3C/div\x3E\x3Cimg src="data:image/png;base64,R0lGODlhBgAFAIABAAAAAP///yH5BAEAAAEALAAAAAAGAAUAAAIJDGJ4ic1qgAwFADs="\x3E\n\
\n\
A famous online service to create such URIs is [[http://software.hixie.ch/utilities/cgi/data/data|The data: URI kitchen]]. The best encoding to be used in WoaS is base64.\n\
\n\
== Create a data:URI image button\n\
\x3Cdiv class="woas_helptext"\x3EUse this code in a page, replacing YOUR_MESSAGE with the message to be displayed and DATA_URI_GOES_HERE with the data:URI of your image:\x3C/div\x3E{{{\x3Cinput type="image" onclick=\'alert("YOUR_MESSAGE")\' src="DATA_URI_GOES_HERE"\x3E}}}\n\
\n\
* *Example:*\x3Cbr\x3E\x3Cbr\x3E\n\
** \x3Cdiv class="woas_helptext"\x3EUse this example code:\x3C/div\x3E{{{\n\
\x3Cinput type="image" onclick=\'alert("THIS IS AN ALERT!")\' src="data:image/png;base64,R0lGODlhBgAFAIABAAAAAP///yH5BAEAAAEALAAAAAAGAAUAAAIJDGJ4ic1qgAwFADs="\x3E\n\
}}}\x3Cbr\x3E\x3Cdiv class="woas_helptext"\x3ETo create this:\x3C/div\x3E\x3Cinput type="image" onclick=\'alert("THIS IS AN ALERT!")\' src="data:image/png;base64,R0lGODlhBgAFAIABAAAAAP///yH5BAEAAAEALAAAAAAGAAUAAAIJDGJ4ic1qgAwFADs="\x3E\n\
',
'= Import\n\
\n\
== Import wiki\n\
An older Wiki on a Stick can be imported in the current wiki by using the *Special::Import* page.\n\
# Click the *Advanced* icon in the banner.\n\
# Scroll down to the *Maintenance* section.\n\
# Click the [[Special::Import]] link.\n\
# Click the *Browse* button\n\
# Select the wiki you\'d like to import.\n\
# Click the *Open* button.\n\
# Choose the settings you\'d like to use.\x3Cbr\x3E[[Include::Image::alert.png]] /Note that it\'s usually best to leave the *import also CSS (available only for versions v0.9 and above)* box unchecked and manually transfer CSS settings so you can make sure there\'s no conflict./\n\
# Click the *Import* button.\n\
# A warning will pop up letting you know that this will overwrite pages with the same title, and asking if you\'re sure.\n\
# Click the *OK* button if you\'re sure. Otherwise, click the *Cancel* button.\n\
\n\
== Import WSIF\n\
This method is used to import pages that have been exported using the [[WoaS::Help::WSIF|WSIF]] format.\n\
# Click the *Advanced* icon in the banner.\n\
# Scroll down to the *Maintenance* section.\n\
# Click the [[Special::ImportWSIF]] link.\n\
# Click the *Browse* button.\n\
# Select the .wsif file you\'d like to import.\n\
# Click the *Open* button.\n\
# Choose the options you\'d like to use.\n\
# Click the *Import WSIF* button.\n\
',
'\x3Cinput id="menu_string_to_search" type="text" size="6" onfocus="menu_search_focus(true)" onblur="menu_search_focus(false)" /\x3E&nbsp;\x3Cinput style="font-size: 10px;" type="button" value="Search" onclick="menu_do_search()" /\x3E\n\
\n\
\x3Cscript\x3E\n\
function menu_key_hook(orig_e) {\n\
    var e;\n\
    if (!orig_e)\n\
        e = window.event;\n\
    else\n\
        e = orig_e;\n\
	\n\
    if (e.keyCode==13) {\n\
	ff_fix_focus();\n\
	_raw_do_search($(\'menu_string_to_search\').value);\n\
        return false;\n\
     }\n\
     return orig_e;\n\
}\n\
\n\
$(\'menu_string_to_search\').onkeydown = menu_key_hook;\n\
\x3C/script\x3E\n\
',
'= Export\n\
You can export this wiki into multiple linked XHTML, CSS, and image files which will create a framed web page.\n\
\n\
# Click the *Advanced* icon in the banner.\x3Cbr\x3E\x3Cbr\x3E\n\
# Scroll down to the *Maintenance* section.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Special::Export* link.\x3Cbr\x3E\x3Cbr\x3E\n\
# Choose the directory to export the wiki to.\x3Cbr\x3E\x3Cbr\x3E\n\
# Choose the settings for the export.\x3Cbr\x3E\x3Cbr\x3E[[Include::WoaS::Template::Info|Note that the "Run before exporting but do not export the javascript" option means that JavaScript is run and then the XHTML is exported, but the JavaScript is not. This is useful if you have JavaScript that does custom parsing.]]\x3Cbr\x3E\n\
# Click the *Export XHTML* button. A confirmation will pop up.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *index.htm* file in the export directory to launch the framed page.\n\
\n\
== ExportWSIF\n\
# Click the *Advanced* icon in the banner.\x3Cbr\x3E\x3Cbr\x3E\n\
# Scroll down to the *Maintenance* section.\x3Cbr\x3E\x3Cbr\x3E\n\
# Click the *Special::ExportWSIF* link.\x3Cbr\x3E\x3Cbr\x3E\n\
# Choose the directory to export the WSIF file(s) to.\x3Cbr\x3E\x3Cbr\x3E\n\
# Choose the settings for the export.\x3Cbr\x3E\x3Cbr\x3E[[Include::WoaS::Template::Info|Note that you can export into a single WSIF file or multiple WSIF files. Embedded files are exported as individual files unless you choose not to export them as external file blogs, in which case they\'ll be embedded in the WSIF file(s).]]\x3Cbr\x3E\n\
# Click the *Export WSIF* button. A confirmation will pop up, telling you how many pages were exported.\x3Cbr\x3E\x3Cbr\x3E\n\
# The WSIF file(s) in the export directory can now be copied, shared, or stored for backup purposes.\n\
',
'\x3Cbig style="color:lime"\x3E%1 had a little %2\x3C/big\x3E',
'= Transclusion\n\
Transclusion is a special way of [[WoaS::Help::Include wiki page|including]] a wiki page in another wiki page. Instead of just displaying the contents of the included page as is, you can change how the content is displayed depending on how you write the link.\n\
\n\
This method requires that you create a page to be used as a template. This page must contain variables represented by %1, %2, %3, and so on.\n\
\n\
You can then create a transclusion link or links to that page by creating a normal [[WoaS::Help::Include wiki page|include link]] with the values for the variables added after the page name. Each value must be preceded by a pipe ({{{|value}}}). The values you define in the link will be used from left to right to replace the numbered variables on the page you\'re including.\n\
\n\
\x3Cdiv class="helptext"\x3EUse this code, replacing PAGENAME with the name of the page to be included, and VALUE1 and VALUE2 with the values you\'d like the two variables to have when the included page is displayed:\x3C/div\x3E\n\
\x3Cdiv class="helpcode"\x3E[\x3C!-- --\x3E[Include::PAGENAME|VALUE1|VALUE2|VALUE3]\x3C!-- --\x3E]\x3C/div\x3E\n\
== Examples\n\
These examples use the [[WoaS::Template::Example::Transclusion]] page which contains two variables. The contents of that page are:\n\
{{{\n\
\x3Cbig style="color:lime"\x3E%1 had a little %2\x3C/big\x3E\n\
}}}\n\
\n\
\x3Cdiv class="helptext"\x3EUse this code:\x3C/div\x3E\n\
\x3Cdiv class="helpcode"\x3E[\x3C!-- --\x3E[Include::WoaS::Template::Example::Transclusion|Mary|lamb]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="helptext"\x3ETo create this:\x3C/div\x3E\n\
[[Include::WoaS::Template::Example::Transclusion|Mary|lamb]]\n\
\n\
\x3Cdiv class="helptext"\x3EOr use this code:\x3C/div\x3E\n\
\x3Cdiv class="helpcode"\x3E[\x3C!-- --\x3E[Include::WoaS::Template::Example::Transclusion|Fred|snack]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="helptext"\x3ETo create this:\x3C/div\x3E\n\
[[Include::WoaS::Template::Example::Transclusion|Fred|snack]]\n\
\n\
\x3Cdiv class="helptext"\x3EOr use this code:\x3C/div\x3E\n\
\x3Cdiv class="helpcode"\x3E[\x3C!-- --\x3E[Include::WoaS::Template::Example::Transclusion|Bob|Jane|Jack]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="helptext"\x3ETo create this:\x3C/div\x3E\n\
[[Include::WoaS::Template::Example::Transclusion|Bob|Jane|Jack]]\n\
== Wiki and HTML code in transclusion\n\
Some wiki code and HTML tags are accepted in the values.\n\
\n\
\x3Cdiv class="helptext"\x3EUse this code:\x3C/div\x3E\n\
\x3Cdiv class="helpcode"\x3E[\x3C!-- --\x3E[Include::WoaS::Template::Example::Transclusion|&#042;Mary&#042;|&#042;lamb&#042;.&lt;br&gt;&lt;br&gt;Its &#047;fleece&#047; was white as &#095;snow&#095;.]\x3C!-- --\x3E]\x3C/div\x3E\n\
\x3Cdiv class="helptext"\x3ETo create this:\x3C/div\x3E\n\
[[Include::WoaS::Template::Example::Transclusion|*Mary*|*lamb*.\x3Cbr\x3E\x3Cbr\x3EIts /fleece/ was white as _snow_.]]\n\
\n\
== Infinite recursion\n\
Infinite recursion happens when you create an [[WoaS::Help::Include wiki page|include link]] to the current page or to another page that that has an [[WoaS::Help::Include wiki page|include link]] to the current page. The included page will be repeated multiple times followed by the include link itself being displayed in bold red text surrounded by infinity symbols like this:\n\
\n\
\x3Cfont color="red"\x3E*{{{\u221e [[Include::PAGENAME]] \u221e}}}*\x3C/font\x3E\n\
\n\
To see infinite recursion in action, create a page named *Infinite recursion* and paste this content into it:\n\
{{{\n\
[[Include::WoaS::Template::Example::Transclusion|Mary|lamb.]]\n\
[[Include::Infinite recursion]]\n\
}}}\n\
',
'[[Include::WoaS::Help::WSIF]]\n\
',
'[[Include::WoaS::Help::WSIF]]\n\
',
'[[Special::TOC]]\n\
[[Include::WoaS::Template::Info|This guide is deprecated.]]\n\
= WoaS Developer Guide\n\
Welcome, developers, to the Wiki on a Stick (WoaS) community! Any help you can offer is heartily welcomed. If coding isn\'t your thing, you can dive into the forums, make some feature requests, and report any bugs you find by using the links above. If you\'re a coder, read on.\n\
\n\
== Useful links\n\
The WoaS community offers various places you can visit to see what\'s already being done, get an idea of how and where you can help, and keep in touch with others:\n\
* [[http://sourceforge.net/tracker/?words=tracker_browse&sort=open_date&sortdir=desc&offset=0&group_id=155218&atid=794925&assignee=&status=&category=&artgroup=&keyword=&submitter=&artifact_id=|WoaS bug tracker]]\n\
* [[http://woas.iragan.com/viewtopic.php?id=217|WoaS development IRC channel]] on the [[http://freenode.net/irc_servers.shtml|freenode IRC server]]\n\
* [[https://lists.sourceforge.net/lists/listinfo/stickwiki-devel|WoaS development mailing list]]\n\
* [[http://sourceforge.net/tracker/?atid=794928&group_id=155218&func=browse|WoaS feature requests]]\n\
* [[http://woas.iragan.com/index.php|WoaS forums]]\n\
* [[http://cia.vc/stats/project/stickwiki|WoaS Subversion logs]]\n\
\n\
== Contributing code\n\
WoaS uses [[http://subversion.apache.org/|Subversion]] for version control. You\'ll need a [[http://sourceforge.net/|SourceForge]] account so you can log into the WoaS Subversion server. If you don\'t already have one, please create one now. You\'ll also need to be added to the Subversion server by Daniele. Contact him in the [[http://woas.iragan.com/index.php|WoaS forums]] or by [[mailto://legolas558 _AT_ users.sourceforge.net|email]] to let him know you\'d like to be a developer. He will give you the path to your development [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]].\n\
\n\
== Reference tables\n\
These are some terms that will often be used when working with Subversion:\n\
\n\
{|\n\
|+ \x3Cdiv style="background-color:lightblue; border-top:2px solid black; border-right:2px solid black; border-left:2px solid black;"\x3EGLOSSARY\x3C/div\x3E\n\
| *BRANCH* || Your personal directory on the server.\n\
| *HEAD* || Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.\n\
| *REV* || A revision number (example: 32).\n\
| *SOURCE* || URL or file name.\n\
| *TRUNK* || The main project directory on the server.\n\
| *URL* || A server path to TRUNK or a BRANCH.\n\
| *WORKINGCOPY* || A local directory on your computer where you keep your copy.\n\
|}\n\
\n\
These are the paths you\'ll be using. Please edit the table, replacing *USERNAME* with your [[http://sourceforge.net/|SourceForge]] user name, replacing *{{{/PATH/ON/YOUR/COMPUTER}}}* with the path to the local directory you will be using to do your development work:\n\
\n\
\n\
{|\n\
|+ \x3Cdiv style="background-color:lightblue; border-top:2px solid black; border-right:2px solid black; border-left:2px solid black;"\x3EPATH REFERENCE TABLE\x3C/div\x3E\n\
| *TRUNK * || [[https://stickwiki.svn.sourceforge.net/svnroot/stickwiki/trunk]]\n\
| *BRANCH* || [[https://stickwiki.svn.sourceforge.net/svnroot/stickwiki/branches/USERNAME]]\n\
| *WORKINGCOPY* || {{{/PATH/ON/YOUR/COMPUTER}}}\n\
|}\n\
\n\
These are codes Subversion will use to let you know what it\'s doing when you issue a command:\n\
\n\
\n\
{|\n\
|+ \x3Cdiv style="background-color:lightblue; border-top:2px solid black; border-right:2px solid black; border-left:2px solid black;"\x3E*COMMON STATUS CODES*\x3C/div\x3E\n\
| *CODE* || *WHAT IT MEANS*\n\
| *A* || Item was added.\n\
| *C* || Item conflicts with updates from the repository.\n\
| *D* || Item was deleted.\n\
| *G* || Item was merged.\n\
| *M* || Item has been modified.\n\
| *R* || Item was replaced.\n\
| *U* || Item was updated.\n\
| *?* || Item is unknown and is not under version control.\n\
| *!* || Item is missing or incomplete.\n\
|}\n\
\n\
== Setup\n\
# Create the local directory you\'d like to use as your WORKINGCOPY.\x3Cbr\x3E\x3Cbr\x3E\n\
# Edit the *{{{PATH REFERENCE TABLE}}}* above with your information.\x3Cbr\x3E\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3EUse the paths you put in the *{{{PATH REFERENCE TABLE}}}* for all the commands in this guide.\x3C/div\x3E\x3Cbr\x3E\n\
# Copy TRUNK to BRANCH:\x3Cbr\x3E{{{\n\
svn copy TRUNK BRANCH\n\
}}}\x3Cbr\x3E\n\
# Check out BRANCH to create a local WORKINGCOPY:\x3Cbr\x3E{{{\n\
svn co BRANCH WORKINGCOPY\n\
}}}\n\
\n\
== Make initial changes\n\
# If you\'ve already edited a copy of WoaS, you can copy your file(s) over those in WORKINGCOPY, overwriting them.\x3Cbr\x3E\x3Cbr\x3E\n\
# Compare WORKINGCOPY with HEAD line by line:\x3Cbr\x3E{{{\n\
svn diff WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Check the status of WORKINGCOPY (display your changes):\x3Cbr\x3E{{{\n\
svn status WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Commit initial changes to BRANCH, providing your SourceForge password when asked:\x3Cbr\x3E{{{\n\
svn commit WORKINGCOPY\n\
}}}\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3ESubversion caches your password on your hard drive so you don\'t have to enter it manually again. If you don\'t wish it to do this, see [[http://svnbook.red-bean.com/en/1.5/svn-book.html#svn.serverconfig.netmodel.credcache]].\x3C/div\x3E\x3Cbr\x3E\n\
# List the changes in the editor that pops up, *beginning each line with an asterisk followed by a space*. If the initial commit comment is very long (for instance, if you overwrote files in the WORKINGCOPY with ones you\'d already made changes to), just write: *{{{* Initial commit.}}}*\n\
\n\
== Standard routine\n\
This is intended as a general reference. You may or may not need all the steps in this section in your standard routine, and you don\'t necessarily need to do them in the order shown.\n\
\n\
=== Check for updates\n\
* Check the status of WORKINGCOPY (display full revision information on all items):\x3Cbr\x3E{{{\n\
svn status -v WORKINGCOPY\n\
}}}\x3Cbr\x3E\x3Ctable border="1" cellpadding="7"\x3E\x3Ctr\x3E\x3Ctd align="center" bgcolor="lightblue" colspan="5"\x3E*What the status columns mean*\x3C/td\x3E\x3C/tr\x3E\x3Ctr\x3E\x3Ctd\x3Estatus codes\x3C/td\x3E\x3Ctd\x3Eworking copy revision\x3C/td\x3E\x3Ctd\x3Ethe revision in which it changed\x3C/td\x3E\x3Ctd\x3Ewho changed it\x3C/td\x3E\x3Ctd\x3Efile name\x3C/td\x3E\x3C/tr\x3E\x3C/table\x3E\x3Cbr\x3E\n\
* Check the status of WORKINGCOPY (display updated files):\x3Cbr\x3E{{{\n\
svn status -u WORKINGCOPY\n\
}}}\x3Cbr\x3E/Files that have been updated will have an asterisk next to them./\n\
\n\
=== Update your copy\n\
* Update HEAD with latest revision:\x3Cbr\x3E{{{\n\
svn update WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
* Update HEAD with a *specific* revision:\x3Cbr\x3E{{{\n\
svn update -rREV WORKINGCOPY\n\
}}}\n\
\n\
=== Resolve conflicted files\n\
* If you have conflicts, Subversion will create some extra files in your WORKINGCOPY:\x3Cbr\x3E{{{\n\
FILENAME\n\
FILENAME.mine\n\
FILENAME.rREV\n\
FILENAME.rREV\n\
}}}\x3Cbr\x3E/These are the conflicted file, your file before you updated, and the two revisions that are in conflict./\x3Cbr\x3E\x3Cbr\x3E\n\
* Examine the conflicted file (the one *without* a .mine or .rREV extension):\x3Cbr\x3E{{{\n\
svn cat FILENAME\n\
}}}\x3Cbr\x3E\n\
* Find sections between triple angled brackets like this:\x3Cbr\x3E{{{\n\
\x3C\x3C\x3C\x3C\x3C\x3C\x3C .mine\n\
CONTENT\n\
\x3E\x3E\x3E\x3E\x3E\x3E\x3E .r2\n\
}}}\x3Cbr\x3E\n\
* For each section you find, decide whether to keep, change, or get rid of the content inside the brackets.\x3Cbr\x3E\x3Cbr\x3E\n\
* Remove the angled bracket lines around each conflicted section you\'ve fixed.\x3Cbr\x3E\x3Cbr\x3E\n\
* Type this command once all conflicted sections have been resolved:\x3Cbr\x3E{{{\n\
svn resolved\n\
}}}\x3Cbr\x3E/Subversion will clean up the files with the .mine and .rREV extensions for you./\x3Cbr\x3E\x3Cbr\x3E\n\
\n\
=== Make your changes\n\
* Make whatever changes you like to the files in WORKINGCOPY by working normally.\n\
\n\
=== Tell Subversion about your changes\n\
* Add a directory:\x3Cbr\x3E{{{\n\
svn mkdir DIRECTORYNAME\n\
}}}\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3EIf you added the directory with an ordinary shell command or by using a file manager, use {{{svn add DIRECTORYNAME}}} instead.\x3C/div\x3E\x3Cbr\x3E\n\
* Add a file:\x3Cbr\x3E{{{\n\
svn add FILENAME\n\
}}}\x3Cbr\x3E\n\
* Change or overwrite a file:\x3Cbr\x3E{{{\n\
NO SVN COMMAND IS NEEDED FOR THIS\n\
}}}\x3Cbr\x3E\n\
* Copy a file:\x3Cbr\x3E{{{\n\
svn cp SOURCE DESTINATION\n\
}}}\x3Cbr\x3E\n\
* Delete a file:\x3Cbr\x3E{{{\n\
svn rm FILENAME\n\
}}}\x3Cbr\x3E\n\
* Move a file:\x3Cbr\x3E{{{\n\
svn mv SOURCE DESTINATION\n\
}}}\n\
\n\
=== Examine your changes\n\
* Check the logs of BRANCH, showing its ancestry:\x3Cbr\x3E{{{\n\
svn log -v WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
* Check the logs of BRANCH, showing its ancestry since you copied it from TRUNK:\x3Cbr\x3E{{{\n\
svn log -v --stop-on-copy WORKINGCOPY\n\
}}}\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3EThe oldest BRANCH revision number shown can be used as the TRUNK revision number when merging more recent revisions in BRANCH *to* TRUNK.\x3C/div\x3E\x3Cbr\x3E\n\
* Compare WORKINGCOPY line by line with HEAD in *current* directory (only displays results if there are any differences):\x3Cbr\x3E{{{\n\
svn diff\n\
}}}\x3Cbr\x3E\n\
* Compare specific revision with specific revision line by line:\x3Cbr\x3E{{{\n\
svn diff URL@REV URL@REV\n\
}}}\x3Cbr\x3E\n\
* Check the status of WORKINGCOPY (display your changes):\x3Cbr\x3E{{{\n\
svn status WORKINGCOPY\n\
}}}\n\
\n\
=== Undo changes\n\
* Undo changes to a file or directory (revert to the HEAD copy):\x3Cbr\x3E{{{\n\
svn revert FILEORDIRECTORYNAME\n\
}}}\n\
\n\
=== Commit your changes\n\
# Commit changes to the repository:\x3Cbr\x3E{{{\n\
svn commit WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# List the changes in the editor that pops up, beginning each line with an asterisk followed by a space.\n\
\n\
=== Back up your copy\n\
* Back up your WORKINGCOPY to another directory on your computer:\x3Cbr\x3E\x3Cbr\x3E\n\
** Make a hot (full) copy of your local Subversion repository:\x3Cbr\x3E{{{\n\
svnadmin hotcopy WORKINGCOPY BACKUPDIRECTORY\n\
}}}\x3Cbr\x3E\n\
** Make a hot (full) copy of your local Subversion repository and *then* remove unused logs from your local Subversion repository:\x3Cbr\x3E{{{\n\
svnadmin hotcopy --clean-logs WORKINGCOPY BACKUPDIRECTORY\n\
}}}\n\
\n\
== Merging\n\
Sometimes you\'ll need to merge two revisions to create a new, combined revision. Below are various ways to do this. Note that all merges happen in your WORKINGCOPY and only go onto the server when you commit the changes.\n\
\n\
=== Merge to branch\n\
==== Merge current revisions\n\
# Merge *current* revisions from two different URLs:\x3Cbr\x3E{{{\n\
svn merge URL URL WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Commit the merge to BRANCH after reviewing the merged WORKINGCOPY and resolving any conflicts:\x3Cbr\x3E{{{\n\
svn commit WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Make a comment describing the merge (preferably with revision numbers) in the editor that pops up, beginning the line with an asterisk followed by a space.\n\
\n\
==== Merge specific revisions\n\
# Merge two specific revisions:\x3Cbr\x3E{{{\n\
svn merge URL@REV URL@REV WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Commit the merge to BRANCH after reviewing the merged WORKINGCOPY and resolving any conflicts.\x3Cbr\x3E{{{\n\
svn commit WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Make a comment describing the merge (preferably with revision numbers) in the editor that pops up, beginning the line with an asterisk followed by a space.\x3Cbr\x3E\x3Cbr\x3E\n\
\n\
==== Merge specific revisions\n\
# Merge two specific revisions:\x3Cbr\x3E{{{\n\
svn merge -r REV:REV SOURCE WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Commit the merge to BRANCH after reviewing the merged WORKINGCOPY and resolving any conflicts:\x3Cbr\x3E{{{\n\
svn commit WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Make a comment describing the merge (preferably with revision numbers) in the editor that pops up, beginning the line with an asterisk followed by a space.\x3Cbr\x3E\x3Cbr\x3E\n\
\n\
=== Merge (reintegrate) current branch to trunk\n\
# Change to WORKINGCOPY directory of your BRANCH:\x3Cbr\x3E{{{\n\
cd WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Merge current TRUNK to WORKINGCOPY:\x3Cbr\x3E{{{\n\
svn merge TRUNK\n\
}}}\x3Cbr\x3E\n\
# Commit the merge to BRANCH after reviewing the merged WORKINGCOPY and resolving any conflicts:\x3Cbr\x3E{{{\n\
svn commit WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Change to WORKINGCOPY directory of TRUNK:\x3Cbr\x3E{{{\n\
cd WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Merge (reintegrate) BRANCH to TRUNK:\x3Cbr\x3E{{{\n\
svn merge --reintegrate BRANCH\n\
}}}\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3ESubversion will merge the *current* BRANCH with the *current* TRUNK.\x3C/div\x3E\x3Cbr\x3E\n\
# Make a comment describing the merge (preferably with revision numbers) in the editor that pops up.\x3Cbr\x3E\x3Cbr\x3E\n\
# Delete BRANCH after the merge is complete and you\'ve verified that it worked properly:\x3Cbr\x3E{{{\n\
svn delete BRANCH -m "Removed branch."\n\
}}}\n\
\n\
=== Merge specific branch to trunk\n\
# Create a MyTrunk WORKINGCOPY directory on your computer.\x3Cbr\x3E\x3Cbr\x3E\n\
# Change to that directory:\x3Cbr\x3E{{{\n\
cd MyTrunk\n\
}}}\x3Cbr\x3E\n\
# Check out TRUNK to WORKINGCOPY:\x3Cbr\x3E{{{\n\
svn co TRUNK WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Merge specific BRANCH with TRUNK to WORKINGCOPY:\x3Cbr\x3E{{{\n\
svn merge BRANCH -rREV:HEAD WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Commit the merge to TRUNK after reviewing the merged WORKINGCOPY and resolving any conflicts:\x3Cbr\x3E{{{\n\
svn commit WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
# Make a comment describing the merge (preferably with revision numbers) in the editor that pops up, beginning the line with an asterisk followed by a space.\n\
\n\
== A few additional useful commands\n\
* Delete BRANCH from the server:\x3Cbr\x3E{{{\n\
svn delete BRANCH -m "* Removing obsolete branch from the WoaS project."\n\
}}}\x3Cbr\x3E\n\
* Display the contents of a URL:\x3Cbr\x3E{{{\n\
svn list -v URL\n\
}}}\x3Cbr\x3E\n\
* Display the logs for only the past X number of revisions (replace *X* with a number):\x3Cbr\x3E{{{\n\
svn log --limit X\n\
}}}\x3Cbr\x3E\n\
* Resurrect a deleted directory or file in BRANCH:\x3Cbr\x3E{{{\n\
svn copy -rREV BRANCH BRANCH\n\
}}}\x3Cbr\x3EOr:\x3Cbr\x3E{{{\n\
svn copy -rREV BRANCH/FILE BRANCH/FILE\n\
}}}\x3Cbr\x3E\n\
* Update WORKINGCOPY to mirror a new URL (use a different TRUNK):\x3Cbr\x3E{{{\n\
svn switch URL WORKINGCOPY\n\
}}}\x3Cbr\x3E\n\
* Get help with an svn SUBCOMMAND:\x3Cbr\x3E{{{\n\
svn help SUBCOMMAND\n\
}}}\x3Cbr\x3E\n\
** For example, try:\x3Cbr\x3E{{{\n\
svn help import\n\
}}}\x3Cbr\x3E\n\
* Export a copy of WORKINGCOPY into another directory:\x3Cbr\x3E{{{\n\
svn export WORKINGCOPY DIRECTORY\n\
}}}\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3EDIRECTORY has to be a nonexistent directory or the command won\'t work. This command copies all files and directories *except* Subversion directories or files.\x3C/div\x3E\x3Cbr\x3E\n\
* Selectively commit files (useful if you\'ve altered one file temporarily and don\'t want to commit it in its altered state, but wish to commit other files):\x3Cbr\x3E{{{\n\
svn commit FILENAME\n\
}}}\x3Cbr\x3EOr:\x3Cbr\x3E{{{\n\
svn commit FILENAME FILENAME FILENAME\n\
}}}\x3Cbr\x3E\n\
* Check out a specific revision of BRANCH:\x3Cbr\x3E{{{\n\
svn checkout -r 2 BRANCH WORKINGCOPY\n\
}}}\n\
',
'\x3Cspan title="%2" class="tooltip"\x3E%1\x3C/span\x3E',
'= Glossary\n\
{|\n\
|+ \x3Cdiv align="center" style="background-color:lightblue; border-top:2px solid black; border-right:2px solid black; border-left:2px solid black;"\x3EGLOSSARY\x3C/div\x3E\n\
| *REPOSITORY* || The main project directory on the server.\n\
| *BRANCH* || Your personal directory on the server.\n\
| *HEAD* || Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.\n\
| *REVISION* || A preserved state of a file or directory on the Subversion server represented by a number.\n\
| *REV* || A revision number (example: 32).\n\
| *SOURCE* || URL or directory name or file name.\n\
| *TRUNK* || The current development version of WoaS directory on the server.\n\
| *URL* || A server path to TRUNK or a BRANCH.\n\
| *WORKINGCOPY* || A local directory on your computer where you keep your copy.\n\
|}',
'These are the paths you\'ll be using with Subversion:\n\
\n\
{|\n\
|+ \x3Cdiv style="background-color:lightblue; border-top:2px solid black; border-right:2px solid black; border-left:2px solid black;"\x3EPATHS\x3C/div\x3E\n\
| *TRUNK * || [[https://stickwiki.svn.sourceforge.net/svnroot/stickwiki/trunk]]\n\
| *BRANCH* || [[https://stickwiki.svn.sourceforge.net/svnroot/stickwiki/branches/YOURUSERNAME]]\n\
| *WORKINGCOPY* || {{{/PATH/ON/YOUR/COMPUTER/TO/LOCAL/DIRECTORY/YOU/WILL/USE/FOR/DEVELOPMENT}}}\n\
|}\n\
',
'These are codes Subversion will use to let you know what it\'s doing when you issue a command:\n\
\n\
{|\n\
|+ \x3Cdiv style="background-color:lightblue; border-top:2px solid black; border-right:2px solid black; border-left:2px solid black;"\x3E*COMMON STATUS CODES*\x3C/div\x3E\n\
| *CODE* || *WHAT IT MEANS*\n\
| *A* || Item was added.\n\
| *C* || Item conflicts with updates from the repository.\n\
| *D* || Item was deleted.\n\
| *G* || Item was merged.\n\
| *M* || Item has been modified.\n\
| *R* || Item was replaced.\n\
| *U* || Item was updated.\n\
| *&#042;* || Item was updated.\n\
| *?* || Item is unknown and is not under version control.\n\
| *!* || Item is missing or incomplete.\n\
|}\n\
',
'= Getting started\n\
WoaS is written in JavaScript and XHTML, and the project uses a [[http://subversion.apache.org/|Subversion]] server hosted by [[http://sourceforge.net/|SourceForge]] for version control. As of 2010-04-04, [[http://sourceforge.net/apps/trac/sourceforge/wiki/Subversion|Subversion 1.6.x is supported]].\n\
\n\
# You\'ll need a SourceForge account so you can log into the WoaS Subversion server. If you don\'t already have one, please [[https://sourceforge.net/account/registration/|create one now]].\x3Cbr\x3E\x3Cbr\x3E\n\
# You\'ll also need to be added to the Subversion server by Daniele. Contact him in the [[http://woas.iragan.com/index.php|WoaS forums]] or by [[mailto://legolas558 _AT_ users.sourceforge.net|email]] to let him know you\'d like to be a developer and to tell him your SourceForge user name. He will give you the path to your development [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]].\x3Cbr\x3E\x3Cbr\x3E\n\
# Install [[http://subversion.apache.org/|Subversion]] on your computer.\x3Cbr\x3E\x3Cbr\x3E\n\
# Create the local directory you\'d like to use as your [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]].\x3Cbr\x3E\x3Cbr\x3E\n\
# Add your information to the [[My paths]] page for reference.\x3Cbr\x3E\x3Cbr\x3E\n\
',
'[[Special::TOC]]\n\
= Standard routine\n\
This is intended as a general reference. You may or may not need all the steps, and you don\'t necessarily need to do them in the order shown. The commands provided are for use in a terminal or terminal window. There are various programs for communicating with a Subversion server, but those are beyond the scope of this guide.\n\
=== Check for updates\n\
* Check the status of [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] against the server:\x3Cpre\x3Esvn status -u WORKINGCOPY\x3C/pre\x3EFiles that have been updated will have an asterisk next to them.\n\
\n\
=== Update your copy\n\
* Update [[Include::Template::Tooltip|HEAD|Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.]] with latest [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]]:\x3Cpre\x3Esvn update WORKINGCOPY\x3C/pre\x3E\n\
* Update [[Include::Template::Tooltip|HEAD|Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.]] with a *specific* [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]]:\x3Cpre\x3Esvn update -rREV WORKINGCOPY\x3C/pre\x3E\n\
\n\
=== Resolve conflicts\n\
* If there are conflicts between your files and the files on the server after doing an update, Subversion will create some extra files in your [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]]. To resolve those, see the [[Resolving conflicts]] page.\n\
\n\
=== Make your changes\n\
* Make whatever changes you like to the files in [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] by working normally.\n\
\n\
=== Tell Subversion about your changes\n\
* Add a directory:\x3Cpre\x3Esvn add DIRECTORYNAME\x3C/pre\x3E\n\
* Add a file:\x3Cpre\x3Esvn add FILENAME\x3C/pre\x3E\n\
* Change or overwrite a file:\x3Cbr\x3E\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3E\x3Ctt\x3ENO SVN COMMAND IS NEEDED FOR THIS.\x3C/tt\x3E\x3C/div\x3E\x3Cbr\x3E\n\
* Copy a file:\x3Cpre\x3Esvn cp SOURCE DESTINATION\x3C/pre\x3E\n\
* Delete a file:\x3Cpre\x3Esvn rm FILENAME\x3C/pre\x3E\n\
* Move a file:\x3Cpre\x3Esvn mv SOURCE DESTINATION\x3C/pre\x3E\n\
\n\
=== Examine your changes\n\
* Check the status of [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] against [[Include::Template::Tooltip|HEAD|Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.]]:\x3Cpre\x3Esvn status -v WORKINGCOPY\x3C/pre\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3EEach line displays the [[Status codes|status codes]], the [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] [[Include::Template::Tooltip|revision|A revision number (example: 32).]], the [[Include::Template::Tooltip|revision|A revision number (example: 32).]] in which it changed, who changed it, and the file or directory name.\x3C/div\x3E\x3Cbr\x3E\n\
* Check the logs of [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]], showing its ancestry:\x3Cpre\x3Esvn log -v WORKINGCOPY\x3C/pre\x3E\n\
* Check the logs of [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]], showing its ancestry since you copied it from [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]]:\x3Cpre\x3Esvn log -v --stop-on-copy WORKINGCOPY\x3C/pre\x3E\x3Cbr\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3EThe oldest BRANCH revision number shown can be used as the TRUNK revision number when merging more recent revisions in BRANCH *to* TRUNK.\x3C/div\x3E\x3Cbr\x3E\n\
* Compare [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] line by line with [[Include::Template::Tooltip|HEAD|Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.]] in *current* directory (only displays results if there are any differences):\x3Cpre\x3Esvn diff\x3C/pre\x3E\n\
* Compare specific [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]] with specific [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]] line by line:\x3Cpre\x3Esvn diff URL@REV URL@REV\x3C/pre\x3E\n\
\n\
=== Undo changes\n\
* Undo changes to a file or directory (revert to the [[Include::Template::Tooltip|HEAD|Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.]] copy):\x3Cpre\x3Esvn revert FILEORDIRECTORYNAME\x3C/pre\x3E\n\
\n\
=== Commit your changes\n\
# Commit changes to the server:\x3Cpre\x3Esvn commit WORKINGCOPY\x3C/pre\x3E\n\
# Paste or type up a list of the changes in the editor that pops up, *beginning each line with an asterisk followed by a space*.\n\
',
'= WoaS philosophy\n\
The three key points of the WoaS philosophy are to keep the wiki simple, lightweight, and easy to use.\n\
# Simplicity - comes in several forms: user interface, back end functionality, and getting started.\n\
# Lightweight - Especially with Javascript, sometimes less is more. Keeping things lean is always a good idea.\n\
# Ease of use - Without this, new users won\'t migrate to the project, and old users may seek other solutions to use.\n\
WoaS strives to make customization possible in these ways (in order of preference):\n\
# Use a macro.\n\
# Use a plugin (not yet implemented).\n\
# Edit the Bootscript.\n\
# Runtime functions/object overriding.\n\
# Direct code modification.\n\
If users need to go to step 5, we failed on documenting this process or in making WoaS customizable.\n\
',
'= Merging\n\
Sometimes you\'ll need to merge two revisions to create a new, combined revision. Below are various ways to do this.\n\
\n\
\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3ENote that all merges happen in your [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] and only go onto the server when you commit the changes.\x3C/div\x3E\n\
== Merge current revisions to BRANCH\n\
# Merge *current* [[Include::Template::Tooltip|REVISIONS|A preserved state of a file or directory on the Subversion server represented by a number.]] from two different [[Include::Template::Tooltip|URLs|A server path to TRUNK or a BRANCH.]]:\x3Cpre\x3Esvn merge URL URL WORKINGCOPY\x3C/pre\x3E\n\
# Commit the merge to [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] after reviewing the merged [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] and [[Resolving conflicts|resolving any conflicts]]:\x3Cpre\x3Esvn commit WORKINGCOPY\x3C/pre\x3E\n\
# Make a comment describing the merge (preferably with [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]] numbers) in the editor that pops up, *beginning each line with an asterisk followed by a space*.\n\
\n\
== Merge specific revisions to BRANCH\n\
# Merge two specific [[Include::Template::Tooltip|REVISIONS|A preserved state of a file or directory on the Subversion server represented by a number.]]:\x3Cpre\x3Esvn merge URL@REV URL@REV WORKINGCOPY\x3C/pre\x3E\n\
# Commit the merge to [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] after reviewing the merged [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] and [[Resolving conflicts|resolving any conflicts]].\x3Cpre\x3Esvn commit WORKINGCOPY\x3C/pre\x3E\n\
# Make a comment describing the merge (preferably with [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]] numbers) in the editor that pops up, *beginning each line with an asterisk followed by a space*.\n\
\n\
== Merge specific revisions to BRANCH\n\
# Merge two specific [[Include::Template::Tooltip|REVISIONS|A preserved state of a file or directory on the Subversion server represented by a number.]]:\x3Cpre\x3Esvn merge -r REV:REV SOURCE WORKINGCOPY\x3C/pre\x3E\n\
# Commit the merge to [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] after reviewing the merged [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] and [[Resolving conflicts|resolving any conflicts]]:\x3Cpre\x3Esvn commit WORKINGCOPY\x3C/pre\x3E\n\
# Make a comment describing the merge (preferably with [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]] numbers) in the editor that pops up, *beginning each line with an asterisk followed by a space*.\n\
\n\
== Merge (reintegrate) current BRANCH into TRUNK\n\
# Change to [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] directory of [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]]:\x3Cpre\x3Ecd WORKINGCOPY\x3C/pre\x3E\n\
# Merge current [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]] to [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]]:\x3Cpre\x3Esvn merge TRUNK\x3C/pre\x3E\n\
# Commit the merge to [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] after reviewing the merged [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] and [[Resolving conflicts|resolving any conflicts]]:\x3Cpre\x3Esvn commit WORKINGCOPY\x3C/pre\x3E\n\
# Change to [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] directory of [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]]:\x3Cpre\x3Ecd WORKINGCOPY\x3C/pre\x3E\n\
# Merge (reintegrate) [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] to [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]]:\x3Cpre\x3Esvn merge --reintegrate BRANCH\x3C/pre\x3E\x3Cdiv style="background-color:#FFFFAA; border: 0.1em solid black; padding:0.3em;"\x3ESubversion will merge the *current* [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] with the *current* [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]].\x3C/div\x3E\x3Cbr\x3E\n\
# Make a comment describing the merge (preferably with revision numbers) in the editor that pops up, *beginning each line with an asterisk followed by a space*.\x3Cbr\x3E\x3Cbr\x3E\n\
# Delete [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] after the merge is complete and you\'ve verified that it worked properly:\x3Cpre\x3Esvn delete BRANCH -m "Removed branch."\x3C/pre\x3E\n\
\n\
== Merge specific BRANCH to TRUNK\n\
# Create a *MyTrunk* [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] directory on your computer.\x3Cbr\x3E\x3Cbr\x3E\n\
# Change to that directory:\x3Cpre\x3Ecd MyTrunk\x3C/pre\x3E\n\
# Check out [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]] to [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]]:\x3Cpre\x3Esvn co TRUNK WORKINGCOPY\x3C/pre\x3E\n\
# Merge specific [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] with [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]] in the [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]]:\x3Cpre\x3Esvn merge BRANCH -rREV:HEAD WORKINGCOPY\x3C/pre\x3E\n\
# Commit the merge to [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]] after reviewing the merged [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] and [[Resolving conflicts|resolving any conflicts]]:\x3Cpre\x3Esvn commit WORKINGCOPY\x3C/pre\x3E\n\
# Make a comment describing the merge (preferably with revision numbers) in the editor that pops up, *beginning each line with an asterisk followed by a space*.\n\
',
'= Useful commands\n\
A few additional useful commands:\n\
\n\
* Back up your [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] to another directory on your computer:\x3Cbr\x3E\x3Cbr\x3E\n\
** Make a hot (full) copy of your *local* Subversion [[Include::Template::Tooltip|REPOSITORY|The main project directory.]]:\x3Cpre\x3Esvnadmin hotcopy WORKINGCOPY BACKUPDIRECTORY\x3C/pre\x3E\n\
** Make a hot (full) copy of your *local* Subversion [[Include::Template::Tooltip|REPOSITORY|The main project directory.]] and *then* remove unused logs from your *local* Subversion [[Include::Template::Tooltip|REPOSITORY|The main project directory on the server.]]:\x3Cpre\x3Esvnadmin hotcopy --clean-logs WORKINGCOPY BACKUPDIRECTORY\x3C/pre\x3E\n\
* Check out a specific [[Include::Template::Tooltip|REVISION|A preserved state of a file or directory on the Subversion server represented by a number.]] of [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]]:\x3Cpre\x3Esvn checkout -r 2 BRANCH WORKINGCOPY\x3C/pre\x3E\n\
* Create a directory:\x3Cpre\x3Esvn mkdir DIRECTORYNAME\x3C/pre\x3E\n\
* Delete [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] from the server:\x3Cpre\x3Esvn delete BRANCH -m "&#042; Removing obsolete branch from the WoaS project."\x3C/pre\x3E\n\
* Display the contents of a [[Include::Template::Tooltip|URL|A server path to TRUNK or a BRANCH.]]:\x3Cpre\x3Esvn list -v URL\x3C/pre\x3E\n\
* Display the logs for only the past X number of [[Include::Template::Tooltip|REVISIONS|A preserved state of a file or directory on the Subversion server represented by a number.]] (replace *X* with a number):\x3Cpre\x3Esvn log --limit X\x3C/pre\x3E\n\
* Export a copy of [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] into another directory:\x3Cpre\x3Esvn export WORKINGCOPY DIRECTORY\x3C/pre\x3E*DIRECTORY* has to be a *nonexistent* directory or the command won\'t work. This command exports everything *except* Subversion directories or files.\x3Cbr\x3E\x3Cbr\x3E\n\
* Get help with a Subversion command:\x3Cpre\x3Esvn help COMMAND\x3C/pre\x3E\n\
** For example, try:\x3Cpre\x3Esvn help import\x3C/pre\x3E\n\
* Resurrect a deleted directory or file in [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]]:\x3Cpre\x3Esvn copy -rREV BRANCH BRANCH\x3C/pre\x3EOr:\x3Cpre\x3Esvn copy -rREV BRANCH/FILE BRANCH/FILE\x3C/pre\x3E\n\
* Update [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] to mirror a new [[Include::Template::Tooltip|URL|A server path to TRUNK or a BRANCH.]] (use a different [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]]):\x3Cpre\x3Esvn switch URL WORKINGCOPY\x3C/pre\x3E\n\
* Selectively commit files (useful if you\'ve altered one file temporarily and don\'t want to commit it in its altered state, but wish to commit other files):\x3Cpre\x3Esvn commit FILENAME\x3C/pre\x3EOr:\x3Cpre\x3Esvn commit FILENAME FILENAME FILENAME\x3C/pre\x3E\n\
',
'= Initial commit\n\
The commands provided are for use in a terminal or terminal window. There are various programs for communicating with a Subversion server, but those are beyond the scope of this guide.\n\
# Copy [[Include::Template::Tooltip|TRUNK|The current development version of WoaS directory on the server.]] to [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]]:\x3Cpre\x3Esvn copy TRUNK BRANCH\x3C/pre\x3E\n\
# Check out [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]] to create a local [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]]:\x3Cpre\x3Esvn co BRANCH WORKINGCOPY\x3C/pre\x3E\n\
# If you\'ve already edited a copy of WoaS, you can copy your file(s) over those in [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]], overwriting them.\x3Cbr\x3E\x3Cbr\x3E\n\
# Compare [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] with [[Include::Template::Tooltip|HEAD|Hidden .svn directory in WORKINGCOPY containing most recent checked out revision.]] line by line:\x3Cpre\x3Esvn diff WORKINGCOPY\x3C/pre\x3E\n\
# Check the status of [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] (display your changes):\x3Cpre\x3Esvn status WORKINGCOPY\x3C/pre\x3E\n\
# Commit initial changes to [[Include::Template::Tooltip|BRANCH|Your personal directory on the server.]], providing your SourceForge password when asked:\x3Cpre\x3Esvn commit WORKINGCOPY\x3C/pre\x3ESubversion caches your password on your hard drive so you don\'t have to enter it manually again. If you don\'t wish it to do this, see [[http://svnbook.red-bean.com/nightly/en/svn-book.html#svn.tour.initial.disabling-password-caching]].\x3Cbr\x3E\x3Cbr\x3E\n\
# List the changes in the editor that pops up, *beginning each line with an asterisk followed by a space*. If the initial commit comment is very long (for instance, if you overwrote files in the [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]] with ones you\'d already made changes to), just write something like this:\x3Cpre\x3E&#042; Initial commit.\x3C/pre\x3E\n\
Now that you\'ve made the initial commit, see the [[Standard routine]] page for some common Subversion commands.\n\
',
'= Resolving conflicts\n\
If there are conflicts between your files and the files on the server after doing an update, Subversion will create some extra files in your [[Include::Template::Tooltip|WORKINGCOPY|A local directory on your computer where you keep your copy.]]:\x3Cpre\x3EFILENAME\x3Cbr\x3EFILENAME.mine\x3Cbr\x3EFILENAME.rREV\x3Cbr\x3EFILENAME.rREV\x3C/pre\x3EThese are the conflicted file, your file before you updated, and the two revisions that are in conflict. Follow these steps to resolve the conflict:\n\
# Examine the conflicted file (the one *without* a .mine or .r[[Include::Template::Tooltip|REV|A revision number (example: 32).]] extension):\x3Cpre\x3Esvn cat FILENAME\x3C/pre\x3E\n\
# Find sections between triple angled brackets like this:\x3Cpre\x3E&#60&#60&#60&#60&#60&#60&#60&#32;&#46;&#109;&#105;&#110;&#101;\x3Cbr\x3E&#67;&#79;&#78;&#84;&#69;&#78;&#84;\x3Cbr\x3E&#62&#62&#62&#62&#62&#62&#62&#32;&#46;&#114;&#50;\x3C/pre\x3E\n\
# For each section you find, decide whether to keep, change, or get rid of the content inside the brackets.\x3Cbr\x3E\x3Cbr\x3E\n\
# Remove the angled bracket lines around each conflicted section you\'ve fixed.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type this command once all conflicted sections have been resolved:\x3Cpre\x3Esvn resolved\x3C/pre\x3ESubversion will clean up the files with the .mine and .r[[Include::Template::Tooltip|REV|A revision number (example: 32).]] extensions for you.\x3Cbr\x3E\x3Cbr\x3E\n\
',
'= Assemble WoaS\n\
This page provides instructions for how to assemble the multiple file development version of WoaS into a single file.\n\
\n\
== Requirements\n\
# You must have php or the php command line interface installed on your system.\n\
# You must have the libwsif.php and mkwoas.php files, which are in the tools subdirectory of the development version.\n\
\n\
== Assemble WoaS from the woas subdirectory\n\
This assembles the multiple files into a single file using default settings:\n\
# Copy libwsif.php and mkwoas.php from the tools subdirectory into the woas subdirectory.\x3Cbr\x3E\x3Cbr\x3E\n\
# Open the woas subdirectory of the development version in a terminal window.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type this command:\x3Cbr\x3E{{{\n\
php mkwoas.php woas.htm\n\
}}}\x3Cbr\x3E\n\
# The single file will be created in the woas subdirectory.\n\
\n\
== Additional parameters accepted by the command\n\
These are for use in all the examples below.\n\
\n\
{|\n\
|+ Additional parameters accepted by the command\n\
| woas=path/woas.htm || path to WoaS HTML file - defaults to woas.htm\n\
| wsif=path/index.wsif || path to pages data in WSIF format\n\
| log=[0|1|2] || 0 - fully disable log, 1 - keep logging as is, 2 - enable all log lines\n\
| native_wsif=[0|1] || 0 - default, 1 - enable native WSIF saving\n\
| edit_override=[0|1] || 0 - default, 1 - enable edit override\n\
|}\n\
== Assemble WoaS from the tools subdirectory specifying paths\n\
This assembles the multiple files into a single file using default settings:\n\
# Open the tools subdirectory of the development version in a terminal window.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type this command, replacing both instances of PATH with the paths to the woas.htm file and the index.wsif file:\x3Cbr\x3E{{{\n\
php mkwoas.php woas=PATH/woas.htm wsif=PATH/index.wsif\n\
}}}\x3Cbr\x3E\n\
# The single file will be created in the tools subdirectory.\n\
\n\
== Assemble WoaS from the tools subdirectory specifying paths and logging\n\
This assembles the multiple files into a single file using default settings, but specifying logging:\n\
# Open the tools subdirectory of the development version in a terminal window.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type this command, replacing both instances of PATH with the paths to the woas.htm file and the index.wsif file and replacing X with the number from the parameters chart above to specify the logging:\x3Cbr\x3E{{{\n\
php mkwoas.php woas=PATH/woas.htm wsif=PATH/index.wsif log=X\n\
}}}\x3Cbr\x3E\n\
# The single file will be created in the tools subdirectory.\n\
\n\
== Assemble WoaS from the tools subdirectory specifying paths and native WSIF saving\n\
This assembles the multiple files into a single file using default settings, but specifying native WSIF saving:\n\
# Open the tools subdirectory of the development version in a terminal window.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type this command, replacing both instances of PATH with the paths to the woas.htm file and the index.wsif file and replacing X with the number from the parameters chart above to specify native WSIF saving:\x3Cbr\x3E{{{\n\
php mkwoas.php woas=PATH/woas.htm wsif=PATH/index.wsif native_wsif=X\n\
}}}\x3Cbr\x3E\n\
# The single file will be created in the tools subdirectory.\n\
\n\
== Assemble WoaS from the tools subdirectory specifying paths and edit override\n\
This assembles the multiple files into a single file using default settings, but specifying edit override:\n\
# Open the tools subdirectory of the development version in a terminal window.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type this command, replacing both instances of PATH with the paths to the woas.htm file and the index.wsif file and replacing X with the number from the parameters chart above to specify edit override:\x3Cbr\x3E{{{\n\
php mkwoas.php woas=PATH/woas.htm wsif=PATH/index.wsif edit_override=X\n\
}}}\x3Cbr\x3E\n\
# The single file will be created in the tools subdirectory.\n\
\n\
== Assemble WoaS from the tools subdirectory specifying everything\n\
This assembles the multiple files into a single file specifying everything:\n\
# Open the tools subdirectory of the development version in a terminal window.\x3Cbr\x3E\x3Cbr\x3E\n\
# Type this command, replacing both instances of PATH with the paths to the woas.htm file and the index.wsif file, replacing X with the number from the parameters chart above to specify the logging, replacing Y with the number from the parameters chart above to specify native WSIF saving, and replacing Z with the number from the parameters chart above to specify edit override:\x3Cbr\x3E{{{\n\
php mkwoas.php woas=PATH/woas.htm wsif=PATH/index.wsif log=X native_wsif=Y edit_override=Z\n\
}}}\x3Cbr\x3E\n\
# The single file will be created in the tools subdirectory.\n\
'
];

/* DFQRCTsKlU-0000174-END */

/* ]]> */ </script>
<style type="text/css">/* CODE INLINE - WIKI - CURLY BRACKETS */
.wiki_preformatted {color:black; background-color:#F5F5F5; white-space:-moz-pre-wrap !important; padding-right:0.27em; padding-left:0.27em; margin-right:auto; margin-left:auto; width:100%; display:inline;}
/* ALTERNATIVE FOR MOZILLA: .wiki_preformatted {color:black; background-color:#F5F5F5; white-space:-moz-pre-wrap !important; padding-right:0.27em; padding-left:0.27em;} */
/* ALTERNATIVE FOR CSS-3: .wiki_preformatted {color:black; background-color:#F5F5F5; white-space:pre-wrap; padding-right:0.27em; padding-left:0.27em;} */
/* ALTERNATIVE FOR OPERA 4-6: .wiki_preformatted {color:black; background-color:#F5F5F5; white-space:-pre-wrap; padding-right:0.27em; padding-left:0.27em;} */
/* ALTERNATIVE FOR OPERA 7: .wiki_preformatted {color:black; background-color:#F5F5F5; white-space:-o-pre-wrap; padding-right:0.27em; padding-left:0.27em;} */
/* ALTERNATIVE FOR IE 5.5+: .wiki_preformatted {color:black; background-color:#F5F5F5; word-wrap:break-word; padding-right:0.27em; padding-left:0.27em;} */

/* CODE BLOCKS - HTML - PRE TAGS */
pre {color:black; background-color:#F5F5F5; border:0.063em solid grey; padding:0.375em; white-space:-moz-pre-wrap; word-wrap:break-word; margin-right:auto; margin-left:auto; width:99%; display:block;}

/* TOOLTIPS */
span.tooltip {cursor:help; border-bottom:0.125em dotted grey;}

/* existent link */
a.link {
  color: blue;
}
a.link:hover {
  text-decoration: underline;
}

/* unexistent link */
a.unlink {
  color: red;
}
a.unlink:hover {
  text-decoration: underline;
}

/* outside world link */
a.world {
  color: darkgreen;
  text-decoration: underline;
}

/* cursor when on a link */
a {
	cursor: pointer;
	/* FOR IE5.5/IE6 */
	/* cursor: hand; */
}

/* main text area div */
div.woas_text_area {
  border: 1pt solid black;
  background-color: white;
  padding: 0.475em;
}

body {
  font-family: Georgia, verdana;
}

/* body background color */
.woas_background {
	background-color: #F0F0F5;
}

/* headers */
h1 { font-size: 1.438em; }

h2 { font-size: 1.25em; }

h3 { font-size: 1.063em; }

h4 { font-size: 0.875em; }

h5 { font-size: 0.75em; }

h6 { font-size: 0.625em; }

/* tag container */
div.taglinks {
	border: 1pt solid #aaa;
/*	background-color: #f9f9f9; */
	padding: 0.313em;
	margin-top: 1em;
	clear: both;
}

/* tag link */
a.link.tag {
  color: navy;
}

/* search results */
div.search_results {
	border: 1pt solid #aaa;
	background-color: #f9f9f9;
	padding: 0.313em;
	margin-top: 1em;
	clear: both;
}

/* main wiki pane when locked */
.woas_text_area.locked,
#woas_pwd_mask {
	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAAAAACMmsGiAAAALHRFWHRDcmVhdGlvbiBUaW1lAGdpbyAyOSBtYXIgMjAwNyAxMTo1MToxMCArMDEwME%2BTNUAAAAAHdElNRQfXAx0JNByGxueSAAAACXBIWXMAAAsSAAALEgHS3X78AAAABGdBTUEAALGPC%2FxhBQAAABlJREFUeNpj%2FM%2FwmYHpMwMvAxOQwcvECyQBO1oE%2BlG5iisAAAAASUVORK5CYII%3D);
	background-color: #eeeeee;
}

/* page title */
.title {
  font-size: 2em;
  font-weight: bold;
  margin-bottom: 0em;
  margin-top: 0em;
  display:inline;
  text-shadow: #888 0.13em 0.13em 0.065em;
}

/* main text area */
#wiki_text {
	position: relative;
	left: 15.5%;
	width: 82.3%;
	z-index: 0;
	margin-top: 1.313em;
	text-align:justify;
}

table.woas_text_area {
	border: 1pt solid black;
	border-spacing: 0em;
}

table.woas_text_area td {
	border: 1pt solid;
	padding: 0.313em;
}

table.woas_text_area caption {
        font-weight: bold;
        font-style: italic;
}

/* Left menu */
div.menu_area {
	border: 1pt solid grey;
	font-size: 0.75em;
	background-color: white;
	padding: 0.499em;
	width: 13.2%;
	left: 1%;
}
div.menu {
}

/* topbar */
div.wiki_header {
	top: 0em;
	left: 0em;
	border: 1pt solid #aaa;
	opacity:.75;
	z-index: 1;
	width: 100%;
}

/* table of contents */
div.wiki_toc {
	border: 1pt dashed #aaa;
	background-color: #f9f9f9;
	padding: 0.313em;
	width: 50%;
	font-size: 95%;
}

div.wiki_toc ol, li {
	margin-left: 1.3em;
	padding-left: 0em;
}

p.wiki_toc_title {
	font-weight: bold;
	text-align: center;
}

.search_highlight { background-color: yellow; }

/* loading overlay shown while wiki loads or can't load */
#loading_overlay {
	position: absolute;
	width: 99%;
	height: 100%;
	padding-top: 25%;
	z-index: 100;
	background-color: white;
	left: 0em;
	top: 0em;
	font-size: large;
	text-align: center;
}

/* menu lists */
div.menu_area ul li, div.menu_area ol li,
div.ns_menu_area ul li, div.ns_menu_area ol li {
	margin-left: -2em;
}

/* nowiki text inline (curly brackets) */
.wiki_preformatted {
	/* css-3 */
	white-space: pre-wrap;
	/* Opera 4-6 */
/*	white-space: -pre-wrap;  */
	/* Opera 7 */
/*	white-space: -o-pre-wrap;  */
	/* Internet Explorer 5.5+ */
/*	word-wrap: break-word;     */
}

/* ask password overlay */
#woas_pwd_query {
	position: absolute;
	width: 99%;
	height: 100%;
	text-align: center;
	padding-top: 25%;
	z-index: 100;
	left: 0em;
	top: 0em;
        border: 1pt solid #666666; 
        background-color: #d6dff7;
	font-size: large;
        visibility: hidden;
}

#woas_pwd_mask {
	position: absolute;
	width: 99%;
	height: 100%;
	text-align: center;
	z-index: 99;
	visibility: hidden;
	font-size: large;
	left: 0em;
	top: 0em;
}

/* last modified line beneath main text area */
.woas_page_mts {
	position: relative;
	left: 16%;
	width: 81%;
	z-index: 0;
	font-size: small;
}

/* area between topbar and editor buttons */
#edit_page_title{
         margin-top: 2.188em;
}

/* since v0.10.1 */

#debug_info {
	margin-right: 0.75em;
	margin-left: 14.05em;
	background-color: gray;
	border: 1pt solid black;
	margin-top: 1em;
}

#woas_debug_panel {
}

#woas_log {
	background-color: rgb(204, 204, 204);
	width: 99.3%;
}

/* editor buttons */
.wiki_button {
	margin-top: 0.063em;
	margin-bottom: 0.063em;
}

/* since v0.10.5 */

.woas_wait_text {
	color: navy;
}

.woas_menu_button {
	margin-top: 0.438em;
	color:darkblue;
	background-color: #F0F0F5;
	width:100%;
	border: 1pt solid grey;
	text-align:center; font-size:1.3em;
	font-variant:normal;
	cursor:pointer;
}

.woas_menu_button:hover {
	background-color:darkgrey;
}

.woas_password_desc {
	font-size: 0.8em;
	margin-left: 25%;
	margin-right: 25%;
	border: 2pt solid navy;
	background-color: #FAFAFB;
}

.woas_help_button {
	margin-top: 0.75em;
	color:darkblue;
	background-color: #F0F0F5;
	border: 1pt solid grey;
	text-align:center; font-size:1em;
	font-variant:normal;
	cursor:pointer;
}

.woas_help_button:hover {
	background-color:darkgrey;
}

/* used in help pages */
.woas_topnote {
	position:fixed; right:0.625em; top:0.188em;
}

.woas_help_background {
	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A%2FwD%2FoL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oDDAonCzKHvroAAAEFSURBVHja7duxDYIhFIVRIA7EKk7qKoxkb2Ns1PzfObWNuRfyAB0DAAAAAAAAAAAAAAAAAAAAAAAAAIC%2FMEtf9pxzf%2FeZvfdDAYLBV4swBd8uwhR%2BuwhT%2BO0SLOE7BQg%2FvAssa8AOYPWHd4FbtfmvIVZnhyX8xnlfAVCA8kpPHAO%2FNUReqUQKEA7fDDDcHC7hmwGEHx4gp%2BDbpwc%2FCYsfHafw2%2FcG2beAevCpHeDT1V%2B6LfQWEA5fAeLhKwAKoAAAAOR4DRzt3wl6DYyXwGtgvAQeg%2BIlcBEUpwAKgALgHsAg6BTgHsAO0CyBfwwDAAAAAAAAAAAAAAAAAAAAAAAAAAAAv%2FIER4Nn%2B7YDG3wAAAAASUVORK5CYII%3D);
	background-attachment:fixed;
}

.woas_helpcode {
	padding:0.438em;
	font-family:monospace;
}

.woas_helptext {
	font-family: lucida;
}

.woas_about_footer {
	padding: 2pt;
	line-height: 1em;
	border: 1pt solid black;
	BACKGROUND: #048db4;
	FONT-WEIGHT: bold;
	text-align: center;
}

.woas_about_footer a {
	color: white;
}

</style><title>Main Page</title>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** aes.js ***/
// AES encryption for StickWiki
// adapted by legolas558
// license: GNU/GPL
// original code from http://home.versatel.nl/MAvanEverdingen/Code/
// this is a javascript conversion of a C implementation by Mike Scott

woas["AES"] = {
	"bData":null,
	"sData":null,
	"aes_i":null,
	"aes_j":null,
	"tot":null,
	"key": [],
	"wMax": 0xFFFFFFFF,
	"aesNk":null,
	"aesNr":null,
	"aesPows":null,
	"aesLogs":null,
	"aesSBox":null,
	"aesSBoxInv":null,
	"aesRco":null,
	"aesFtable":null,
	"aesRtable":null,
	"aesFi":null,
	"aesRi":null,
	"aesFkey":null,
	"aesRkey":null
};

woas.AES["rotb"] = function(b,n){ return ( b<<n | b>>>( 8-n) ) & 0xFF; }
woas.AES["rotw"] = function(w,n){ return ( w<<n | w>>>(32-n) ) & woas.AES.wMax; }
woas.AES["getW"] = function(a,i){ return a[i]|a[i+1]<<8|a[i+2]<<16|a[i+3]<<24; }
woas.AES["setW"] = function(a,i,w){ a.splice(i,4,w&0xFF,(w>>>8)&0xFF,(w>>>16)&0xFF,(w>>>24)&0xFF); }
woas.AES["setWInv"] = function(a,i,w){ a.splice(i,4,(w>>>24)&0xFF,(w>>>16)&0xFF,(w>>>8)&0xFF,w&0xFF); }
woas.AES["getB"] = function(x,n){ return (x>>>(n*8))&0xFF; }

/*	var utf8sets = [0x800,0x10000,0x110000];

	function unExpChar(c){
	  return "unexpected character '"+String.fromCharCode(c)+"' (code 0x"+c.toString(16)+").";
	}
*/

woas["utf8Encrypt_s"] = function(sData) {
	return unescape( encodeURIComponent( sData ) );
}

woas["utf8Encrypt"] = function(sData){
		return this.split_bytes(this.utf8Encrypt_s(sData));
/*	  var k, i=0, z=sData.length;
	  var bData = [];
	  while (i<z) {
	    c = sData.charCodeAt(i++);
	    if (c<0x80){ bData.push(c); continue; }
	    k=0; while(k<utf8sets.length && c>=utf8sets[k]) k++;
	    if (k>=utf8sets.length) {
			alert("UTF-8: "+unExpChar(c));
			return null;
		}
		j=bData.length;
	    for (var n=j+k+1;n>j;n--){ bData[n]=0x80|(c&0x3F); c>>>=6; }
	    bData[j]=c+((0xFF<<(6-k))&0xFF);
	    j += k+2;
	  }
	  return bData; */
	}

woas["utf8Decrypt_s"] = function(sData) {
		try {
			return decodeURIComponent( escape( sData ) );
		}
		catch (e) {
			log(e);	//log:1
		}
		return null;
	}

woas["utf8Decrypt"] = function(bData){
	return this.utf8Decrypt_s(this.merge_bytes(bData));
}
/*	  var z=bData.length;
	  var c;
	  var k, d = 0, i = 0;
	  var sData = "";
	  while (i<z) {
	    c = bData[i++];
	    k=0; while(c&0x80){ c=(c<<1)&0xFF; k++; }
	    c >>= k;
	    if (k==1||k>4) {
	//		throw
			log('UTF-8: invalid first byte');	// log:1
			return null;
		}
	    for (var n=1;n<k;n++){
	      d = bData[i++];
	      if (d<0x80||d>0xBF) break;
	      c=(c<<6)+(d&0x3F);
	    }
	    if ( (k==2&&c<0x80) || (k>2&&c<utf8sets[k-3]) ) {
			log("UTF-8: invalid sequence");	// log:1
			return null;
		}
	    sData+=String.fromCharCode(c);
	  }
	  return sData; */

woas["split_bytes"] = function(s) {
	var l=s.length;
	var arr=[];
	for(var i=0;i<l;i++)
		arr.push(s.charCodeAt(i));
	return arr;
}
	
woas["merge_bytes"] = function(arr) {
	var l=arr.length;
	var s="";
	for(var i=0;i<l;i++)
		s+=String.fromCharCode(arr[i]);
	return s;
}

woas.AES["aesMult"] = function(x, y){ return (x&&y) ? woas.AES.aesPows[(woas.AES.aesLogs[x]+woas.AES.aesLogs[y])%255]:0; }

woas.AES["aesPackBlock"] = function() {
	return [ woas.AES.getW(woas.AES.bData,woas.AES.aes_i), woas.AES.getW(woas.AES.bData,woas.AES.aes_i+4),
			woas.AES.getW(woas.AES.bData,woas.AES.aes_i+8), woas.AES.getW(woas.AES.bData,woas.AES.aes_i+12) ];
}

woas.AES["aesUnpackBlock"] = function(packed){
  for ( var mj=0; mj<4; mj++,woas.AES.aes_i+=4) woas.AES.setW( woas.AES.bData, woas.AES.aes_i, packed[mj] );
}

woas.AES["aesXTime"] = function(p){
  p <<= 1;
  return p&0x100 ? p^0x11B : p;
}

woas.AES["aesSubByte"] = function(w){
  return woas.AES.aesSBox[woas.AES.getB(w,0)] | woas.AES.aesSBox[woas.AES.getB(w,1)]<<8 | woas.AES.aesSBox[woas.AES.getB(w,2)]<<16 | woas.AES.aesSBox[woas.AES.getB(w,3)]<<24;
}

woas.AES["aesProduct"] = function(w1,w2){
  return woas.AES.aesMult(woas.AES.getB(w1,0),woas.AES.getB(w2,0)) ^ woas.AES.aesMult(woas.AES.getB(w1,1),woas.AES.getB(w2,1))
       ^ woas.AES.aesMult(woas.AES.getB(w1,2),woas.AES.getB(w2,2)) ^ woas.AES.aesMult(woas.AES.getB(w1,3),woas.AES.getB(w2,3));
}

woas.AES["aesInvMixCol"] = function(x){
  return woas.AES.aesProduct(0x090d0b0e,x)     | woas.AES.aesProduct(0x0d0b0e09,x)<<8 |
         woas.AES.aesProduct(0x0b0e090d,x)<<16 | woas.AES.aesProduct(0x0e090d0b,x)<<24;
}

woas.AES["aesByteSub"] = function(x){
  var y=woas.AES.aesPows[255-woas.AES.aesLogs[x]];
  x=y;  x=woas.AES.rotb(x,1);
  y^=x; x=woas.AES.rotb(x,1);
  y^=x; x=woas.AES.rotb(x,1);
  y^=x; x=woas.AES.rotb(x,1);
  return x^y^0x63;
}

woas.AES["aesGenTables"] = function(){
  var i,y;
  woas.AES.aesPows = [ 1,3 ];
  woas.AES.aesLogs = [ 0,0,null,1 ];
  woas.AES.aesSBox = new Array(256);
  woas.AES.aesSBoxInv = new Array(256);
  woas.AES.aesFtable = new Array(256);
  woas.AES.aesRtable = new Array(256);
  woas.AES.aesRco = new Array(30);

  for ( i=2; i<256; i++){
    woas.AES.aesPows[i]=woas.AES.aesPows[i-1]^woas.AES.aesXTime( woas.AES.aesPows[i-1] );
    woas.AES.aesLogs[woas.AES.aesPows[i]]=i;
  }

  woas.AES.aesSBox[0]=0x63;
  woas.AES.aesSBoxInv[0x63]=0;
  for ( i=1; i<256; i++){
    y=woas.AES.aesByteSub(i);
    woas.AES.aesSBox[i]=y; woas.AES.aesSBoxInv[y]=i;
  }

  for (i=0,y=1; i<30; i++){ woas.AES.aesRco[i]=y; y=woas.AES.aesXTime(y); }

  for ( i=0; i<256; i++){
    y = woas.AES.aesSBox[i];
    woas.AES.aesFtable[i] = woas.AES.aesXTime(y) | y<<8 | y<<16 | (y^woas.AES.aesXTime(y))<<24;
    y = woas.AES.aesSBoxInv[i];
    woas.AES.aesRtable[i]= woas.AES.aesMult(14,y) | woas.AES.aesMult(9,y)<<8 |
                  woas.AES.aesMult(13,y)<<16 | woas.AES.aesMult(11,y)<<24;
  }

  woas.AES.aesFi = new Array(12);
  woas.AES.aesRi = new Array(12);

  for (m=j=0;j<4;j++,m+=3){
    woas.AES.aesFi[m]=(j+1)%4;
    woas.AES.aesFi[m+1]=(j+2)%4;
    woas.AES.aesFi[m+2]=(j+3)%4;
    woas.AES.aesRi[m]=(4+j-1)%4;
    woas.AES.aesRi[m+1]=(4+j-2)%4;
    woas.AES.aesRi[m+2]=(4+j-3)%4;
  }

}

// these tables can be static
woas.AES.aesGenTables();

woas.AES["aesInit"] = function(){
  woas.AES.key=woas.AES.key.slice(0,43);
  var i,k,m;
  var j = 0;
  var l = woas.AES.key.length;

  while ( l!=16 && l!=24 && l!=32 && l!=43) woas.AES.key[l++]=woas.AES.key[j++];

  woas.AES.aesNk = woas.AES.key.length >>> 2;
  woas.AES.aesNr = 6 + woas.AES.aesNk;

  var N=4*(woas.AES.aesNr+1);
  woas.AES.aesFkey = new Array(N);
  woas.AES.aesRkey = new Array(N);

  for (i=j=0;i<woas.AES.aesNk;i++,j+=4) woas.AES.aesFkey[i]=woas.AES.getW(woas.AES.key,j);

  for (k=0,j=woas.AES.aesNk;j<N;j+=woas.AES.aesNk,k++){
    woas.AES.aesFkey[j]=woas.AES.aesFkey[j-woas.AES.aesNk]^woas.AES.aesSubByte(woas.AES.rotw(woas.AES.aesFkey[j-1], 24))^woas.AES.aesRco[k];
    if (woas.AES.aesNk<=6)
      for (i=1;i<woas.AES.aesNk && (i+j)<N;i++) woas.AES.aesFkey[i+j]=woas.AES.aesFkey[i+j-woas.AES.aesNk]^woas.AES.aesFkey[i+j-1];
    else{
      for (i=1;i<4 &&(i+j)<N;i++) woas.AES.aesFkey[i+j]=woas.AES.aesFkey[i+j-woas.AES.aesNk]^woas.AES.aesFkey[i+j-1];
      if ((j+4)<N) woas.AES.aesFkey[j+4]=woas.AES.aesFkey[j+4-woas.AES.aesNk]^woas.AES.aesSubByte(woas.AES.aesFkey[j+3]);
      for (i=5;i<woas.AES.aesNk && (i+j)<N;i++) woas.AES.aesFkey[i+j]=woas.AES.aesFkey[i+j-woas.AES.aesNk]^woas.AES.aesFkey[i+j-1];
    }
  }

  for (j=0;j<4;j++) woas.AES.aesRkey[j+N-4]=woas.AES.aesFkey[j];
  for (i=4;i<N-4;i+=4){
    k=N-4-i;
    for (j=0;j<4;j++) woas.AES.aesRkey[k+j]=woas.AES.aesInvMixCol(woas.AES.aesFkey[i+j]);
  }
  for (j=N-4;j<N;j++) woas.AES.aesRkey[j-N+4]=woas.AES.aesFkey[j];
}

woas.AES["aesClose"] = function(){
//  woas.AES.aesFi=woas.AES.aesRi=woas.AES.aesPows=woas.AES.aesLogs=woas.AES.aesSBox=woas.AES.aesSBoxInv=woas.AES.aesRco=woas.AES.aesFtable=woas.AES.aesRtable=null;
  woas.AES.aesFkey=woas.AES.aesRkey=null;
}

woas.AES["aesRounds"] = function( block, key, table, inc, box ){
  var tmp = new Array( 4 );
  var i,j,m,r;

  for ( r=0; r<4; r++ ) block[r]^=key[r];
  for ( i=1; i<woas.AES.aesNr; i++ ){
    for (j=m=0;j<4;j++,m+=3){
      tmp[j]=key[r++]^table[block[j]&0xFF]^
			woas.AES.rotw(table[(block[inc[m  ]]>>> 8)&0xFF], 8)^
			woas.AES.rotw(table[(block[inc[m+1]]>>>16)&0xFF],16)^
			woas.AES.rotw(table[(block[inc[m+2]]>>>24)&0xFF],24);
    }
    var t=block; block=tmp; tmp=t;
  }

  for (j=m=0;j<4;j++,m+=3)
    tmp[j]=key[r++]^box[block[j]&0xFF]^
           woas.AES.rotw(box[(block[inc[m  ]]>>> 8)&0xFF], 8)^
           woas.AES.rotw(box[(block[inc[m+1]]>>>16)&0xFF],16)^
           woas.AES.rotw(box[(block[inc[m+2]]>>>24)&0xFF],24);
  return tmp;
}

woas.AES["_encrypt"] = function(){
  woas.AES.aesUnpackBlock( woas.AES.aesRounds(woas.AES.aesPackBlock(), woas.AES.aesFkey, woas.AES.aesFtable, woas.AES.aesFi, woas.AES.aesSBox ) );
}

woas.AES["_decrypt"] = function(){
  woas.AES.aesUnpackBlock( woas.AES.aesRounds(woas.AES.aesPackBlock(), woas.AES.aesRkey, woas.AES.aesRtable, woas.AES.aesRi, woas.AES.aesSBoxInv ) );
}

// Blockcipher

woas.AES["blcEncrypt"] = function(enc){
  if (woas.AES.tot==0){
//    prgr = name;
    if (woas.AES.key.length<1) return;
    // if (cbc)
    // pre-pend random data to pad length? really?
	for (woas.AES.aes_i=0; woas.AES.aes_i<16; ++woas.AES.aes_i) woas.AES.bData.unshift( _rand(256) );
    while( woas.AES.bData.length%16!=0 ) woas.AES.bData.push(0);
    woas.AES.tot = woas.AES.bData.length;
    woas.AES.aesInit();
  }else{
    // if (cbc)
	for (woas.AES.aes_j=woas.AES.aes_i; woas.AES.aes_j<woas.AES.aes_i+16; woas.AES.aes_j++)
		woas.AES.bData[woas.AES.aes_j] ^= woas.AES.bData[woas.AES.aes_j-16];
    enc();
  }
  if (woas.AES.aes_i>=woas.AES.tot) woas.AES.aesClose();
}

woas.AES["blcDecrypt"] = function(dec){
	// initialize length
  if (woas.AES.tot==0){
//    prgr = name;
    if (woas.AES.key.length<1) return false;
    // if (cbc)
	{ woas.AES.aes_i=16; }
    woas.AES.tot = woas.AES.bData.length;
    if ( (woas.AES.tot%16) || (woas.AES.tot<woas.AES.aes_i) ) {
		log('AES: Incorrect length (tot='+woas.AES.tot+', aes_i='+woas.AES.aes_i+')'); //log:1
		return false;
	}
    woas.AES.aesInit();
  }else{
    // if (cbc)
	woas.AES.aes_i=woas.AES.tot-woas.AES.aes_i;
    dec();
    // if (cbc)
	{
      for (woas.AES.aes_j=woas.AES.aes_i-16; woas.AES.aes_j<woas.AES.aes_i; woas.AES.aes_j++) woas.AES.bData[woas.AES.aes_j] ^= woas.AES.bData[woas.AES.aes_j-16];
      woas.AES.aes_i = woas.AES.tot+32-woas.AES.aes_i;
    }
  }
  if (woas.AES.aes_i>=woas.AES.tot){
    woas.AES.aesClose();
    // if (cbc)
	woas.AES.bData.splice(0,16);
	// remove 0s added for padding (supposedly!)
	while(woas.AES.bData[woas.AES.bData.length-1]==0) woas.AES.bData.pop();
  }
  return true;
}

// sets global key to the utf-8 encoded key (byte array)
woas.AES["setKey"] = function(sKey) {
	woas.AES.key = woas.utf8Encrypt(sKey);
}

woas.AES["clearKey"] = function() {
	woas.AES.key = [];
}

// returns an array of encrypted characters
woas.AES["encrypt"] = function(raw_data) {
	woas.AES.bData = woas.utf8Encrypt(raw_data);
	
	woas.AES.aes_i=woas.AES.tot=0;
	do{ woas.AES.blcEncrypt(woas.AES._encrypt); } while (woas.AES.aes_i<woas.AES.tot);
	
	var rv = woas.AES.bData;
	woas.AES.bData = null;
	return rv;
}

// decrypts an array of encrypted characters
woas.AES["decrypt"] = function(raw_data) {
	woas.AES.bData = raw_data;
	
	woas.AES.aes_i=woas.AES.tot=0;
	do {
		if (!woas.AES.blcDecrypt(woas.AES._decrypt))
			return null;
	} while (woas.AES.aes_i<woas.AES.tot);
	
	woas.AES.sData = woas.utf8Decrypt(woas.AES.bData);
	woas.AES.bData = [];
	var rv = woas.AES.sData;
	woas.AES.sData = null;
	return rv;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** framework.js ***/

//TODO: all variables should stay inside this object
woas["browser"] = { ie: false, ie6: false, ie8: false,
					firefox: false, firefox2: false,
					firefox3: false, firefox_new: false,
					opera: false, safari: false,
					chrome: false
				};

if((navigator.userAgent).indexOf("Opera")!=-1)
	woas.browser.opera = true;
else if (navigator.userAgent.indexOf("Chrome") != -1)
	woas.browser.chrome = true;
else if(navigator.appName == "Netscape") {
	// check that it is Gecko first
	woas.browser.firefox = (new RegExp("Gecko\\/\\d+")).test(navigator.userAgent) ? true : false;
	// match also development versions of Firefox "Shiretoko" / "Namoroka"
	if (woas.browser.firefox) {
		// match the last word of userAgent
		var gecko_ver = navigator.userAgent.match(/rv:(\d+\.\d+)/);
		if (gecko_ver !== null) {
			gecko_ver = gecko_ver[1];
			switch (gecko_ver) {
				case "1.8":
					woas.browser.firefox2 = true;
				break;
				case "1.9":
					woas.browser.firefox3 = true;
				break;
				default:
					// possibly Firefox4
					woas.browser.firefox_new = true;
			}
		}
	} // not Gecko
} else if((navigator.appName).indexOf("Microsoft")!=-1) {
	woas.browser.ie = true;
	woas.browser.ie8 = (navigator.userAgent.search(/msie 8\./i)!=-1);
	if (!woas.browser.ie8)
		woas.browser.ie6 = (navigator.userAgent.search(/msie 6\./i)!=-1);
} else if (navigator.userAgent.indexOf("applewebkit") != -1) {
	woas.browser.safari = true;
}

// finds out if Opera is trying to look like Mozilla
if (woas.browser.firefox && (navigator.product != "Gecko"))
	woas.browser.firefox = woas.browser.firefox2 = woas.browser.firefox3
							woas.browser.firefox_new = false;

// finds out if Opera is trying to look like IE
if (woas.browser.ie && woas.browser.opera)
	woas.browser.ie = false;

var is_windows = (navigator.appVersion.toLowerCase().indexOf("windows")!=-1);

woas["_server_mode"] = (document.location.toString().match(/^file:\/\//) ? false:true);

// set to true if we need Java-based file load/save
woas["use_java_io"] = woas.browser.chrome || woas.browser.opera || woas.browser.safari;

// returns the DOM element object given its id - enables a try/catch mode when debugging
if (woas.config.debug_mode) {
	// returns the DOM element object given its id, alerting if the element is not found (but that would never happen, right?)
	function $(id){ try{return document.getElementById(id);}catch(e){alert("ERROR: $('"+id+"') invalid reference");} }
} else {
	// much faster version
	function $(id){return document.getElementById(id);}
}

$["hide"] = function(id) {
	$(id).style.display = "none";
	$(id).style.visibility = "hidden";
}

$["show"] = function(id) {
	$(id).style.display = "inline";
	$(id).style.visibility = "visible";
}

$["hide_ni"] = function(id) {
	$(id).style.visibility = "hidden";
}

$["show_ni"] = function(id) {
	$(id).style.visibility = "visible";
}

$["is_visible"] = function(id) {
	return !!($(id).style.visibility == 'visible');
}

$["toggle"] = function(id) {
	if ($.is_visible(id))
		$.hide(id);
	else
		$.show(id);
}

$["clone"] = function(obj) {
	var nobj = {};
	for (var i in obj) {
		nobj[i] = obj[i];
	}
	return nobj;
}

// logging function has not to be in WoaS object
var log;
if (woas.config.debug_mode) {
	// logging function - used in development
	log = function (aMessage) {
	    var logbox = $("woas_log");
	    // count lines
		nls = logbox.value.match(/\n/g);
		// log maximum 1024 lines
		if (nls!=null && typeof(nls)=='object' && nls.length>1024)
			logbox.value = "";
		logbox.value += aMessage + "\n";
		if(window.opera)
			opera.postError(aMessage);
	};
} else {
	log = function(aMessage) { };
}

// fixes the Array prototype for older browsers
if (typeof Array.prototype.push == "undefined") {
  Array.prototype.push = function(str) {
    this[this.length] = str;
  }
}

// the following methods complete the Array object for non-compliant browsers
if (typeof Array.prototype.splice == "undefined") {
  Array.prototype.splice = function(offset, length) {
    var temp = [];
    for (var i = this.length - 1; i >= 0; i--) {
      if (i < offset || i > (offset + length - 1)) {
        temp[temp.length] = this[i];
      }
      this.length--;
    }
    for (i = temp.length - 1; i >= 0; i--) {
      this[this.length] = temp[i];
    }
    return this;
  }
}

if (typeof Array.prototype.indexOf == "undefined") {
	Array.prototype.indexOf = function(val, fromIndex) {
		if (typeof(fromIndex) != 'number') fromIndex = 0;
		for (var index = fromIndex,len = this.length; index < len; index++)
			if (this[index] == val) return index;
		return -1;
	}
}

// implements a custom function which returns an array with unique elements - deprecated
Array.prototype.toUnique = function() {
	var a_o = {}, new_arr = [];
	var l=this.length;
	for(var i=0; i<l;i++) {
		if (a_o[this[i]]==null) {
			a_o[this[i]] = true;
			new_arr.push(this[i]);
		}
	}
	if (new_arr.length!=l)
		return new_arr;
	return this;
}

// provide regex escaping
// thanks to S.Willison
RegExp.escape = function(text) {
  if (!arguments.callee.sRE) {
    var specials = ['/', '.', '*', '+', '?', '|', '$', '(', ')', '[', ']', '{', '}', '\\' ];
    arguments.callee.sRE = new RegExp(
      '(\\' + specials.join('|\\') + ')', 'g'
    );
  }
  return text.replace(arguments.callee.sRE, '\\$1');
}

// repeat string s for n times
 if (typeof String.prototype.repeat == "undefined") {
	String.prototype.repeat = function(n) {
		var r = "";
		while (--n >= 0) r += this;
		return r;
	}
}

// return a random integer given the maximum value (scale)
function _rand(scale) {
	return Math.floor(Math.random() * scale);
}

// returns a random string of given string_length
function _random_string(string_length) {
	var chars = "ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
	var randomstring = '';
	for (var i=0; i<string_length; i++) {
		var rnum = _rand(chars.length);
		randomstring += chars.charAt(rnum);
	}
	return randomstring;
}

// converts the number of bytes to a human readable form
function _convert_bytes(bytes) {
	var U=['bytes','Kb','Mb','Gb','Pb'];
	var n=0;
	bytes=Math.ceil(bytes);
	while(bytes>=1024) {
		 ++n;
		 bytes /= 1024;
	}
	return bytes.toFixed(2).replace(/\.00$/, "") +' '+ U[n];
}

// implement an sprintf() bare function
String.prototype.sprintf = function() {
	// check that arguments are OK
	if (typeof arguments == "undefined") { return null; }
	// next argument to pick
	var i_pos = 0, max_pos = arguments.length - 1;
	var fmt_args = arguments;
	return this.replace(/%[sd]/g, function(str) {
		// replace with the original unparsed token in case of undefined parameter
		if (i_pos > max_pos)
			return str;
/*		if (str == '%d')
			return Number(arguments[i_pos++]); */
		// return '%s' string
		return fmt_args[i_pos++];
	});
}

// get filename of currently open file in browser
function _get_this_filename() {
	var filename = unescape(document.location.toString().split("?")[0]);
	if (woas.browser.opera)
		filename = filename.replace(/^file:\/\/[^\/]+/, '');
	else {
		if (filename.indexOf("file://") === 0) // all browsers
			filename = filename.substr(7);
		if (filename.indexOf("///")===0) // firefox
			filename = filename.substr(1);
	}
	//TODO: check that 'g' can be removed
	filename = filename.replace(/#.*$/g, ""); // remove fragment (if any)
	if (is_windows) {
		// convert unix path to windows path
		filename = filename.replace(/\//g, "\\");
		if (filename.substr(0,2)!="\\\\") { // if this is not a network path - will be true in case of Firefox for example
			// remove leading slash before unit:
			if (filename.match(/^\\\w:\\/))
				filename = filename.substr(1);
			if (filename.charAt(1)!=':') {
				if (woas.browser.ie)
					filename = "\\\\"+filename;
			}
		}
	}
	return filename;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** loadsave.js ***/

// load modes which should be supported
woas["file_mode"] = {
	UTF8_TEXT:		0,
	ASCII_TEXT:		1,
	DATA_URI:		2,
	BINARY:			3,
	BASE64:			4
}

// save the currently open WoaS
function _saveThisFile(new_data, old_data) {
	var filename = _get_this_filename();
	
	r = woas.save_file(filename, woas.file_mode.ASCII_TEXT,
	woas.DOCTYPE + woas.DOC_START +
	"<sc"+"ript type=\"text/javascript\">" + new_data + "\n" + old_data + "</html>");
	if (r==true)
		log("\""+filename+"\" saved successfully");	// log:1
	else {
		var msg = woas.i18n.SAVE_ERROR.sprintf(filename) + "\n\n";
		if (this.use_java_io) {
			// try to understand what went bad with Java
			if (typeof document.applets["TiddlySaver"] == "undefined")
				msg += this.i18n.NO_TIDDLY_SAVER+" "+TIDDLY_HELP;
			else if (typeof java == "undefined")
				msg += this.i18n.NO_JAVA+" "+TIDDLY_HELP;
			else
				msg += this.i18n.UNSPECIFIED_JAVA_ERROR;
		} else
			msg += woas.i18n.UNSUPPORTED_BROWSER.sprintf(navigator.userAgent);
		this.alert(msg);
	}
	return r;
}

//API1.0: save-file handler
woas["save_file"] = function(fileUrl, save_mode, content) {
//	log("javaSaveFile(\""+fileUrl+"\", "+save_mode+", ...("+content.length+" bytes)...)");	//log:0
	var r = null;
	if (!this.use_java_io) {
		r = this.mozillaSaveFile(fileUrl, save_mode, content);
		if((r == null) || (r == false))
			r = this.ieSaveFile(fileUrl, save_mode, content);
		// fallback to try also with Java saving
	} else
		return this.javaSaveFile(fileUrl, save_mode, content);
	if((r == null) || (r == false))
		r = this.javaSaveFile(fileUrl, save_mode, content);
	return r;
}

// get file content in FF3 without .enablePrivilege() (fbnil)
woas["mozillaLoadFileID"] = function(obj_id, load_mode, suggested_mime) {
	var obj = document.getElementById(obj_id);
	if(!window.Components || !obj.files)
		return null;
	var D=obj.files.item(0);
	if (D === null)
		return false;
	switch (load_mode) {
		case this.file_mode.DATA_URI:
			if (typeof "suggested_mime" != "string")
				return D.getAsDataURL();
			else // apply mime override
				return D.getAsDataURL().replace(/^data:(\s*)([^;]*)/, "data:$1"+suggested_mime);
		break;
		case this.file_mode.BASE64:
			// remove the data: part
			return D.getAsDataURL().replace(/^data:\s*([^;]*);\s*base64,\s*/, '');
		break;
		case this.file_mode.BINARY:
			return D.getAsBinary();
		break;
	}
	// case UTF8_TEXT:
	// case ASCII_TEXT:
	// return UTF-8 text by default
	return D.getAsText("utf-8");
}

// *** original source of below functions was from TiddyWiki ***

// API1.0: load-file handler
woas["load_file"] = function(fileUrl, load_mode, mime){
	// parameter consistency check
	if (!load_mode)
		// perhaps should be ASCII?
		load_mode = this.file_mode.UTF8_TEXT;
	// try loading the file without using the path (FF3+)
	// (object id hardcoded here)
	var r = null;
	if (!this.use_java_io) {
		// correctly retrieve fileUrl
		if (fileUrl === null) {
			if (this.browser.firefox3 || this.browser.firefox_new)
				r = this.mozillaLoadFileID("filename_", load_mode, mime);
			else
				fileUrl = this.get_input_file_url();
		}
		if (r === null) // load file using file absolute path
			r = this.mozillaLoadFile(fileUrl, load_mode, mime);
		else return r;
		if(r === false)
			return false;
		// no mozillas here, attempt the IE way
		if (r === null)
			r = this.ieLoadFile(fileUrl, load_mode, mime);
		else return r;
		if (r === false)
			return false;
//		if (r === null)
			// finally attempt to use Java
//			r = this.javaLoadFile(fileUrl, load_mode);
	} else {
		if (fileUrl === null)
			fileUrl = this.get_input_file_url();
		if (fileUrl === false)
			return false;
		r = this.javaLoadFile(fileUrl, load_mode, mime);
	}
	if (r === false)
		return false;
	if (r === null) {
		this.alert('Could not load "'+fileUrl+'"');
		return null;
	}
	// wow, java worked!
	return r;
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
woas["ieSaveFile"] = function(filePath, save_mode, content) {
	var s_mode;
	switch (save_mode) {
		case this.file_mode.BINARY:
		case this.file_mode.ASCII_TEXT:
			s_mode = 0; // ASCII
		break;
		case this.file_mode.UTF8_TEXT:
		default:
			// Unicode mode used for DATA_URI and UTF8_TEXT modes
			s_mode = -1;
		break;
	}
	// first let's see if we can do ActiveX
	var fso;
	try	{
		fso = new ActiveXObject("Scripting.FileSystemObject");
	}
	catch (e) {
		return null;
	}
	try {
		var file = fso.OpenTextFile(filePath, 2, true, s_mode);
		file.Write(content);
		file.Close();
	}
	catch(e) {
		log("Exception while attempting to save: " + e.toString());	// log:1
		return false;
	}
	return(true);
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
woas["ieLoadFile"] = function(filePath, load_mode, suggested_mime) {
	var o_mode;
	switch (load_mode) {
		case this.file_mode.BINARY:
		case this.file_mode.ASCII_TEXT:
			o_mode = 0; // ASCII
		break;
		case this.file_mode.UTF8_TEXT:
		default:
			// Unicode mode used for DATA_URI and UTF8_TEXT modes
			o_mode = -1;
		break;
	}
	var content = null;
	// first let's see if we can do ActiveX
	var fso;
	try	{
		fso = new ActiveXObject("Scripting.FileSystemObject");
	}
	catch (e) {
		return null;
	}
	try {
		// attempt to open as unicode
		var file = fso.OpenTextFile(filePath,1,false,o_mode);
		var content = file.ReadAll();
		file.Close();
	}
	catch(e) {
		log("Exception while attempting to load\n\n" + e.toString());	// log:1
		return false;
	}
	// return a valid DATA:URI
	if (load_mode == this.file_mode.DATA_URI)
		return this._data_uri_enc(filePath, content, suggested_mime);
	else if (load_mode == this.file_mode.BASE64)
		return encode64(content);
	// fallback for UTF8_TEXT
	return(content);
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
woas["mozillaSaveFile"] = function(filePath, save_mode, content) {
	if (!window.Components)
		return null;
	//FIXME: save_mode is not considered here
	try	{
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
		file.initWithPath(filePath);
		if (!file.exists())
			file.create(0, 0664);
		else
			log("File \""+filePath+"\" exists, overwriting");	// log:1
		var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
		out.init(file, 0x08 | 0x20 | 0x02, 0700, 0);
		out.write(content, content.length);
		out.flush();
		out.close();
	}
	catch(e) {
		log("Exception while attempting to save\n\n" + e);	// log:1
		return(false);
	}
	return(true);
}

// Returns null if it can't do it, false if there's an error, or a string
// with the content if successful
woas["mozillaLoadFile"] = function(filePath, load_mode, suggested_mime) {
	// this is available on Mozilla browsers only
	if (!window.Components)
		return null;
	try	{
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
		var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
		file.initWithPath(filePath);
		if (!file.exists()) {
			log("Unexisting file "+filePath);
			return false;
		}
		var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
		inputStream.init(file, 0x01, 00004, 0);
		var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
		sInputStream.init(inputStream);
		if ( (load_mode == this.file_mode.UTF8_TEXT) ||
			 (load_mode == this.file_mode.ASCII_TEXT))
			return sInputStream.read(sInputStream.available());
		// this byte-by-byte read allows retrieval of binary files
		var tot=sInputStream.available(), i=tot;
		var rd=[];
		while (i-->=0) {
			var c=sInputStream.read(1);
			rd.push(c.charCodeAt(0));
		}
		if (load_mode == this.file_mode.BINARY)
				return(this.merge_bytes(rd));
		else if (load_mode == this.file_mode.DATA_URI)
			return this._data_uri_enc(filePath, this.merge_bytes(rd), suggested_mime);
		else if (load_mode == this.file_mode.BASE64)
			return encode64_array(rd);
	}
	catch(e) {
		log("Exception while attempting to load\n\n" + e);	// log:1
	}
	return false;
}

// creates a DATA:URI from a plain content stream
woas["_data_uri_enc"] = function(filename, ct, guess_mime) {
	if (typeof guess_mime != "string") {
		var m=filename.match(/\.(\w+)$/);
		if (m==null) m = "";
		else m=m[1].toLowerCase();
		guess_mime = "image";
		switch (m) {
			case "png":
				guess_mime = "image/png";
			break;
			case "gif":
				guess_mime = "image/gif";
				break;
			case "jpg":
			case "jpeg":
				guess_mime = "image/jpeg";
				break;
		}
	}
	// perform base64 encoding
	return "data:"+guess_mime+";base64,"+encode64(ct);
}

function _javaUrlToFilename(url) {
/*	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	if(i > 0)
		return url.substring(i-1); */
	return url;
}

//FIXME: save_mode is not considered here
woas["javaSaveFile"] = function(filePath,save_mode,content) {
	if ((save_mode != this.file_mode.ASCII_TEXT) && (save_mode != this.file_mode.UTF8_TEXT)) {
		log("Only ASCII and UTF8 file modes are supported with Java/TiddlySaver");
		return false;
	}
	try {
		if(document.applets["TiddlySaver"])
			return document.applets["TiddlySaver"].saveFile(_javaUrlToFilename(filePath),"UTF-8",content);
	} catch(ex) {
		// ok TiddlySaver applet not available, check next method
	}
	// check if no JRE is available
	if (typeof java == "undefined")
		return null;
	// try reading the file via java
	try {
		var s = new java.io.PrintStream(new java.io.FileOutputStream(_javaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	} catch(ex) {
		log(ex.toString());
		return false;
	}
	return true;
}

woas["javaLoadFile"] = function(filePath, load_mode, suggested_mime) {
	//FIXME: UTF8_TEXT/BINARY is not separated here!!
	var content = null;
	try {
		if(document.applets["TiddlySaver"]) {
			content = document.applets["TiddlySaver"].loadFile(_javaUrlToFilename(filePath), "UTF-8");
			if (content === null) {
				// file does not exist
				return false;
			}
			// convert to string only after checking that it was successfully loaded
			content = String(content);
			if (load_mode == this.file_mode.DATA_URI)
				return this._data_uri_enc(filePath, content, suggested_mime);
			else if (load_mode == this.file_mode.BASE6)
				return encode64(content);
			return content;
		}
	} catch(ex) {
		// ok TiddlySaver applet not available, check next method
//		log("TiddlySaver not working: "+e)
	}
	// check if no JRE is available
	if (typeof java == "undefined")
		return null;
	var a_content = [];
	try {
		var r = new java.io.BufferedReader(new java.io.FileReader(_javaUrlToFilename(filePath)));
		var line;
		while((line = r.readLine()) != null)
			a_content.push(new String(line));
		r.close();
	} catch(ex) {
		log("Exception in javaLoadFile(\""+filePath+"\"): "+ex)
		return false;
	}
	// re-normalize input
	content = a_content.join("\n");
	if (load_mode == this.file_mode.DATA_URI)
		return this._data_uri_enc(filePath, content, suggested_mime);
	else if (load_mode == this.file_mode.BASE64)
		return encode64(content);
	return content;
}

function printout_arr(arr, split_lines) {

	function elem_print(e) {
		return "'" + woas.js_encode(e, split_lines) + "'";
	}

	var s = "";
	for(var i=0;i<arr.length-1;i++) {
		s += elem_print(arr[i]) + ",\n";
	}
	if (arr.length>1)
		s += elem_print(arr[arr.length-1]) + "\n";
	return s;
}

function printout_mixed_arr(arr, split_lines, attrs) {

	function elem_print(e, attr) {
		if (attr & 2) {
			return "[" + printout_num_arr(e) + "]";
		}
		return "'" + woas.js_encode(e, split_lines) + "'";
	}

	var s = "";
	for(var i=0;i<arr.length-1;i++) {
		s += elem_print(arr[i], attrs[i]) + ",\n";
	}
	if (arr.length>1)
		s += elem_print(arr[arr.length-1], attrs[arr.length-1]) + "\n";
	return s;
}

// used to print out encrypted page bytes and attributes
function printout_num_arr(arr) {
	var s = "";
	for(var i=0;i<arr.length-1;i++) {
		if (arr[i]>=1000)
			s += "0x"+arr[i].toString(16) + ",";
		else
			s+=arr[i].toString() + ",";
	}
	// do not write comma on last element, workaround due to IE6 not recognizing it
	if (arr.length>1) {
		if (arr[arr.length-1]>=1000)
			s += "0x"+arr[arr.length-1].toString(16);
		else
			s+=arr[arr.length-1].toString();
	}

	return s;
}

function printout_fixed(elem, n) {
	var s = (elem+",").repeat(n-1);
	// do not write comma on last element, workaround due to IE6 not recognizing it
	if (n>1)
		s += elem;
	return s;
}

// save full WoaS to file
woas["_save_to_file"] = function(full) {
	this.progress_init("Saving to file");
	
	var new_marker;
	if (full) {
		new_marker = _inc_marker(__marker);
	} else new_marker = __marker;
	
	// setup the page to be opened on next start
	var safe_current;
	if (this.config.open_last_page) {
		if (!this.page_exists(current)) {
			safe_current = this.config.main_page;
		} else safe_current = current;
	} else
		safe_current = this.config.main_page;
	
	// output the javascript header and configuration flags
	var computed_js = "\n/* <![CDATA[ */\n\n/* "+new_marker+"-START */\n\nvar woas = {\"version\": \""+this.version+
	"\"};\n\nvar __marker = \""+new_marker+"\";\n\nwoas[\"config\"] = {";
	for (param in this.config) {
		computed_js += "\n\""+param+"\":";
		switch(typeof(this.config[param])) {
			case "boolean":
				computed_js += (this.config[param] ? "true" : "false")+",";
			break;
			case "string":
				computed_js += "'"+this.js_encode(safe_current)+"',";
			break;
			default: // for numbers
				computed_js += this.config[param]+",";
			break;
		}
	}
	computed_js = computed_js.substr(0,computed_js.length-1);
	computed_js += "};\n";
	
	computed_js += "\nvar current = '" + this.js_encode(safe_current)+"';\n\n";
	
	computed_js += "var backstack = [\n" + printout_arr(backstack, false) + "];\n\n";
	
	// in native WSIF mode we will save empty arrays

	if (this.tweak.native_wsif)
		computed_js += "var page_titles = [\n];\n\n";
	else
		computed_js += "var page_titles = [\n" + printout_arr(page_titles, false) + "];\n\n";
	
	computed_js += "/* " + new_marker + "-DATA */\n";
	
	if (full) {
		if (this.tweak.native_wsif) {
			// everything empty when the javascript layer is not used
			computed_js += "var page_attrs = [];\n\n";
			computed_js += "var page_mts = [];\n\n";
			computed_js += "var pages = [\n];\n\n";
		} else {
			computed_js += "var page_attrs = [" + printout_num_arr(page_attrs) + "];\n\n";
			computed_js += "var page_mts = [" + printout_num_arr(page_mts) + "];\n\n";
			computed_js += "var pages = [\n" + printout_mixed_arr(pages, this.config.allow_diff, page_attrs) + "];\n\n";
		}
		computed_js += "/* " + new_marker + "-END */\n";
	}

	// cleanup the DOM before saving
	var bak_ed = $("wiki_editor").value;
	var bak_tx = $("wiki_text").innerHTML;
	var bak_mn = $("menu_area").innerHTML;
	var bak_mts = $("wiki_mts").innerHTML;
	var bak_mts_shown = $.is_visible("wiki_mts");
	var bak_wait_text = this.getHTML($("woas_wait_text"));

	if (bak_mts_shown)
		$.hide("wiki_mts");
	$("wiki_editor").value = "";
	$("wiki_text").innerHTML = "";
	$("menu_area").innerHTML = "";
	$("wiki_mts").innerHTML = "";

	this._clear_swcs();
	this._clear_bs();

	this.setHTML($("woas_wait_text"), "");
	var bak_cursor = document.body.style.cursor;
	document.body.style.cursor = "auto";
	
	var data = _get_data(__marker, document.documentElement.innerHTML, full);
	
	this.setHTML($("woas_wait_text"), bak_wait_text);
	document.body.style.cursor = bak_cursor;

	var r=false;
//	if (!this.config.server_mode || (was_local && this.config.server_mode)) {
	if (!this._server_mode)
		r = _saveThisFile(computed_js, data);
//		was_local = false;
//	}

	// save was successful - trigger some events
	if (r) {
		this.after_config_saved();
		if (full)
			this.after_pages_saved();
	}

	
	$("wiki_editor").value = bak_ed;
	$("wiki_text").innerHTML = bak_tx;
	$("menu_area").innerHTML = bak_mn;
	$("wiki_mts").innerHTML = bak_mts;
	if (bak_mts_shown)
		$.show("wiki_mts");
	
	this._create_bs();
	
	this.progress_finish();
	
	return r;
}

function _get_data(marker, source, full, start) {
	var offset;
	// always find the end marker to make the XHTML fixes
	offset = source.indexOf("/* "+marker+ "-END */");
	if (offset == -1) {
		this.alert(woas.i18n.ERR_MARKER.sprintf("END"));
		return false;
	}			
	offset += 6 + 4 + marker.length + 2;
	
	// IE ...
	var body_ofs;
	var re = new RegExp("<\\/"+"head>", "i");
	var m = re.exec(source);
	if (m != null)
		body_ofs = m.index;
	else
		body_ofs = -1;
	if (body_ofs != -1) {
		// XHTML hotfixes (FF doesn't either save correctly)
		source = source.substring(0, body_ofs) + source.substring(body_ofs).
				replace(/<(img|hr|br|input|meta)[^>]*>/gi, function(str, tag) {
					var l=str.length;
					if (str.charAt(l-1)!='/')
						str = str.substr(0, l-1)+" />";
					return str;
		});
		// remove the tail (if any)
		var s_offset = source.indexOf("<"+"!-- "+marker+"-TAIL-START -->"),
			s_te = "<"+"!-- "+marker+"-TAIL-END -->";
		if (s_offset != -1) {
			var e_offset = source.indexOf(s_te, s_offset);
			if (e_offset == -1)
				log("Cannot find tail end!");
			else {
				// remove the tail
				source =	source.substring(0, s_offset)+
							source.substring(e_offset+s_te.length);
			}
		}
	}
	
	if (full) {
		// offset was previously calculated
		if (start) {
			var s_offset = source.indexOf("/* "+marker+ "-START */");
			if (s_offset == -1) {
				this.alert(woas.i18n.ERR_MARKER.sprintf("START"));
				return false;
			}
			return source.substring(s_offset, offset);
		}
	} else {
		offset = source.indexOf("/* "+marker+ "-DATA */");
		if (offset == -1) {
			this.alert(woas.i18n.ERR_MARKER.sprintf("DATA"));
			return false;
		}
		offset += 6 + 5 + marker.length + 1;
	}
	return source.substring(offset);
}

// increment the save-counter portion of the marker
function _inc_marker(old_marker) {
	var m = old_marker.match(/([^\-]*)\-(\d{7,7})$/);
	if (m==null) {
		return _random_string(10)+"-0000001";
	}
	var n = new Number(m[2].replace(/^0+/, '')) + 1;
	n = n.toString();
	// marker part + 0-padded save count number
	return m[1]+"-"+String("0").repeat(7-n.length)+n;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** base64.js ***/
var _b64arr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

function _core_encode64(c1, c2, c3) {
	var enc1, enc2, enc3, enc4;
	
	enc1 = c1 >> 2;
	enc2 = ((c1 & 3) << 4) | (c2 >> 4);
	enc3 = ((c2 & 15) << 2) | (c3 >> 6);
	enc4 = c3 & 63;

	if (isNaN(c2))	enc3 = enc4 = 64;
	else if (isNaN(c3))
		enc4 = 64;

	return _b64arr.charAt(enc1) + _b64arr.charAt(enc2) + _b64arr.charAt(enc3) +	_b64arr.charAt(enc4);
}

function encode64_array(input_arr) {
	var c1, c2, c3, i = 0, z = input_arr.length;
	var output = "";
	
	do {
		c1 = input_arr[i++];
		if (i == z)
			c3 = c2 = null;
		else {
			c2 = input_arr[i++];
			if (i == z)
				c3 = null;
			else
				c3 = input_arr[i++];
		}
		output += _core_encode64(c1, c2, c3);
	} while (i < z);
	return output;
}


function encode64(input) {
	var c1, c2, c3, i = 0, z = input.length;
	var output = "";
	
	do {
		c1 = input.charCodeAt(i++);
		c2 = input.charCodeAt(i++);
		c3 = input.charCodeAt(i++);
		
		output += _core_encode64(c1, c2, c3);
	} while (i < z);
	return output;
}

function decode64(input, z) {
	var c1, c2, c3, enc1, enc2, enc3, enc4, i = 0;
	var output = "";
	
	var l=input.length;
	if (typeof z=='undefined') z = l;
	else if (z>l) z=l;

	do {
		enc1 = _b64arr.indexOf(input.charAt(i++));
		enc2 = _b64arr.indexOf(input.charAt(i++));
		enc3 = _b64arr.indexOf(input.charAt(i++));
		enc4 = _b64arr.indexOf(input.charAt(i++));

		c1 = (enc1 << 2) | (enc2 >> 4);
		c2 = ((enc2 & 15) << 4) | (enc3 >> 2);
		c3 = ((enc3 & 3) << 6) | enc4;

		output += String.fromCharCode(c1);
		if (enc3 != 64)
			output += String.fromCharCode(c2);
		if (enc4 != 64)
			output += String.fromCharCode(c3);

	} while (i < z);

	return output;
}

function decode64_array(input, z) {
	var c1, c2, c3, enc1, enc2, enc3, enc4, i = 0;
	var output = [];
	
	var l=input.length;
	if (typeof z=='undefined') z = l;
	else if (z>l) z=l;

	do {
		enc1 = _b64arr.indexOf(input.charAt(i++));
		enc2 = _b64arr.indexOf(input.charAt(i++));
		enc3 = _b64arr.indexOf(input.charAt(i++));
		enc4 = _b64arr.indexOf(input.charAt(i++));

		c1 = (enc1 << 2) | (enc2 >> 4);
		c2 = ((enc2 & 15) << 4) | (enc3 >> 2);
		c3 = ((enc3 & 3) << 6) | enc4;

		output.push(c1);
		if (enc3 != 64)
			output.push(c2);
		if (enc4 != 64)
			output.push(c3);
	} while (i < z);
	return output;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** parser.js ***/

woas["parser"] = {
	"has_toc":null,
	"toc":"",
	"force_inline":false,		// used not to break layout when presenting search results
	"script_extension":[]		// external javascript files to be loaded
};

woas.parser["header_anchor"] = function(s) {
	// apply a hard normalization
	// WARNING: will not preserve header ids uniqueness
	return s.replace(/[^a-zA-Z0-9]/g, '_');
}

//DEPRECATED "!" syntax is supported but shall me removed soon
var reParseHeaders = /^([\!=]+)\s*(.*)$/gm;
woas.parser["header_replace"] = function(str, $1, $2) {
		var header = $2;
		var len = $1.length;
		// remove the mirrored header syntax from right
		var hpos = header.indexOf($1);
		if ((hpos != -1) && (hpos==header.length - len))
			header = header.substring(0, header.length - len);
		// automatically build the TOC if needed
		len = $1.length;
		if (woas.parser.has_toc) {
			woas.parser.toc += String("#").repeat(len)+" <a class=\"link\" href=\"#" +
			woas.parser.header_anchor(header) + "\">" + header + "<\/a>\n";
		}
		return "</div><h"+len+" id=\""+woas.parser.header_anchor(header)+"\">"+header+"</h"+len+"><div class=\"level"+len+"\">";
}

woas.parser["sublist"] = function (lst, ll, suoro, euoro) {   
	if (!lst.length)
		return '';
	
	if (lst[0][1].length > ll)
		return this.sublist(lst, ll+1, suoro, euoro);
	
	var item, subl;
	var s = '';
	while (lst[0][1].length == ll ) {
                item = lst.shift();
                subl = this.sublist(lst, ll + 1, suoro, euoro);
                if (subl.length)
                    s += '<li>' + item[2] + suoro + subl + euoro + '</li>' ;
                else
                    s += '<li>' + item[2] + '</li>';
		if (!lst.length)
			break;
	}
	return s;  
}

// XHTML lists and tables parsing code by plumloco
// This is a bit of a monster, if you know an easier way please tell me!
// There is no limit to the level of nesting and it produces
// valid xhtml markup.
var reReapLists = /^([\*#@])[ \t].*(?:\n\1+[ \t].+)*/gm;
var reItems = /^([\*#@]+)[ \t]([^\n]+)/mg;
woas.parser["parse_lists"] = function(str, type, $2) {
        var uoro = (type!='*')?'ol':'ul';
        var suoro = '<' + uoro + ((type=='@') ? " type=\"a\"":"")+'>';
        var euoro = '</' + uoro + '>';

		// collect all items in a stack
		var stk = [];
	    str.replace( reItems, function(str, p1, p2) {
			stk.push([str, p1, p2]);
		} );

		return suoro + woas.parser.sublist(stk, 1, suoro, euoro) + euoro;
	}

var reReapTables = /^\{\|.*((?:\n\|.*)*)$/gm;
var reReapTableRows = /\n\|([+ -])(.*)/g;
woas.parser["parse_tables"] =  function (str, p1) {
        var caption = false;
        var stk = [];
        p1.replace(reReapTableRows, function(str, pp1, pp2) {
                if (pp1 == '-')
                    return;
                if (pp1 == '+') {
                    caption = caption || pp2;
                    return;
                }
                stk.push('<td>' + pp2.split('||').join('</td><td>') + '</td>');
            } 
        );
        return  '<table class="woas_text_area">' +
                    (caption?('<caption>' + caption + '</caption>'):'') +
                    '<tr>' + stk.join('</tr><tr>') + '</tr>' +
                '</table>' 
    }

var	parse_marker = "#"+_random_string(8);

// extract the wiki tags from a wiki URL
woas["_get_tags"] = function(text) {
	var tags = [];
	// remove the starting part
	if (text.indexOf("Tag::")==0)
		text = this.trim(text.substring(5));
	else if (text.indexOf("Tags::")==0)
		text = this.trim(text.substring(6));
	else // not a valid tagging
		return tags;
	// check length only after having removed the part we don't need
	if (!text.length)
		return tags;
	var alltags = this.split_tags(text);
	for(var i=0;i<alltags.length;i++) {
		tags.push(this.trim(alltags[i]));
	}
	return tags;
}

// split one or more tags
// note: no trim applied
woas["split_tags"] = function(tlist) {
	var alltags;
	if (tlist.indexOf("|")!=-1)
		return tlist.split("|");
	else //DEPRECATED
		return tlist.split(",");
}

var reScripts = /<script([^>]*)>([\s\S]*?)<\/script>/gi;
var reStyles = /<style([^>]*)>[\s\S]*?<\/style>/gi;
var reNowiki = /\{\{\{([\s\S]*?)\}\}\}/g;
var reTransclusion = /\[\[Include::([\s\S]+?)\]\]/g;
var reMacros = /<<<([\s\S]*?)>>>/g;
var reComments = /<\!--([\s\S]*?)-->/g;
var reWikiLink = /\[\[([^\]\]]*?)\|(.*?)\]\]/g;
var reWikiLinkSimple = /\[\[([^\]]*?)\]\]/g;

var _MAX_TRANSCLUSION_RECURSE = 256;

woas.parser["place_holder"] = function (i, separator) {
	if (typeof separator == "undefined")
		separator = "";
	separator = ":"+separator+":";
	return "<!-- "+parse_marker+separator+i+" -->";
}

// THIS is the method that you should override for your custom parsing needs
// text is the raw wiki source
// export_links is set to true when exporting wiki pages and is used to generate proper href for hyperlinks
// js_mode can be 0 = leave script tags as they are (for exporting), 1 - place script tags in <head /> (dynamic),
//		2 - re-add script tags after parsing
woas.parser["parse"] = function(text, export_links, js_mode) {
	if (woas.config.debug_mode) {
		if (text===null) {
			log("Called parse() with null text!");	// log:1
			return null;
		}
	}
	// default fallback
	if (typeof export_links == "undefined") {
		export_links = false;
		js_mode=1;
	}
	
	// this array will contain all the HTML snippets that will not be parsed by the wiki engine
	var snippets = [], comments = [];
	
	// put away comments
	text = text.replace(reComments, function (str, comment) {
		// skip whitespace comments
		if (comment.match(/^\s+$/))
			return str;
		var r = woas.parser.place_holder(comments.length, "c");
		comments.push(str);
		return r;
	});

	// put away stuff contained in inline nowiki blocks {{{ }}}
	text = text.replace(reNowiki, function (str, $1) {
		var r = woas.parser.place_holder(snippets.length);
		if (comments.length) {
			$1 = $1.replace(new RegExp("<\\!-- "+parse_marker+":c:(\\d+) -->", "g"), function (str, $1) {
				var c=comments[$1];
				comments[$1] = "";
				return c
			});
		}
		snippets.push("<tt class=\"wiki_preformatted\">"+woas.xhtml_encode($1)+"</tt>");
		return r;
	});
	
	// transclude pages (templates)
	if (!this.force_inline) {
		var trans_level = 0;
		do {
			var trans = 0;
			text = text.replace(reTransclusion, function (str, $1) {
				var parts = $1.split("|");
				var templname = parts[0];
//				log("Transcluding "+templname+"("+parts.slice(0).toString()+")");	// log:0
				// in case of embedded file, add the inline file or add the image
				var is_emb, templtext, ns=woas.get_namespace(templname, true);
				if ((ns == "File::") || (ns == "Image::")) {
					var epi = woas.page_index(templname);
					// offer a link for uploading, to implement feature as before 0.11.0
					if (epi == -1) {
						templtext = "[<!-- -->[Include::[["+templname+"]]]]";
						is_emb = false;
					} else {
						templtext = woas.get__text(epi);
						is_emb = true;
					}
				} else {
					templtext = woas.get_text_special(templname);
					if (templtext !== null)
						is_emb = !woas.is_reserved(templname) && woas.is_embedded(templname);
				}
				if (templtext === null) {
					var templs="[["+templname+"]]";
					if (parts.length>1)
						templs += "|"+parts.slice(1).join("|");
					var r = woas.parser.place_holder(snippets.length);
					snippets.push(woas.parser.render_error(str));
					return r;
				}
				if (is_emb) {
					var r = woas.parser.place_holder(snippets.length);
//					log("Embedded file transclusion: "+templname);	// log:0
					if (woas.is_image(templname)) {
						var img, img_name = woas.xhtml_encode(templname.substr(templname.indexOf("::")+2));
						if (export_links) {
							// check that the URI is valid
							var uri=woas._export_get_fname(templname);
							if (uri == '#')
								//img = '<!-- missing image '+img_name+' -->';
								img = woas.parser.render_error(templname);
							else
								img = "<img class=\"embedded\" src=\""+uri+"\" alt=\""+img_name+"\" ";
						} else
							img = "<img class=\"embedded\" src=\""+templtext+"\" ";
						if (parts.length>1) {
							img += parts[1];
							// always add the alt attribute to images
							if (!export_links && !parts[1].match(/alt=('|").*?\1/))
								img += " alt=\""+img_name+"\"";
						}
						snippets.push(img+" />");
					} else { // embedded file but not image
						if ((parts.length>1) && (parts[1]=="raw"))
							snippets.push(decode64(templtext));
						else
							snippets.push("<pre class=\"embedded\">"+
									woas.xhtml_encode(decode64(templtext))+"</pre>");
					}
					templtext = r;
				}
				trans = 1;
				
				if (!is_emb) {
					// both comments and nowiki blocks are pre-parsed
					// put away comments
					templtext = templtext.replace(reComments, function (str, comment) {
						// skip whitespace comments
						if (comment.match(/^\s+$/))
							return str;
						var r = woas.parser.place_holder(comments.length, "c");
						comments.push(str);
						return r;
					});

					// put away stuff contained in inline nowiki blocks {{{ }}}
					templtext = templtext.replace(reNowiki, function (str, $1) {
						var r = woas.parser.place_holder(snippets.length);
						if (comments.length) {
							$1 = $1.replace(new RegExp("<\\!-- "+parse_marker+":c:(\\d+) -->", "g"), function (str, $1) {
								var c=comments[$1];
								comments[$1] = "";
								return c
							});
						}
						snippets.push("<tt class=\"wiki_preformatted\">"+woas.xhtml_encode($1)+"</tt>");
						return r;
					});
				
					 if (parts.length) { // replace transclusion parameters
						templtext = templtext.replace(/%\d+/g, function(str) {
							var paramno = parseInt(str.substr(1));
							if (paramno < parts.length)
								return parts[paramno];
							else
								return str;
						} );
					}
				} // not embedded
				
				return templtext;	
			});
			// keep transcluding when a transclusion was made and when transcluding depth is not excessive
		} while (trans && (++trans_level < _MAX_TRANSCLUSION_RECURSE));
		if (trans_level == _MAX_TRANSCLUSION_RECURSE) { // parse remaining inclusions as normal text
			text = text.replace(reTransclusion, function (str) {
				var r = woas.parser.place_holder(snippets.length);
				snippets.push(woas.parser.render_error(str));
				return r;
			});
		}
	}
	
	// take a backup copy of the macros, so that no new macros are defined after page processing
	var backup_macro_n = woas.macro_parser.macro_names.slice(0),
		backup_macro_f = woas.macro_parser.macro_functions.slice(0);
	
	// put away stuff contained in user-defined macro multi-line blocks
	text = text.replace(reMacros, function (str, $1) {
		// ask macro_parser to prepare this block
		var macro = woas.macro_parser($1);
		// allow further parser processing
		if (macro.reprocess)
			return macro.text;
		var r = woas.parser.place_holder(snippets.length);
		// otherwise store it for later
		snippets.push(macro.text);
		return r;
	});
	
	// reset the array of custom scripts
	this.script_extension = [];
	if (js_mode) {
		// gather all script tags
		text = text.replace(reScripts, function (str, $1, $2) {
			if (js_mode==2) {
				var r = woas.parser.place_holder(snippets.length);
				snippets.push(str);
				return r;
			}
			var m=$1.match(/src=(?:"|')([^\s'">]+)/);
			if (m!=null)
				woas.parser.script_extension.push(new Array(m[1]));
			else
				woas.parser.script_extension.push($2);
			return "";
		});
	}
	
	// do not parse style blocks
	text = text.replace(reStyles, function(str) {
		var r = woas.parser.place_holder(snippets.length);
		snippets.push(str);
		return r;
	});
	
	// put a placeholder for the TOC
	var p = text.indexOf("[[Special::TOC]]");
	if (p != -1) {
		this.has_toc = true;
		text = text.substring(0, p) + "<!-- "+parse_marker+":TOC -->" + text.substring(p+16
//		+ 	((text.charAt(p+16)=="\n") ? 1 : 0)
		);	
	} else this.has_toc = false;

	// put away big enough HTML tags sequences (with attributes)
	text = text.replace(/(<\/?\w+[^>]*>[ \t]*)+/g, function (tag) {
		// save the trailing spaces
		var r = woas.parser.place_holder(snippets.length);
		snippets.push(tag);
		return r;
	});

	// wiki tags
	var tags = [], inline_tags = 0;
	
	// links with pipe e.g. [[Page|Title]]
	text = text.replace(reWikiLink, function(str, $1, $2) {
		// check for protocol
		if ($1.search(/^\w+:\/\//)==0) {
			var r = woas.parser.place_holder(snippets.length);
			snippets.push("<a class=\"world\" href=\"" + $1.replace(/^mailto:\/\//, "mailto:") + "\" target=\"_blank\">" + $2 + "<\/a>");
			return r;
		}
			
		// is this a tag definition?
		var found_tags = woas._get_tags(str.substring(2, str.length-2));
		if (found_tags.length>0) {
			tags = tags.concat(found_tags);
			if (!this.force_inline)
				return "";
			++inline_tags;
			return "<!-- "+parse_marker+":"+inline_tags+" -->";
		}

		var page = $1;
		var hashloc = $1.indexOf("#");
		var gotohash = "";
		if (hashloc > 0) {
			page = $1.substr(0, hashloc);
			gotohash = "; window.location.hash= \"" + $1.substr(hashloc) + "\"";
		}
		if (woas.page_exists(page)) {
			var r = woas.parser.place_holder(snippets.length);
			var wl;
			if (export_links) {
//						if (this.page_index(page)==-1)
//							wl = " onclick=\"alert('not yet implemented');\"";		else
						wl = " href=\""+woas._export_get_fname(page)+"\"";
					} else
						wl = " onclick=\"go_to('" + woas.js_encode(page) +	"')" + gotohash + "\"";
					snippets.push("<a class=\"link\""+ wl + " >" + $2 + "<\/a>");
					return r;
				} else {
					// section reference URIs
					if ($1.charAt(0)=="#") {
						var r = woas.parser.place_holder(snippets.length);
						var wl;
						if (export_links)
							wl = woas._export_get_fname(page);
						else
							wl = '';
						if (wl == '#')
							snippets.push("<span class=\"broken_link\">" + $2 + "<\/span>");
						else {
							snippets.push("<a class=\"link\" href=\""+
							wl+"#" +
							woas.parser.header_anchor($1.substring(1)) + "\">" + $2 + "<\/a>");
						}
						return r;
					} else {
						var r = woas.parser.place_holder(snippets.length);
						if (export_links) {
							snippets.push("<span class=\"broken_link\">" + $2 + "<\/span>");
							return r;
						}
						var wl = " onclick=\"go_to('" +woas.js_encode($1)+"')\"";
						snippets.push("<a class=\"unlink\" "+wl+">" + $2 + "<\/a>");
						return r;
					}
				}
			}); //"<a class=\"wiki\" onclick='go_to(\"$2\")'>$1<\/a>");

	// links without pipe e.g. [[Page]]
	text = text.replace(reWikiLinkSimple, function(str, $1) {
		// check for protocol
		if ($1.search(/^\w+:\/\//)==0) {
			var r = woas.parser.place_holder(snippets.length);
			$1 = $1.replace(/^mailto:\/\//, "mailto:");
			snippets.push("<a class=\"world\" href=\"" + $1 + "\" target=\"_blank\">" + $1 + "<\/a>");
			return r;
		}
		
		// is this a tag definition?
		var found_tags = woas._get_tags($1);
		if (found_tags.length>0) {
			tags = tags.concat(found_tags);
			if (!this.force_inline)
				return "";
			++inline_tags;
			return "<!-- "+parse_marker+":"+inline_tags+" -->";
		}
		
		if (woas.page_exists($1)) {
			var r = woas.parser.place_holder(snippets.length);
			var wl;
			if (export_links) {
				wl = woas._export_get_fname($1);
				if (wl == '#') {
					snippets.push("<span class=\"broken_link\">" + $1 + "<\/span>");
					return r;
				}
				wl = " href=\""+wl+"\"";
			} else
				wl = " onclick=\"go_to('" + woas.js_encode($1) +"')\"";
			snippets.push("<a class=\"link\""+wl+">" + $1 + "<\/a>");
			return r;
		} else {
			var r = woas.parser.place_holder(snippets.length);
			if ($1.charAt(0)=="#") {
				snippets.push("<a class=\"link\" href=\"#" +woas.parser.header_anchor($1.substring(1)) + "\">" + $1.substring(1) + "<\/a>");
			} else {
				var r = woas.parser.place_holder(snippets.length);
				if (export_links) {
					snippets.push("<span class=\"unlink broken_link\">" + $1 + "<\/span>");
					return r;
				}
				var wl = " onclick=\"go_to('" + woas.js_encode($1) +"')\"";
				snippets.push("<a class=\"unlink\" "+wl+">" + $1 + "<\/a>");
			}
			return r;
		}
	}); //"<a class=\"wiki\" onclick='go_to(\"$1\")'>$1<\/a>");

	// allow non-wrapping newlines
	text = text.replace(/\\\n/g, "");
	
	// underline
	text = text.replace(/(^|[^\w])_([^_]+)_/g, "$1"+parse_marker+"uS#$2"+parse_marker+"uE#");
	
	// italics
	// need a space after ':'
	text = text.replace(/(^|[^\w:])\/([^\n\/]+)\//g, function (str, $1, $2) {
		// hotfix for URLs
		if ($2.indexOf("//")!=-1)
			return str;
		return $1+"<em>"+$2+"</em>";
	});
	
	// ordered/unordered lists parsing (code by plumloco)
	text = text.replace(reReapLists, this.parse_lists);
	
	// headers
	//TODO: check that only h1~h6 are parsed
	text = text.replace(reParseHeaders, this.header_replace);
//	text = text.replace(reParseOldHeaders, this.header_replace);
	
	if (this.has_toc) {
		// remove the trailing newline
//		this.toc = this.toc.substr(0, this.toc.length-2);
		// replace the TOC placeholder with the real TOC
		text = text.replace("<!-- "+parse_marker+":TOC -->",
				"<div class=\"wiki_toc\"><p class=\"wiki_toc_title\">Table of Contents</p>" +
				this.toc.replace(reReapLists, this.parse_lists)
				/*.replace("\n<", "<") */
				+ "</div>" );
		this.toc = "";
	}
	
	// <strong> for bold text
	text = text.replace(/(^|[^\w\/\\])\*([^\*\n]+)\*/g, "$1"+parse_marker+"bS#$2"+parse_marker+"bE#");

	// <strike>
	//text = text.replace(/(^|\n|\s|\>|\*)\--(.*?)\--/g, "$1<strike>$2<\/strike>");
	
	text = text.replace(new RegExp(parse_marker+"([ub])([SE])#", "g"), function (str, $1, $2) {
		if ($2=='E') {
			if ($1=='u')
				return "</span>";
			return "</strong>";
		}
		if ($1=='u')
			tag = "<span style=\"text-decoration:underline;\">";
		else
			tag = "<strong>";
		return tag;
	});

	// <hr> horizontal rulers made with 3 hyphens, 4 suggested
	// only white spaces are allowed after the hyphens
	text = text.replace(/(^|\n)\s*\-{3,}[ \t]*(\n|$)/g, "<hr class=\"woas_ruler\" />");
	
	// tables-parsing pass
	text = text.replace(reReapTables, this.parse_tables);
	
	// cleanup \n after headers and lists
	text = text.replace(/((<\/h[1-6]><div class="level[1-6]">)|(<\/[uo]l>))(\n+)/g, function (str, $1, $2, $3, trailing_nl) {
		if (trailing_nl.length>2)
			return $1+trailing_nl.substr(2);
		return $1;
	});
	
	// remove \n before list start tags
	text = text.replace(/\n(<[uo]l>)/g, "$1");

	// end-trim
//	if (end_trim)
//		text = text.replace(/\s*$/, "");

	// compress newlines characters into paragraphs (disabled)
//	text = text.replace(/\n(\n+)/g, "<p>$1</p>");
//	text = text.replace(/\n(\n*)\n/g, "<p>$1</p>");

	// make some newlines cleanup after pre tags
	text = text.replace(/(<\/?pre>)\n/gi, "$1");

	// convert newlines to br tags
	text = text.replace(/\n/g, "<br />");

	// put back in place all snippets
	if (snippets.length>0) {
		text = text.replace(new RegExp("<\\!-- "+parse_marker+"::(\\d+) -->", "g"), function (str, $1) {
			return snippets[$1];
		});
	} snippets = null;

	// put back in place all XHTML comments
	if (comments.length>0) {
		text = text.replace(new RegExp("<\\!-- "+parse_marker+":c:(\\d+) -->", "g"), function (str, $1) {
			return comments[$1];
		});
	} comments = null;
	
	// sort tags at bottom of page, also when showing namespaces
	tags = tags.toUnique().sort();
	if (tags.length && !export_links) {
		var s;
		if (this.force_inline)
			s = "";
		else
			s = "<div class=\"taglinks\">";
		s += "Tags: ";
		for(var i=0;i<tags.length-1;i++) {
			s+="<a class=\"link tag\" onclick=\"go_to('Tagged::"+woas.js_encode(tags[i])+"')\">"+tags[i]+"</a>&nbsp;&nbsp;";
		}
		if (tags.length>0)
			s+="<a class=\"link tag\" onclick=\"go_to('Tagged::"+woas.js_encode(tags[tags.length-1])+"')\">"+tags[tags.length-1]+"</a>";
		if (!this.force_inline) {
			s+="</div>";
			text += s;
		} else { // re-print the inline tags (works only on last tag definition?)
			text = text.replace(new RegExp("<\\!-- "+parse_marker+":(\\d+) -->", "g"), function (str, $1) {
				if ($1==inline_tags)
					return s;
				return "";
			});
		}
	}
	// reset the flaggers
	if (this.force_inline)
		this.force_inline = false;
	// restore macros array
	woas.macro_parser.macro_names = backup_macro_n;
	woas.macro_parser.macro_functions = backup_macro_f;
		
	if (text.substring(0,5)!="</div")
		return "<div class=\"level0\">" + text + "</div>";
	return text.substring(6)+"</div>";
}

woas.parser.render_error = function(str) {
	return "<span style=\"color: red;font-weight:bold;\">&infin; "+str+" &infin;</span>";
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** special.js ***/
// Here begins the special pages' code

woas["special_encrypted_pages"] = function(locked) {
	var pg = [];
	for(var i=0,l=pages.length;i<l;i++) {
		if (this.is_reserved(page_titles[i]))
			continue;
		if (locked == this.is__encrypted(i))
			pg.push(page_titles[i]);
	}
	if (!pg.length)
		return "/No locked pages found/";
	else
		return this._join_list(pg); // TODO - Delete repeated data
}

woas["special_orphaned_pages"] = function() {
	var pg = [];
	var found = false;
	for(j=0,l=page_titles.length; j<l; j++) {
		if (this.is_reserved(page_titles[j]))
			continue;
		if (this.is_menu(page_titles[j])) {	// check if the namespace has some pages
			var ns = this.get_namespace(page_titles[j]);
			if (ns == "") continue;
			for(var i=0;i<page_titles.length;i++) {
				if (page_titles[i].indexOf(ns)==0) {
					found = true;
					break;
				}
			}
		} else {
		// search for pages that link to it
			var re = new RegExp("\\[\\[" + RegExp.escape(page_titles[j]) + "(\\]\\]|\\|)", "i");
			for(var i=0,l=page_titles.length; i<l; i++) {
				if ((i==j) || this.is_reserved(page_titles[i]))
					continue;
				var tmp = this.get_src_page(i);
				if (tmp==null)
					continue;
				if (tmp.search(re)!=-1) {
					found = true;
					break;
				}
			}
		}
		if(found == false) {
			pg.push( page_titles[j] );
		} else found = false;
	}
	if (!pg.length)
		return "/No orphaned pages found/";
	else
		return this._join_list(pg); // TODO - Delete repeated data
}

woas["special_backlinks"] = function() {
	var pg = [];
	var tmp;
	var reg = new RegExp("\\[\\["+RegExp.escape(current)+"(\\||\\]\\])", "gi");
	for(var j=0,l=pages.length; j<l; j++) {
		if (this.is_reserved(page_titles[j]))
			continue;
		// search for pages that link to it
		tmp = this.get_src_page(j);
		if (tmp==null)
			continue;
		if (tmp.match(reg)) {
			pg.push( page_titles[j] );
		}
	}
	if(pg.length == 0)
		return "/No page links here/";
	else
		return "== Links to "+current+"\n"+this._join_list(pg);
}

//var hl_reg;

// Returns a index of searched pages (by miz & legolas558)
woas["special_search"] = function( str ) {
	this.progress_init("Searching");
	var pg_body = [];
	var title_result = "";
	log("Searching "+str);

	// amount of nearby characters to display
	var nearby_chars = 200;
	var count = 0;
	// matches the search string and nearby text
	var reg = new RegExp( ".{0,"+nearby_chars+"}" + RegExp.escape(this.trim(str)).
					replace(/\s+/g, "(.|\n)*?") + ".{0,"+nearby_chars+"}", "gi" );
	_hl_reg = new RegExp("("+RegExp.escape(str)+")", "gi");
/*	hl_reg = new RegExp( ".*?" + RegExp.escape(str).
					replace(/^\s+/, "").
					replace(/\s+$/, "").
					replace(/([^\s]+)/g, "($1)").
					replace(/\s+/g, ".*?") + ".*", "gi" );	*/
	var tmp;
	result_pages = [];
	for(var i=0,l=pages.length; i<l; i++) {
		//TODO: implement searching in help pages
		if (this.is_reserved(page_titles[i]))
			continue;

		// this could be modified for wiki searching issues
		tmp = this.get_src_page(i, true);
		if (tmp==null)
			continue;
//		log("Searching into "+page_titles[i]);	// log:0
	
		var added = false;
		//look for str in title
		if(page_titles[i].match(reg)) {
			title_result += "* [[" + page_titles[i] + "]]\n";
			result_pages.push(page_titles[i]);
			added = true;
		}

		//Look for str in body
		res_body = tmp.match(reg);
		if (res_body!=null) {
			if (!added)
				result_pages.push(page_titles[i]);
			count = res_body.length;
			res_body = "..."+res_body.join("...\n")+"..."; //.replace(/\n/g, " ");
			pg_body.push( "* [[" + page_titles[i] + "]]: found *" + count + "* times :<div class=\"search_results\">{{{" + res_body +"\n}}}\n</div>");
		}
	}
	this.progress_finish();
	if (!pg_body.length && !title_result.length)
		return "/No results found for *"+str+"*/";
	woas.parser.force_inline = true;
	return "Results for *" + woas.xhtml_encode(str) + "*\n" + title_result + "\n\n----\n" + this._simple_join_list(pg_body, false);
}

woas["_plugins_list"] = function() {
	return "\n\n/No plugins installed/";
}

woas["special_tagged"] = function() {
	var utags = [];
	var tags_tree = {};
	var src, ipos;
	for(var i=0,l=pages.length;i<l;++i) {
		if (this.is_reserved(page_titles[i]))
			continue;
		src = this.get_src_page(i);
		// encrypted w/o key
		if (src === null)
			continue;
		src.replace(/\[\[Tags?::([^\]]+)\]\]/g,
			function (str, $1) {
				// get the tags and index the page under each tag
				var tmp=woas.split_tags($1);
				for(var j=0,jl=tmp.length;j<jl; ++j) {
					var tag=woas.trim(tmp[j]);
					if (!tag.length) continue;
					// we have a valid tag, check if it is already indexed
					ipos = utags.indexOf(tag);
					if (ipos==-1) {
						utags.push(tag);						
						tags_tree[tag] = [page_titles[i]];
					} else
						tags_tree[tag].push(page_titles[i]);
				}
			});
	}
	// sort alphabetically (case insensitive)
	utags.sort(function(x,y){
      var a = String(x).toUpperCase();
      var b = String(y).toUpperCase();
      if (a > b)
         return 1
      if (a < b)
         return -1
      return 0;
    });
	var pg=[];
	for(var j=0,l=utags.length;j<l;j++) {
		var obj = tags_tree[utags[j]].sort();
		pg.push("\n== [[Tagged::"+utags[j]+"]]");
		for(var i=0;i<obj.length;i++) {
			pg.push("* [["+obj[i]+"]]");
		}
	}
	if (pg.length)
		return this._simple_join_list(pg);
	return '/No tagged pages/';
}

woas["special_untagged"] = function() {
	var tmp;
	var pg = [];
	for(var i=0,l=pages.length; i<l; i++) {
		if (this.is_reserved(page_titles[i]))
			continue;
		tmp = this.get_src_page(i);
		if (tmp==null)
			continue;
		if (!tmp.match(/\[\[Tags?::([^\]]+)\]\]/))
			pg.push("[["+page_titles[i]+"]]");
	}
	if (!pg.length)
		return '/No untagged pages/';
	return this._simple_join_list(pg, true);
}

// Returns a index of all pages
woas["special_all_pages"] = function() {
	var pg = [];
	for(var i=0, l=page_titles.length; i<l; i++) {
		if (!this.is_reserved(page_titles[i]))
			pg.push( page_titles[i] );
	}
	return this._join_list(pg);
}

// Returns a index of all dead pages
woas["special_dead_pages"] = function() {
	var dead_pages = [];
	var from_pages = [];
	var tmp;
	for(var j=0,l=pages.length;j<l;j++) {
		if (this.is_reserved(page_titles[j]))
			continue;
		tmp = this.get_src_page(j);
		if (tmp==null)
			continue;
		tmp.replace(/\[\[([^\]\]]*?)(\|([^\]\]]+))?\]\]/g,
			function (str, $1, $2, $3) {
				if (page_done)
					return false;
				if ($1.charAt(0)=="#")
					return;
				if ($1.search(/^\w+:\/\//)==0)
					return;
				if ($1.match(/Tag(s|ged)?:/gi))
					return;
				// skip mailto URLs
				if ($1.match(/^mailto:/gi))
					return;
				p = woas.title_unalias($1);
				if (!woas.page_exists(p) && (p!=page_titles[j])) {
					// true when page has been scanned for referrals
					var page_done = false;
					// check that this not-existing page is already in the deads page list
					for(var i=0;i<dead_pages.length;i++) {
						// current page contains a link to an already indexed dead page,
						// save the reference
						if (dead_pages[i]==p) {
							// add only if not already there
							if (from_pages[i].indexOf(page_titles[j]) == -1)
								from_pages[i].push(page_titles[j]);
							page_done = true;
							break;
						}
					}
					// we have just found a dead page
					if (!page_done) {
						dead_pages.push(p);
						from_pages.push(new Array(page_titles[j]));
						page_done = true;
					}
				}
	        }
		);
//		page_done = false;
	}

	// format the dead pages
	var pg = [], s;
	for(var i=0;i<dead_pages.length;i++) {
		s = "[["+dead_pages[i]+"]] from ";
		var from = from_pages[i];
		for(j=0;j<from.length-1;j++) {
			s+="[["+from[j]+"]], ";
		}
		if (from.length>0)
			s+="[["+from[from.length-1]+"]]";
		pg.push(s);
	}

	result_pages = dead_pages;	
	if (!pg.length)
		return '/No dead pages/';
	return this._simple_join_list(pg, true);
}

// used in Special::Options
function bool2chk(b) {
	if (b) return "checked";
	return "";
}

$["checked"] =function(id) {
	cfg_changed = true;
	if ($(id).checked)
		return true;
	return false;
}

// Used by Special::Options
function _set_layout(fixed) {
	$("sw_menu_area").style.position = $("sw_wiki_header").style.position = (fixed ? "fixed" : "absolute");
}

//Special::Recentchanges shows a sorted list of pages by modified timestamp
woas["special_recent_changes"] = function() {
	// build an array of (key := page_index, val := last_modified_timestamp) couples
	var l=page_titles.length, hm = [];
	for(var i=0;i<l;++i) {
		// skip pages with the 'magic' zero timestamp
		if (page_mts[i] == 0)
			continue;
		// skip reserved pages
		if (this.is_reserved(page_titles[i]))
			continue;
		hm.push([i,page_mts[i]]);
	}
	// sort the array
	hm.sort(function(a,b) { return (b[1]-a[1]); });
	// display results
	var pg=[];
	for(var i=0,l=hm.length;i<l;++i) {
		pg.push("* [[" + page_titles[hm[i][0]] + "]] <span style=\"font-size: smaller;\">"+this.last_modified(hm[i][1]))+"</"+"span>";
	}
	if (!pg.length)
		return "/No recently modified pages/";
	return this._simple_join_list(pg);
}

// End of special pages' code

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** core.js ***/
// core WoaS, WoaS::UI code

// some tweak settings NOT to be touched - warranty void otherwise
woas["tweak"] = {
	// DANGER: might cause pages corruption!
	"edit_override": false,
	// native WSIF-saving mode used during development - use with CARE!
	"native_wsif": false,
	// perform integrity test of browser features
	"integrity_test": false
};

woas["cmd_duplicate_page"] = function() {
	var pname = this._new_page("Insert duplicate page title", true, current+" (duplicate)");
	if (pname == null)
		return;
	var pi = this.page_index(current);
	var dpi = this.page_index(pname);
	// duplicate the page
	pages[dpi] = pages[pi]; // .slice ?
	page_attrs[dpi] = page_attrs[pi];	
	// go to new page
	go_to(pname);
}

woas["cmd_new_page"] = function() {
	this._new_page(this.i18n.INSERT_NEW, false, '');
}

// used to create a new page in the wiki
woas["_new_page"] = function(msg, fill_mode, def_title) {
	var title = def_title;
	do {
		title = prompt(msg, title);
		if (title == null) break;
		title = this.trim(title);
		if (this.valid_title(title))
			break;
	} while (1);
	if ((title!=null) && title.length) {
		if (this.page_index(title)!=-1)
			this.alert(this.i18n.PAGE_EXISTS.sprintf(title));
		else {
			cr = title;
			var p = cr.indexOf("::");
			if (p!=-1) {
				ns = cr.substring(0,p);
//				log("namespace of "+cr+" is "+ns);	// log:0
				cr = cr.substring(p+2);
			} else ns="";
			if (!this._create_page(ns, cr, false, fill_mode))
				return ns+cr;
			var upd_menu = (cr=='Menu');
			if (!upd_menu && confirm(this.i18n.ASK_MENU_LINK)) {
				var menu = this.get_text("::Menu");
				var p = menu.indexOf("\n\n");
				if (p==-1)
					menu += "\n[["+title+"]]";
				else
					menu = menu.substring(0,p)+"\n[["+title+"]]"+menu.substring(p)+"\n";
				this.set__text(this.page_index("::Menu"), menu);
				upd_menu = true;
			}
			if (upd_menu)
				this.refresh_menu_area();
			return ns+cr;
		}
	}
	return null;
}

woas["cmd_erase_wiki"] = function() {
	if (this.erase_wiki()) {
		if (!this.full_commit())
			alert(this.i18n.FAILED_ERASE);
		back_or(this.config.main_page);
	}
	return null;
}

// pages which shall never be modified
woas["static_pages"] = ["Special::About", "Special::Advanced", "Special::Options","Special::Import",
						"Special::Lock","Special::Search", "Special::Embed",
						"Special::Export", "Special::License", "Special::ExportWSIF",
						"Special::ImportWSIF", "WoaS::Plugins",
						"WoaS::Template::Button", "WoaS::Template::Info"];
woas["help_pages" ] = null;
woas["default_pages"] = ["::Menu", "WoaS::Bootscript", "WoaS::Aliases"];

woas["erase_wiki"] = function() {
	if (!this.config.permit_edits) {
		this.alert(this.i18n.READ_ONLY);
		return false;
	}
	if (!confirm(this.i18n.CONFIRM_DELETE_ALL1) ||
		!confirm(this.i18n.CONFIRM_DELETE_ALL2))
		return false;
	this.progress_init("Erasing...");
	var backup_pages = [];
	// attributes and last modified timestamps for default pages
	// first entry is for main page
	page_attrs = [0]; page_mts =   [0];
	// zero is the magic timestamp
	for (var i=0;i<this.default_pages.length;++i) {
		page_attrs.push(0); page_mts.push(0);
	}
	// build the array of help pages only once
	var help_pfx = "WoaS::Help::";
	if (this.help_pages === null) {
		this.help_pages = [];
		for(var i=0,l=page_titles.length;i<l;++i) {
			if (page_titles[i].substr(0, help_pfx.length) === help_pfx)
				this.help_pages.push(page_titles[i].substr(help_pfx.length));
		}
	}
	var copied_help_pages = [];
	// now pick the static pages
	for(var i=0,l1=this.static_pages.length,l2=this.help_pages.length,l=l1+l2;i<l;++i) {
		var pi, t;
		if (i<l1)
			t = this.static_pages[i];
		else
			t = help_pfx+this.help_pages[i-l1];
		pi = this.page_index(t);
		if (pi==-1) {
			this.alert(this.i18n.STATIC_NOT_FOUND.sprintf(t));
			continue;
		} else if (i>=l1)
			copied_help_pages.push(t);
		backup_pages.push(pages[pi]);
		// reset attributes
		page_attrs.push(0);
		// reset timestamp
		page_mts.push(0);
		this.progress_status(i/l);
	}
	// build titles
	page_titles = [ this.config.main_page ];
	page_titles = page_titles.concat(this.default_pages);
	page_titles = page_titles.concat(this.static_pages);
	page_titles = page_titles.concat(copied_help_pages);
	// now build pages
	pages = ["A blank sheet is a catalyst for ideas", "[["+this.config.main_page+"]]\n\n[[Special::All Pages]]\n[[Special::New Page]]\n[[Special::Duplicate Page]]\n[[Special::Go to]]\n[[Special::Delete Page]]\n[[Special::Backlinks]]\n[[Special::Search]]", "/* insert here your boot script */", ""];
	pages = pages.concat(backup_pages); backup_pages = null;
	current = this.config.main_page;
	this.refresh_menu_area();
	backstack = [];
	forstack = [];
	this.progress_finish();
	return true;
}

woas["cmd_main_page"] = function() {
	go_to(this.config.main_page);
	return null;
}

woas["cmd_edit_css"] = function() {
	if (!this.config.permit_edits && !this.tweak.edit_override) {
		this.alert(this.i18n.READ_ONLY);
		return null;
	}
	_servm_alert();
	this.current_editing("Special::Edit CSS", true);
	this.edit_ready(_css_obj().innerHTML);
	return null;
}

woas["cmd_edit_aliases"] = function() {
	return this.cmd_edit_special("WoaS::Aliases");
}

woas["cmd_edit_bootscript"] = function() {
	return this.cmd_edit_special("WoaS::Bootscript");
}

// used to edit many special pages
woas["cmd_edit_special"] = function(cr) {
	if (!this.config.permit_edits && !this.tweak.edit_override) {
		this.alert(this.i18n.READ_ONLY);
		return null;
	}
	_servm_alert();
	// get source text (ASCII/UTF-8)
	var tmp = this.get_text(cr);
	if (tmp == null)
		return null;
	this.current_editing(cr, true);
	// setup the wiki editor textbox
	this.current_editing(cr, this.config.permit_edits | this._server_mode);
	this.edit_ready(tmp);
	return null;
}

woas["cmd_go_to"] = function() {
	var pname = prompt("Go to page:", current);
	if ((pname === null) || !pname.length)
		return null;
	go_to(pname);
}

woas["cmd_delete"] = function() {
	var pname = prompt(this.i18n.DELETE_PAGE_PROMPT, current);
	if ((pname === null) || !pname.length)
		return;
	var pi = this.page_index(pname);
	if (pi == -1) {
		this.alert(this.i18n.PAGE_NOT_EXISTS+pname);
		return;
	}
	if (confirm(this.i18n.CONFIRM_DELETE.sprintf(pname)))
		this.delete_page_i(pi);
}

// javascript shortcuts for special pages
woas["shortcuts"] = ["New Page", "Duplicate Page", "All Pages", "Orphaned Pages", "Backlinks", "Dead Pages", "Erase Wiki", "Edit CSS", "Main Page", "Edit Bootscript", "Aliases", "Go to", "Delete Page", "Recentchanges"];
woas["shortcuts_js"] = ["cmd_new_page", "cmd_duplicate_page", "special_all_pages", "special_orphaned_pages", "special_backlinks",
					"special_dead_pages", "cmd_erase_wiki", "cmd_edit_css", "cmd_main_page",
					"cmd_edit_bootscript", "cmd_edit_aliases", "cmd_go_to", "cmd_delete",
					"special_recent_changes"];
					
woas["unexportable_pages"] = ["New Page", "Duplicate Page", "Backlinks", "Erase Wiki", "Edit CSS",
								"Edit Bootscript", "Go to", "Delete Page", "Search"];

// return raw javascript tag to be included in XHTML page
woas["raw_js"] = function(code) {
	return "<scr"+"ipt type=\"text/javascript\">\n"+code+"\n<"+"/s"+"cript>";
}

//API1.0: delete a page given title (without aliases)
woas["delete_page"] = function(title) {
	var pi = page_titles.indexOf(title);
	//DEBUG line
	if (pi == -1) {
		this.crash("Requesting deletion of unexisting page!");
		return false;
	}
	return this.delete_page_i(pi);
}

//API1.0: delete a page given absolute page index
//API1.0: @protected
woas["delete_page_i"] = function(i) {
	var old_title = page_titles[i];
	log("DELETED page "+old_title);	// log:1
	// remove the elements
	page_titles.splice(i,1);
	pages.splice(i,1);
	page_attrs.splice(i,1);
	page_mts.splice(i,1);
	// remove the deleted page from history
	var prev_page = null;
	for(var i=0,il=backstack.length;i<il;++i) {
		// remove also duplicate sequences
		if ((backstack[i] === old_title) || (prev_page === backstack[i])) {
			backstack.splice(i,1);
			// fix the loop
			--il;--i;
			continue;
		}
		prev_page = backstack[i];
	}
	//TODO: delete also from forstack!
	// if we were looking at the deleted page
	if (current == old_title) {
		// go back or to main page, do not save history
		if(backstack.length > 0) {
			this.set_current(backstack.pop(), true);
		} else
			this.set_current(this.config.main_page);
	}
	// always refresh the menu because it could contain the deleted page link
	this.refresh_menu_area();
	//TODO: send proper save notification
	return this.commit_delete([i]);
}

// some general integrity tests - for debug purposes
woas["integrity_test"] = function() {
	log("Starting integrity test"); //log:1
	// test integrity of data arrays
	var len = pages.length;
	if ((page_attrs.length != len) ||
			(page_titles.length != len) ||
			(page_mts.length != len)) {
			this.crash("FATAL: data arrays have mismatching length!\n"+
						"#pages = %d, #page_attrs = %d, #page_titles = %d, #page_mts = %d".
						sprintf(pages.length, page_attrs.length, page_titles.length,
						page_mts.length));
		return false;
	}
	// test integrity of ecma encoding for normal UTF-8
	var UTF8_TEST = "Di\u00e2critics are here: \u00e4 \u00e1y";
	if (this.ecma_decode(this.ecma_encode(UTF8_TEST)) !== UTF8_TEST) {
		this.crash("ECMA encoding not working:\n"+this.ecma_decode(this.ecma_encode(UTF8_TEST))+
		"\n"+UTF8_TEST);
		return false;
	}
	// test integrity of ecma encoding for 16bit UTF-8
	var UTF8_TEST2 = "\u30e9\u30c9\u30af\u30ea\u30d5";
	if (this.ecma_decode(this.ecma_encode(UTF8_TEST2)) !== UTF8_TEST2) {
		this.crash("ECMA encoding/decoding not working:\n"+this.ecma_decode(this.ecma_encode(UTF8_TEST2))+
		"\n"+UTF8_TEST2);
		return false;
	}
	// test integrity of load/save functions
	if (!this.save_file(woas.ROOT_DIRECTORY+"itest.bin", this.file_mode.UTF8_TEXT,
			woas.merge_bytes(woas.utf8Encrypt(UTF8_TEST))
//			UTF8_TEST
			))
		return false;
	var ct = this.load_file(woas.ROOT_DIRECTORY+"itest.bin", this.file_mode.UTF8_TEXT);
	if ((ct === null)||(ct === false))
		return false;
	ct = woas.utf8Decrypt(woas.split_bytes(ct));
	if (ct !== UTF8_TEST) {
		this.crash("UTF8 test failed.\nWritten:\n"+UTF8_TEST+"\nRead:\n"+ct);
		return false;
	}
	// now test AES encryption
	woas.AES.setKey("WoaS");
	var testdata = "sample text here";
	var enc = woas.AES.encrypt(testdata);
	if (woas.AES.decrypt(enc) !== testdata) {
		this.crash("AES encryption is not working two-way!");
		woas.AES.clearKey();
		return false;
	}
	if (woas.AES.decrypt(woas.AES.encrypt(UTF8_TEST)) !== UTF8_TEST) {
		this.crash("AES encryption of UTF8 text is not working two-way!");
		woas.AES.clearKey();
		return false;
	}
	woas.AES.clearKey();
	log("Integrity test successful"); //log:1
	return true;
}

// used in path normalization during export
woas["DIRECTORY_SEPARATOR"] = (navigator.appVersion.indexOf("Win")!=-1)?"\\":"/";

woas["_dirname_regex"] = new RegExp("\\"+woas.DIRECTORY_SEPARATOR+"[^\\"+woas.DIRECTORY_SEPARATOR+"]*$");
woas["_basename_regex"] = new RegExp("\\[\\\\/]([^\\\\/]+)$");

// hackish functions, might stay private for now
woas["dirname"] = function(fn) {
	return fn.replace(this._dirname_regex, woas.DIRECTORY_SEPARATOR);
}
woas["basename"] = function(fn) {
	fn = fn.match(this._basename_regex);
	if (fn === null)
		return "";
	return fn[1];
}

// the export path used by export feature
woas["ROOT_DIRECTORY"] = woas.dirname(_get_this_filename());

//API1.0: get page attributes - can be overriden by plugins
//TODO: all code should use this function
woas["get_page_attrs"] = function(pi) {
	// no error check
	return page_attrs[pi];
}

//API1.0: set page attributes - can be overriden by plugins
//TODO: all code should use this function
woas["set_page_attrs"] = function(pi, attrs) {
	// no error check
	page_attrs[pi] = attrs;
	return true;
}

// get file URL from input XHTML element
// this might not work on some browsers
// not to be called for Mozilla-based browsers
woas["get_input_file_url"] = function() {
	var r = false;
	// we have requested a direct read of the file from the input object
	if (this.browser.opera) {
		// ask user for path, since browser do not allow us to see where file really is
		r = $("filename_").value;
		r = prompt(this.i18n.ALT_BROWSER_INPUT.sprintf(this.basename(r)), this.ROOT_DIRECTORY);
		if ((r === null) || !r.length)
			r = false;
		else
			this._last_filename = r;
	} else {
		r = $("filename_").value;
		if (!r.length)
			r = false;
	}
	if (r === false)
		this.alert(this.i18n.FILE_SELECT_ERR);
	return r;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** stickwiki.js ***/

// page attributes bits are mapped to (readonly, encrypted, ...)

//var end_trim = false;		// trim pages from the end

var forstack = [];			// forward history stack, discarded when saving
var cached_search = "";		// cached XHTML content of last search
var cfg_changed = false;	// true when configuration has been changed
var search_focused = false;	// true when a search box is currently focused
var _custom_focus = false;	// true when an user control is currently focused
var _decrypt_failed = false;	// the last decryption failed due to wrong password attempts (pretty unused)
var result_pages = [];			// the pages indexed by the last result page
var last_AES_page;				// the last page on which the cached AES key was used on
var current_namespace = "";		// the namespace(+subnamespaces) of the current page
var _bootscript = null;					// bootscript
var _hl_reg = null;						// search highlighting regex

// new variables will be properly declared here
woas.prev_title = current;		// previous page's title used when entering/exiting edit mode

woas["save_queue"] = [];		// pages which need to be saved and are waiting in the queue

// Automatic-Save TimeOut object
woas["_asto"] = null;

// left and right trim
woas["trim"] = function(s) {
	return s.replace(/(^\s*)|(\s*$)/, '');
}

// used to craft XHTML pages
woas["DOCTYPE"] = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">\n";
woas["DOC_START"] = "<"+"html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\n<head>\n"+
	"<m"+"eta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n";
	
	

// general javascript-safe string quoting
// NOTE: not completely binary safe!
// should be used only for titles (which ought not to contain binary bytes)
woas["js_encode"] = function (s, split_lines) {
	// not to counfound browsers with saved tags
	s = s.replace(/\\/g, "\\\\").replace(/</g, "\\x3C").replace(/>/g, "\\x3E").
		replace(/'/g, "\\'");
	// escape newlines (\r\n happens only on the stupid IE) and eventually split the lines accordingly
	if (!split_lines)
		s = s.replace(new RegExp("\r\n|\n", "g"), "\\n");
	else
		s = s.replace(new RegExp("\r\n|\n", "g"), "\\n\\\n");
	return this._utf8_js_fix(s);
}

// perform ECMAScript encoding only on some UTF-8 sequences
woas["ecma_encode"] = function(s) {
	return this._utf8_js_fix(s.replace(/\\/g, "\\\\"));
}

woas["_ecma_rx_test"] = new RegExp("[^\u0000-\u007F]");

// returns true if text needs ECMA encoding
// checks if there are UTF-8 characters
woas["needs_ecma_encoding"] = function(s) {
	return this._ecma_rx_test.test(s);
}

woas["_utf8_js_fix"] = function(s) {
	// fix the >= 128 ascii chars (to prevent UTF-8 characters corruption)
	return s.replace(new RegExp("[^\u0000-\u007F]+", "g"), function(str) {
		var r="";
		for(var a=0,l=str.length;a<l;++a) {
			var s = str.charCodeAt(a).toString(16);
			r += "\\u" + "0000".substr(s.length) + s;
		}
		return r;
	});
}

woas["ecma_decode"] = function(s) {
	return s.replace(new RegExp("(\\\\u[0-9a-f]{4})+", "g"), function (str, $1) {
		// this will perform real UTF-8 decoding
		var r = "";
		for (var ic=0,totc=str.length;ic<totc;ic+=6) {
			// get the hexa-numeric part
			var c = str.substr(ic+2, 4);
			// remove leading zeroes and convert to base10
			c = parseInt(c.replace(/^0*/,''), 16);
			// convert UTF-8 sequence to character
			r += String.fromCharCode(c);
		}
		return r;
	}).replace(/\\\\/g, "\\");
}

// used to escape blocks of source into HTML-valid output
woas["xhtml_encode"] = function(src) {
/*	return this.utf8_encode(src.replace(/[<>&]+/g, function ($1) {
		var l=$1.length;
		var s="";
		for(var i=0;i<l;i++) {
			switch ($1.charAt(i)) {
				case '<':
					s+="&lt;";
					break;
				case '>':
					s+="&gt;";
					break;
//				case '&':
				default:
					s+="&amp;";
			}
		}
		return s;
	})); */
	return this.utf8_encode(src.replace(/&/g, '&amp;').replace(/</g, '&lt;').
			replace(/>/g, '&gt;')); // .replace(/"/g, '&quot;').replace(/'/g, '&#39;');
}

woas["utf8_encode"] = function(src) {
	return src.replace(/[^\u0000-\u007F]+/g, function ($1) {
		var l=$1.length;
		var s="";
		for(var i=0;i<l;i++) {
			s+="&#"+$1.charCodeAt(i)+";";
		}
		return s;
	});
}

// DO NOT modify this list! these are namespaces that are reserved to WoaS
var reserved_namespaces = ["Special", "Lock", "Locked", "Unlocked", "Unlock",
						"Tags", "Tagged", "Untagged", "Include", "Javascript", "WoaS"];

// create the regex for reserved namespaces
var reserved_rx = "^";
for(var i = (woas.tweak.edit_override ? 1 : 0);i<reserved_namespaces.length;i++) {
	reserved_rx += /*RegExp.Escape(*/reserved_namespaces[i] + "::";
	if (i<reserved_namespaces.length-1)
		reserved_rx += "|";
}
woas["_reserved_rx"] = new RegExp(reserved_rx, "i"); reserved_namespaces = reserved_rx = null;

woas["aliases"] = [];

woas["title_unalias"] = function(aliased_title) {
	// apply aliases on title, from newest to oldest
	for(var i=0,l=this.aliases.length;i<l;++i) {
		aliased_title = aliased_title.replace(this.aliases[i][0], this.aliases[i][1]);
	}
	return aliased_title;
}

// return page index (progressive number) given its title
woas["page_index"] = function(title) {
	return page_titles.indexOf(this.title_unalias(title));
}

woas["is_reserved"] = function(page) {
	return (page.search(this._reserved_rx)==0);
}

woas["is_menu"] = function(page) {
	return (page.indexOf("::Menu")==page.length-6);
}

// returns namespace with trailing ::
woas["get_namespace"] = function(page, root_only) {
	var p;
	if ((typeof root_only == "boolean") && (root_only == true))
		p = page.indexOf("::");
	else
		p = page.lastIndexOf("::");
	if (p==-1) return "";
	return page.substring(0,p+2);	
}

woas["is_readonly"] = function(page) {
	return this.is_readonly_id(this.page_index(page));
}

woas["is_readonly_id"] = function(pi) {
	return !!(page_attrs[pi] & 1);
}

woas["is__encrypted"] = function (pi) {
	return !!(page_attrs[pi] & 2);
}

woas["is_encrypted"] = function(page) {
	return this.is__encrypted(this.page_index(page));
}

woas["is__embedded"] = function(pi) {
	return !!(page_attrs[pi] & 4);
}
woas["is_embedded"] = function(page) {return this.is__embedded(this.page_index(page));}

woas["is__image"] = function(pi) {
	return !!(page_attrs[pi] & 8);
}
woas["is_image"] = function(page) { return this.is__image(this.page_index(page)); }

// a page physically exists if it is not part of a reserved namespace, if it is not a (sub)namespace and if it actually exists
woas["page_exists"] = function(page) {
	return (this.is_reserved(page) || (page.substring(page.length-2)=="::") || (this.page_index(page)!=-1));
}

// joins a list of pages
woas["_join_list"] = function(arr) {
	if (!arr.length)
		return "";
	result_pages = arr.slice(0);
	return "* [["+arr.sort().join("]]\n* [[")+"]]";
}

woas["_simple_join_list"] = function(arr, sorted) {
	if (sorted)
		arr = arr.sort();
	// a newline is added here
	return arr.join("\n")+"\n";
}

// with two trailing double colon
woas["_get_namespace_pages"] = function (ns) {
	var pg = [];
	switch (ns.substr(0, ns.length-2)) {
		case "Locked":
			return "= Pages in "+ns+" namespace\n" + this.special_encrypted_pages(true);
		case "Unlocked":
			return "= Pages in "+ns+" namespace\n" + this.special_encrypted_pages(false);
		case "Untagged":
			return "= Pages in "+ns+" namespace\n" + this.special_untagged(false);
		case "Tagged": // to be used in wiki source
		case "Tags": // is this deprecated?
			return "= Pages in "+ns+" namespace\n" + this.special_tagged(false);
		case "WoaS::Plugins":
			return this.parser.parse(this.get_text("WoaS::Plugins") + this._plugins_list());
		case "Image":
			var iHTML = "";
			for(var i=0, l=page_titles.length;i<l;++i) {
				if (page_titles[i].indexOf(ns)===0)
					iHTML += this.parser.parse("* [[Include::"+page_titles[i]+"]][["+page_titles[i]+"]]\n");
			}
			return "= Pages in "+ns+" namespace\n" + iHTML;
	}

	for(var i=0, l=page_titles.length;i<l;++i) {
		if (page_titles[i].indexOf(ns)===0)
			pg.push(page_titles[i]);
	}
	return "= Pages in "+ns+" namespace\n" + this._join_list(pg);
}

woas["_get_tagged"] = function(tag_filter) {
	var pg = [];
	
	// allow tags filtering/searching
	var tags = this.split_tags(tag_filter),
		tags_ok = [], tags_not = [];
	for(var i=0,tl=tags.length;i<tl;++i) {
		// skip empty tags
		var tag = this.trim(tags[i]);
		if (!tags[i].length)
			continue;
		// add a negation tag
		if (tags[i].charAt(0)=='!')
			tags_not.push( tags[i].substr(1) );
		else // normal match tag
			tags_ok.push(tags[i]);
	} tags = null;
	
	var tmp, fail;
	for(var i=0,l=pages.length;i<l;++i) {
		tmp = this.get_src_page(i);
		// can be null in case of encrypted content w/o key
		if (tmp==null)
			continue;
		tmp.replace(/\[\[Tags?::([^\]]*?)\]\]/g, function(str, $1) {
				// skip protocol references
//				if ($1.search(/^\w+:\/\//)==0)
//					return;
				// get array of tags in this wiki link
				var found_tags = woas.split_tags($1);
				fail = false;
				// filter if "OK" tag is not present
				for (var b=0,bl=tags_ok.length;b<bl;++b) {
					if (found_tags.indexOf(tags_ok[b]) == -1) {
						fail = true;
						break;
					}
				}
				if (!fail) {
					// filter if "NOT" tag is present
					// we are applying this filter only to tagged pages
					// so a page without tags at all does not fit into this filtering
					for (var b=0,bl=tags_not.length;b<bl;++b) {
						if (found_tags.indexOf(tags_not[b]) != -1) {
							fail = true;
							break;
						}
					}
					if (!fail)
						// no failure, we add this page
						pg.push(page_titles[i]);
				}
			});
	}
	if (!pg.length)
		return "No pages tagged with *"+tag_filter+"*";
	return "= Pages tagged with " + tag_filter + "\n" + this._join_list(pg);
}

// return a plain page or a decrypted one if available through the latest key
woas["get_page"] = function(pi) {
	if (this.is__embedded(pi))
		return null;
	if (!this.is__encrypted(pi))
		return pages[pi];
	if (!this.AES.key.length) {
		last_AES_page = "";
		return null;
	}
	// decrypt by using a copy of the array
	var pg = this.AES.decrypt(pages[pi].slice(0));
	last_AES_page = page_titles[pi];
	return pg;	
}

// get the text of the page, stripped of html tags
woas["get_src_page"] = function(pi, rawmode) {
	var pg = this.get_page(pi);
	if (pg===null) return null;
	if ((typeof rawmode == "undefined") || (rawmode == false))
		pg = pg.replace(/\{\{\{((.|\n)*?)\}\}\}/g, "");
	else
		pg = pg.replace(/(\{|\})(\1)(\1)/g, "$1<!-- -->$2<!-- -->$3");
	// remove wiki and html that should not be viewed when previewing wiki snippets
	return pg.replace(/<script[^>]*>((.|\n)*?)<\/script>/gi, "").
			replace(/\<\/?\w+[^>]+>/g, "");
}

woas["get_text"] = function (title) {
	var pi = this.page_index(title);
	if (pi==-1)
		return null;
	return this.get__text(pi);
}

woas["get_text_special"] = function(title) {
	var ns = this.get_namespace(title);
	var text = null;
	if (ns.length) {
//		log("namespace of "+title+" is "+namespace);	// log:0
		title = title.substring(ns.length);
		if (!title.length) return this._get_namespace_pages(ns);
		switch (ns) {
			case "Special::":
				text = this._get_special(title, false);
			break;
			case "Tagged::": // deprecated?
			case "Tags::":
				text = this._get_tagged(title);
			break;
			default:
				text = this.get_text(ns+title);
		}
	} else
		text = this.get_text(title);
	return text;
}

woas["__last_title"] = null;

woas["__password_finalize"] = function(pwd_obj) {
	$.show_ni("wiki_text");
	document.title = this.__last_title;
	$.hide("woas_pwd_mask");
//	scrollTo(0,0);
	// hide input form
	pwd_obj.value = "";
	pwd_obj.blur();
	custom_focus(false);
}

woas["_set_password"] = function() {
	this.__last_title = document.title;
	document.title = "Enter password";
	// hide browser scrollbars and show mask
	$.show("woas_pwd_mask");
	$.hide_ni("wiki_text");
	scrollTo(0,0);
	// show input form
	$.show_ni("woas_pwd_query");
	custom_focus(true);
	$("woas_password").focus();	
}

woas["_password_cancel"] = function() {
	this.__password_finalize($("woas_password"));
}

// function which hooks all messages shown by WoaS
// can be fed with multiple messages to show consecutively
woas["alert"] = function() {
	for(var i=0,l=arguments.length;i<l;++i) {
		alert("WoaS: "+arguments[i]);
	}
}

// same as above, but for unhandled errors
woas["crash"] = function() {
	for(var i=0,l=arguments.length;i<l;++i) {
		alert("WoaS Unhandled error\n----\n"+arguments[i]);
	}
}

woas["_password_ok"] = function() {
	var pwd_obj = $("woas_password");
	var pw = pwd_obj.value;
	if (!pw.length) {
		this.alert(this.i18n.PWD_QUERY);
		return;
	}
	this.AES.setKey(pw);
	this.__password_finalize(pwd_obj);
}

//TODO: specify interactive-mode
woas["get__text"] = function(pi) {
	// is the page encrypted or plain?
	if (!this.is__encrypted(pi))
		return pages[pi];
	_decrypt_failed = true;
	if (!this.AES.key.length) {
		this.alert(this.i18n.ERR_NO_PWD.sprintf(page_titles[pi]));
		return null;
	}
	this.progress_init("AES decryption");
//	var pg = null;
			//TODO: use form-based password input
//			this._get_password('The latest entered password (if any) was not correct for page "'+page_titles[pi]+"\"");
//			var pw = prompt('The latest entered password (if any) was not correct for page "'+page_titles[pi]+"'\n\nPlease enter the correct password.", '');
//			if ((pw==null) || !pw.length) {
			// we are waiting for the password to be set programmatically
/*			if (!pw.length) {
				last_AES_page = "";
				AES_clearKey();
				document.body.style.cursor = "auto";
				return null;
			}
			AES_setKey(pw);
			retry++;
*/
//			return null;
//		}
		// pass a copied instance to the decrypt function
		// AES_decrypt can return null on failure, but can also return a garbled output
		var pg = this.AES.decrypt(pages[pi].slice(0));
		last_AES_page = page_titles[pi];
//		if (pg != null)
//			break;
	if (!this.config.key_cache)
		this.AES.clearKey();
	if (pg !== null) {
		_decrypt_failed = false;
//		if (this.config.key_cache)			last_AES_page = page_titles[pi];
	} else {
		this.alert(this.i18n.ACCESS_DENIED.sprintf(page_titles[pi]));
//		AES_clearKey();
		last_AES_page = "";
	}
	this.progress_finish();
	return pg;
}

woas["set__text"] = function(pi, text) {
	log("Setting wiki text for page #"+pi+" \""+page_titles[pi]+"\"");	// log:1
	if (this.is__embedded(pi) && !this.is__image(pi))
		text = encode64(text);
//	text = _new_syntax_patch(text);
	if (!this.is__encrypted(pi)) {
		pages[pi] = text;
		return;
	}
	pages[pi] = this.AES.encrypt(text);
	last_AES_page = page_titles[pi];
}

// Sets text typed by user
woas["set_text"] = function(text) {
	var pi = this.page_index(current);
	// this should never happen!
	if (pi==-1) {
		log("current page \""+current+"\" is not cached!");	// log:1
		return;
	}
	this.set__text(pi, text);
}

woas["assert_current"] = function(page) {
	if( current != page )
		go_to( page ) ;
	else
		this.set_current( page, true);
}

// used to eventually remove the new-to-be page when cancel is pressed
woas["_ghost_page"] = false;

woas["_create_page"] = function (ns, cr, ask, fill_mode) {
	if (this.is_reserved(ns+"::") && !this.tweak.edit_override) {
		this.alert(this.i18n.ERR_RESERVED_NS.sprintf(ns+"::"+cr, ns));
			return false;
	}
	if ((ns=="File") || (ns=="Image")) {
		if (!fill_mode && ask)
			this.alert(this.i18n.DUP_NS_ERROR);
		else
			go_to(ns+"::"+cr);
		return false;
	}
	// this is what happens when you click a link of unexisting page
	if (!fill_mode && ask && !confirm(this.i18n.PAGE_NOT_FOUND))
		return false;
	// create and edit the new page
	if (cr!="Menu")
		pages.push("= "+cr+"\n");
	else
		pages.push("\n");
	if (ns.length)
		cr = ns+"::"+cr;
	page_attrs.push(0);
	page_titles.push(cr);
	// set modified timestamp
	page_mts.push(Math.round(new Date().getTime()/1000));
	log("Page "+cr+" added to internal array");	// log:1
	if (!fill_mode) {
		// DO NOT set 'current = cr' here!!!
		// enable ghost mode when creating a new-to-be page
		if (!ask)
			this._ghost_page = true;
		// proceed with a normal wiki source page
		this.edit_page(cr);
	}
	return true;
}

woas["_get_embedded"] = function(cr, etype) {
	log("Retrieving embedded source "+cr);	// log:1
	var pi=this.page_index(cr);
	if (pi==-1)
		return this.parser.parse("[[Include::Special::Embed|"+etype+"]]");
	return this._get__embedded(cr, pi, etype);
}

woas["_get__embedded"] = function (cr, pi, etype) {
	var text=this.get__text(pi);
	if (text==null) return null;
	var xhtml = "";
	
	if (etype=="file") {
		var fn = cr.substr(cr.indexOf("::")+2);
		var pview_data = decode64(text, 1024), pview_link = "";
		var ext_size = Math.ceil((text.length*3)/4);
		if (ext_size-pview_data.length>10)
			pview_link = "<div id='_part_display'><em>"+this.i18n.FILE_DISPLAY_LIMIT+
			"</em><br /><a href='javascript:show_full_file("+pi+")'>"+this.i18n.DISPLAY_FULL_FILE+"</a></div>";
		var _del_lbl;
		if (!this.is_reserved(cr))
			_del_lbl = "\n\n<a href=\"javascript:query_delete_file('"+this.js_encode(cr)+"')\">"+this.i18n.DELETE_FILE+"</a>\n";
		else
			_del_lbl = "";
		xhtml = "<pre id='_file_ct' class=\"embedded\">"+this.xhtml_encode(pview_data)+"</pre>"+
				pview_link+"<br /><hr />"+this.i18n.FILE_SIZE+": "+_convert_bytes(ext_size)+
				"<br />" + this.last_modified(page_mts[pi])+
				"<br /><br />XHTML transclusion:"+this.parser.parse("\n{{{[[Include::"+cr+"]]}}}"+
				"\n\nRaw transclusion:\n\n{{{[[Include::"+cr+"|raw]]}}}"+
				_del_lbl+"\n<a href=\"javascript:query_export_file('"+this.js_encode(cr)+"')\">"+this.i18n.EXPORT_FILE+"</a>\n");
	} else { // etype == image
		var img_name = cr.substr(cr.indexOf("::")+2);
		xhtml = this.parser.parse("= "+img_name+"\n\n"+
		"<s"+"cript> setTimeout(\"_img_properties_show('"+
				text.match(/^data:\s*([^;]+);/)[1] + "', "+
				text.length + ", " +
				(text.match(/^data:\s*[^;]*;\s*[^,]*,\s*/)[0]).length+", "+
				page_mts[pi]+
				")\");"+
		"</s"+"cript>"+
		"<img id=\"img_tag\" class=\"embedded\" src=\""+text+"\" alt=\""+this.xhtml_encode(img_name)+"\" />"+
		"\n\n<div id=\"img_desc\">"+this.i18n.LOADING+"</div>"+
		"\nSimple transclusion:\n\n{{{[[Include::"+cr+"]]}}}\n\nTransclusion with additional attributes:\n\n{{{[[Include::"+cr+"|border=\"0\" onclick=\"go_to('"+
		this.js_encode(cr)+"')\" style=\"cursor:pointer\"]]}}}\n"+
		"\n<a href=\"javascript:query_delete_image('"+this.js_encode(cr)+"')\">"+this.i18n.DELETE_IMAGE+"</a>\n"+
		"\n<a href=\"javascript:query_export_image('"+this.js_encode(cr)+"')\">"+this.i18n.EXPORT_IMAGE+"</a>\n");
	}
	return xhtml;
}

// export a base64-encoded image to a file
woas["export_image"] = function(page, dest_path) {
	var pi=this.page_index(page);
	if (pi==-1)
		return false;
	var data=this.get__text(pi);
	if (data==null)
		return false;
	return this._b64_export(data, dest_path);
}

// used to export files/images
woas["export_file"] = function(page, dest_path) {
	var pi=this.page_index(page);
	if (pi==-1)
		return false;
	var data=this.get__text(pi);
	if (data==null)
		return false;
	// attempt to save the file (binary mode)
	return this.save_file(dest_path, this.file_mode.BINARY, decode64(data));
}

woas["_embed_process"] = function(etype) {
	// pick the correct mode for file inclusion
	// normalize etype to the correspondant binary flag value
	var desired_mode;
	if (etype == "image") {
		desired_mode = this.file_mode.DATA_URI;
		etype = 12;
	} else {
		desired_mode = this.file_mode.BASE64;
		etype = 4;
	}
	
	// load the data in DATA:URI mode
	var ct = this.load_file(null, desired_mode);
	if ((ct === false) || ((typeof ct != "string") || !ct.length)) {
		this.alert(this.i18n.LOAD_ERR);
		return false;
	}
	
	pages.push(ct);
	page_attrs.push(etype);
	page_titles.push(current);
	// set modified timestamp to now
	page_mts.push(Math.round(new Date().getTime()/1000));
	
	// save this last page
	this.commit(page_titles.length-1);
	
	this.refresh_menu_area();
	return this.set_current(current, true);
}

woas["_get_special"] = function(cr, interactive) {
	var text = null;
	var pi = this.shortcuts.indexOf(cr);
	cr = "Special::" + cr;
	if (pi != -1) {
		var fn = this.shortcuts_js[pi];
		var is_cmd = (fn.substr(0,4)=="cmd_");
		if (!interactive && is_cmd)
			return null;
		text = this[fn]();
		// skip the cmd shortcuts
		if (is_cmd)
			return null;
	} else
//	log("Getting special page "+cr);	// log:0
/*			if (this.is_embedded(cr)) {
				text = this._get_embedded(cr, this.is_image(cr) ? "image":"file");
				if (text == null) {
					if (_decrypt_failed)
						_decrypt_failed = false;
					return;
				}
				this._add_namespace_menu("Special");
				
				this.load_as_current(cr, text, );
				return;
			}	*/
		text = this.get_text(cr);
	if(text == null) {
		if (this.tweak.edit_override && interactive) {
			this._create_page("Special", cr.substr(9), true, false);
			return null;
		}
		if (interactive)
			this.alert(this.i18n.INVALID_SPECIAL);
	}
	return text;
}

woas["get_javascript_page"] = function(cr) {
	var emsg = "-", text;
	try {
		text = eval(cr);
		if (text == null)
			return null;
	}
	catch (e) {
		emsg = e.toString();
	}
	if (text == null) {
		this.crash("Dynamic evaluation of '"+cr+"' failed!\n\nError message:\n\n"+emsg);
		return null;
	}
	return text;
}

// Load a new current page
// return true if page needs to be saved in history, false otherwise
woas["set_current"] = function (cr, interactive) {
	var text, namespace;
	result_pages = [];
	// eventually remove the previous custom script
	this._clear_swcs();
	if (cr.substring(cr.length-2)=="::") {
		text = this._get_namespace_pages(cr);
		namespace = cr.substring(0,cr.length-2);
		cr = "";
	} else {
		var p = cr.indexOf("::");
		// skip not found references but also null namespace references
		if (p>0) {
			namespace = cr.substring(0,p);
//			log("namespace of "+cr+" is "+namespace);	// log:0
			cr = cr.substring(p+2);
				switch (namespace) {
					case "Javascript":
					// this namespace will deprecate many others
					text = this.get_javascript_page(cr);
					if (text == null)
						return false;
					break;
					case "Special":
						text = this._get_special(cr, interactive);
						if (text == null)
							return false;
						break;
					case "Tagged": // deprecated
					case "Tags":
						text = this._get_tagged(cr);
						if (text == null)
							return false;
						break;
					case "Lock":
						pi = this.page_index(cr);
						if (this.AES.key.length) {
							// display a message
							if (confirm(this.i18n.LOCK_CONFIRM.sprintf(cr)+
								(last_AES_page ? this.i18n.LOCK_CONFIRM_LAST.sprintf(last_AES_page) : ''))) {
								this._finalize_lock(pi);
								return false;
							}
						}
						text = this.get_text("Special::Lock");
						break;
					case "Unlock":
						pi = this.page_index(cr);
						if (!confirm("Do you want to remove encryption for page \""+cr+"\"?"))
							return;
						text = this.get_text(cr);
						if (_decrypt_failed) {
							_decrypt_failed = false;
							return false;
						}
						pages[pi] = text;
						page_attrs[pi] -= 2;
						if (!this.config.key_cache)
							this.AES.clearKey();
						if (this.set_current(cr, true)) {
							this.save_page(cr);
							return true;
						}
						return false;
					case "WoaS":
						pi = woas.page_index(namespace+"::"+cr);
						var real_t = page_titles[pi];
/*						if (this.is__embedded(pi)) {
							//TODO: do not use namespace to guess the embedded file type
							text = this._get__embedded(real_t, pi, "file");
						} else { */
							text = this.get_text(real_t);
							if (text !== null) {
								switch (cr) {
									case "Plugins":
										text = this.parser.parse(text + this._plugins_list());
									break;
									case "Aliases":
									case "Bootscript":
									// page is stored plaintext
									break;
									default:
										text = this.parser.parse(text);
								}
							}	
//						}
						if(text === null) {
							if (_decrypt_failed)
								_decrypt_failed = false;
							return false;
						}
						this._add_namespace_menu(namespace);
						if (namespace.length)
							cr = real_t;
						this.load_as_current(cr, text, page_mts[pi]);
						return;
					case "File":
					case "Image":
						text = this._get_embedded(namespace+"::"+cr, namespace.toLowerCase());
						if(text == null) {
							if (_decrypt_failed)
								_decrypt_failed = false;
							return false;
						}
						this._add_namespace_menu(namespace);
						if (namespace.length)
							cr = namespace + "::" + cr;
						this.load_as_current(cr, text, page_mts[this.page_index(namespace+"::"+cr, namespace.toLowerCase())]);
						return true;
						break;
					default:
						text = this.get_text(namespace+"::"+cr);
				}

		} else {
			namespace = "";
			text = this.get_text(cr);
		}
	}
	
	if(text == null) {
		if (_decrypt_failed) {
			_decrypt_failed = false;
			return false;
		}
		if (!this._create_page(namespace, cr, true, false))
			return false;
//		log("Editing new page "+namespace+cr);	// log:0
		return true;
	}
	
	this._add_namespace_menu(namespace);

	// hard-set the current page to the namespace page
	if (namespace.length) {
		cr = namespace + "::" + cr;
		pi = this.page_index(cr);
		if (pi)
			mts = page_mts[pi];
		else mts = null;
	} else {
		pi = this.page_index(cr);
		cr = page_titles[pi];
		mts = page_mts[pi];
	}
	
	return this.load_as_current(cr, this.parser.parse(text), mts);
}

// StickWiki custom scripts array
woas["swcs"] = [];

woas["_clear_swcs"] = function () {
//	setHTML(swcs, "");
	if (!this.swcs.length) return;
	for(var i=0;i<this.swcs.length;i++) {
		document.getElementsByTagName("head")[0].removeChild(this.swcs[i]);
	}
	this.swcs = [];
}

woas["create_breadcrumb"] = function(title) {
	var tmp=title.split("::");
	if (tmp.length==1)
		return title;
	var s="", partial="", js="";
	for(var i=0;i<tmp.length-1;i++) {
		partial += tmp[i]+"::";
		js = "go_to('"+this.js_encode(partial)+"')";
		if (kbd_hooking)
			s+= tmp[i]+" :: ";
		else
			s += "<a href=\"javascript:"+js+"\" onclick=\""+js+"\">"+tmp[i]+"</a> :: ";		
	}
	// add page title
	return s+tmp[tmp.length-1];
}

woas["_activate_scripts"] = function() {
	// add the custom scripts (if any)
	if (this.parser.script_extension.length) {
//		log(this.parser.script_extension.length + " javascript files/blocks to process");	// log:0
		var s_elem, is_inline;
		for (var i=0;i<this.parser.script_extension.length;i++) {
			s_elem = document.createElement("script");
			s_elem.type="text/javascript";
			s_elem.id = "sw_custom_script_"+i;
			is_inline = new String(typeof(this.parser.script_extension[i]));
			is_inline = (is_inline.toLowerCase()=="string");
			if (!is_inline)
				s_elem.src = this.parser.script_extension[i][0];
			document.getElementsByTagName("head")[0].appendChild(s_elem);
			if (is_inline)
				woas.setHTML(s_elem, this.parser.script_extension[i]);
			this.swcs.push(s_elem);
		}
	}
}

woas["_set_title"] = function (new_title) {
	var wt=$("wiki_title");
	// works with IE6, FF, etc.
	wt.innerHTML = this.create_breadcrumb(new_title);
	document.title = new_title;
}

woas["last_modified"] = function(mts) {
	// do not show anything when the timestamp is magic (zero)
	if (mts == 0)
		return "";
	return this.i18n.LAST_MODIFIED + (new Date(mts*1000)).toLocaleString();
}

// actually load a page given the title and the proper XHTML
woas["load_as_current"] = function(title, xhtml, mts) {
	if (typeof title == "undefined") {
		this.crash("load_as_current() called with undefined title");
		return false;
	}
	scrollTo(0,0);
	log("load_as_current(\""+title+"\") - "+(typeof xhtml == "string" ? (xhtml.length+" bytes") : (typeof xhtml)));	// log:1
	$("wiki_text").innerHTML = xhtml;
	this.refresh_mts(mts);

	this._set_title(title);
	this.update_nav_icons(title);
	current = title;
	this._activate_scripts();
	
	return true;
}

woas["refresh_mts"] = function(mts) {
	// generate the last modified string to append
	if (mts) {
		$("wiki_mts").innerHTML = this.last_modified(mts);
		$.show("wiki_mts");
	} else
		$.hide("wiki_mts");
}

woas["_finalize_lock"] = function(pi) {
	this._perform_lock(pi);
	var title = page_titles[pi];
	this.set_current(title, true);
	if (!this.config.key_cache) {
		this.AES.clearKey();
		last_AES_page = "";
	} else
		last_AES_page = title;
	this.save_page_i(pi);
}

woas["_perform_lock"] = function(pi) {
	pages[pi] = this.AES.encrypt(pages[pi]);
//	log("E: encrypted length is "+pages[pi].length);	// log:0
	page_attrs[pi] += 2;
}

woas["_add_namespace_menu"] = function(namespace) {
//	log("adding namespace menu for \""+namespace+"\"");	// log:0
//	log("current namespace is \""+current_namespace+"\"");	// log:0
	if (current_namespace == namespace)
		return;
	var pi;
	if (namespace == "")
		pi = -1;
	else
		pi = this.page_index(namespace+"::Menu");
	if (pi==-1) {
//		log("no namespace menu found");	// log:0
		$("ns_menu_area").innerHTML = "";
		if (current_namespace!="") {
			$.hide("ns_menu_area");
			$.hide("ns_menu_edit_button");
		}
		current_namespace = namespace;
		return;
	}
	var menu = this.get__text(pi);
	if (menu == null) {
//		log("Could not retrieve namespace menu");	// log:0
		$("ns_menu_area").innerHTML = "";
	} else {
//		log("Parsing "+menu.length+" bytes for namespace menu");	// log:0
		$("ns_menu_area").innerHTML = this.parser.parse(menu);
	}
	// if the previous namespace was empty, then show the submenu areas
//	if (current_namespace=="") {
		$.show("ns_menu_area");
		$.show("ns_menu_edit_button");
//	}
	current_namespace = namespace;	
}

woas["refresh_menu_area"] = function() {
	var tmp = current_namespace;
	current_namespace=parse_marker;
	this._add_namespace_menu(tmp);
	var menu = this.get_text("::Menu");
	if (menu == null)
		$("menu_area").innerHTML = "";
	else {
		$("menu_area").innerHTML = this.parser.parse(menu);
		this._activate_scripts();
	}
}

woas["_gen_display"] = function(id, visible, prefix) {
	if (visible)
		$.show(prefix+"_"+id);
	else
		$.hide(prefix+"_"+id);
}

woas["img_display"] = function(id, visible) {
	if (!this.browser.ie || this.browser.ie8) {
		this._gen_display(id, visible, "img");
		this._gen_display(id, !visible, "alt");
	} else {
		this._gen_display(id, !visible, "img");
		this._gen_display(id, visible, "alt");
	}
}

woas["menu_display"] = function(id, visible) {
	this._gen_display(id, visible, "menu");
//	log("menu_"+id+" is "+$("menu_"+id).style.display);
}

// auto-save thread
function _auto_saver() {
	if (woas.save_queue.length && !kbd_hooking) {
		woas.commit(woas.save_queue);
		woas.menu_display("save", false);
	}
	if (_this.config.auto_save)
		woas._asto = setTimeout("_auto_saver()", woas.config.auto_save);
}

// save configuration on exit
woas["before_quit"] = function () {
	if (this.save_queue.length)
		this.commit(this.save_queue);
	else {
		if (this.config.save_on_quit && cfg_changed)
			this.cfg_commit();
	}
	return true;
}

woas["setHTML"] = woas["getHTML"] = null;

// when the page is loaded - onload, on_load
woas["after_load"] = function() {
	log("***** Woas v"+this.version+" started *****");	// log:1

//	document.body.style.cursor = "wait";
	
	if (this.browser.ie) {	// some hacks for IE
		this.setHTML = function(elem, html) {elem.text = html;};
		this.getHTML = function(elem) {return elem.text};
		var obj = $("sw_wiki_header");
		obj.style.filter = "alpha(opacity=75);";
		if (this.browser.ie6) {
			$("sw_wiki_header").style.position = "absolute";
			$("sw_menu_area").style.position = "absolute";
		}
	} else {
		this.setHTML = function(elem, html) {elem.innerHTML = html;};
		this.getHTML = function(elem) {return elem.innerHTML;};
//		setup_uri_pics($("img_home"),$("img_back"),$("img_forward"),$("img_edit"),$("img_cancel"),$("img_save"),$("img_advanced"));
	}
	
	this.setHTML($("woas_wait_text"), this.i18n.LOADING);
	
	$('a_home').title = this.config.main_page;
	$('img_home').alt = this.config.main_page;
	
	if (this.config.debug_mode) {
		$.show_ni("debug_info");
		$.show_ni("woas_debug_panel");
	} else {
		$.hide_ni("debug_info");
		$.hide_ni("woas_debug_panel");
	}

	// properly initialize navigation bar icons
	// this will cause the alternate text to display on IE6
	this.img_display("back", true);
	this.img_display("forward", true);
	this.img_display("home", true);
	this.img_display("edit", true);
	this.img_display("print", true);
	this.img_display("advanced", true);
	this.img_display("cancel", true);
	this.img_display("save", true);
	this.img_display("lock", true);
	this.img_display("unlock", true);
	this.img_display("setkey", true);
	this.img_display("help", true);
	
	// customized keyboard hook
	document.onkeydown = kbd_hook;

	// Go straight to page requested
	var qpage=document.location.href.split("?")[1];
	if(qpage)
		current = unescape(qpage);

	// check integrity of WoaS when finished - only in debug mode
	if (this.tweak.integrity_test)
		if (!this.integrity_test())
			return;
		
	// first thing to do: load the actual pages!
	if (this.tweak.native_wsif) {
		if (!this._native_load()) {
			// the file load error is already documented to user
			if (this.wsif.emsg !== null)
				this.crash("Could not load WSIF pages data!\n"+this.wsif.emsg);
			return;
		}
	}
		
//	this.swcs = $("sw_custom_script");

	this._load_aliases(this.get_text("WoaS::Aliases"));

	this._create_bs();	//moved here to fix bug 1898587
	this.set_current(current, true);
	this.refresh_menu_area();
	// feed the current title before running the disable edit mode code
	this.prev_title = current;
	this.disable_edit();
	
	if (this.config.permit_edits)
		$.show("menu_edit_button");
	else
		$.hide("menu_edit_button");
	
	// enable the auto-saver hook
	if (this.config.cumulative_save && this.config.auto_save)
		this._asto = setTimeout("_auto_saver(woas)", this.config.auto_save);
	
//	this._create_bs();
	
	this["_editor"] = new TextAreaSelectionHelper($("wiki_editor"));
	
	// set some fixup CSS with some browsers
	if (this.browser.firefox || this.browser.opera)
		this.set_css(this.get_css());
	
//	this.progress_finish();
	$.hide("loading_overlay");
}

// match all aliases defined in a page
woas["_load_aliases"] = function(s) {
	this.aliases = [];
	if (s==null || !s.length) return;
	s.replace(/^(\$[A-Za-z0-9_]{2,})\s+([\s\S]+)$/gm, function(str, alias, value) {
		// save the array with the alias regex and alias value
		var cpok = [ new RegExp(RegExp.escape(alias), "g"), value];
		woas.aliases.push(cpok);
	});
}

woas["_create_bs"] = function() {
	var s=this.get_text("WoaS::Bootscript");
	if (s==null || !s.length) return false;
	// remove the comments
	s = s.replace(/^\s*\/\*(.|\n)*?\*\/\s*/g, '');
	if (!s.length) return false;
	_bootscript = document.createElement("script");
	_bootscript.type="text/javascript";
	_bootscript.id = "woas_bootscript";
	document.getElementsByTagName("head")[0].appendChild(_bootscript);
	this.setHTML(_bootscript, s);
	return true;
}

// remove bootscript (when erasing for example)
woas["_clear_bs"] = function() {
	if (_bootscript!=null) {
		var head = document.getElementsByTagName("head")[0];
		head.removeChild(_bootscript);
		_bootscript = null;
	}
}

function ff_fix_focus() {
//runtime fix for Firefox bug 374786
	if (woas.browser.firefox)
		$("wiki_text").blur();
}

function search_focus(focused) {
	search_focused = focused;
	if (!focused)
		ff_fix_focus();
}

function custom_focus(focused) {
	_custom_focus = focused;
	if (!focused)
		ff_fix_focus();
}

// set to true when inside an edit textarea
var kbd_hooking=false;

function kbd_hook(orig_e) {
	if (!orig_e)
		e = window.event;
	else
		e = orig_e;
		
	if (!kbd_hooking) {
		if (_custom_focus)
			return orig_e;
		if (search_focused) {
			// return key
			if (e.keyCode==13) {
				ff_fix_focus();
				do_search();
				return false;
			}
			return orig_e;
		}
		// backspace or escape
		if ((e.keyCode==8) || (e.keyCode==27)) {
			go_back();
			ff_fix_focus();
			return false;
		}
	}

	// escape
	if (e.keyCode==27) {
		cancel();
		ff_fix_focus();
		return false;
	}

	return orig_e;
}

// when the page is resized
woas["_onresize"] = function() {
	var we = $("wiki_editor");
	if (!we) {
		log("no wiki_editor");
		return;
	}
	we.style.width = window.innerWidth - 30 + "px";
	we.style.height = window.innerHeight - 150 + "px";
}

if (!woas.browser.ie)
	window.onresize = woas._onresize;

woas["update_nav_icons"] = function(page) {
	this.menu_display("back", (backstack.length > 0));
	this.menu_display("forward", (forstack.length > 0));
	this.menu_display("advanced", (page != "Special::Advanced"));
	this.menu_display("edit", this.edit_allowed(page));
	this.update_lock_icons(page);
}

woas["update_lock_icons"] = function(page) {
	var cyphered, can_lock, can_unlock;
	if (result_pages.length<2) {
		var pi = this.page_index(page);
		if (pi==-1) {
			can_lock = can_unlock = false;
			cyphered = false;
		} else {
			can_unlock = cyphered = this.is__encrypted(pi);
			can_lock = !can_unlock && this.config.permit_edits;
		}
	} else {
//		log("result_pages is ("+result_pages+")");	// log:0
		can_lock = can_unlock = (result_pages.length>0);
		cyphered = false;
	}
	
	// update the encryption icons accordingly
	this.menu_display("lock", !kbd_hooking && can_lock);
	this.menu_display("unlock", !kbd_hooking && can_unlock);
	// we can always input decryption keys by clicking the setkey icon
	//this.menu_display("setkey", cyphered);
	var cls;
	if (cyphered || (page.indexOf("Locked::")==0))
		cls = "woas_text_area locked";
	else
		cls = "woas_text_area";
	$("wiki_text").className = cls;
}

// disable edit-mode after cancel/save actions
woas["disable_edit"] = function() {
//	log("DISABLING edit mode");	// log:0
	kbd_hooking = false;
	// reset change buffer used to check for page changes
	this.change_buffer = null;
	this.old_title = null;
	// check for back and forward buttons - TODO grey out icons
	this.update_nav_icons(current);
	this.menu_display("home", true);
	if (this.config.cumulative_save)
		this.menu_display("save", this.save_queue.length!=0);
	else
		this.menu_display("save", false);
	this.menu_display("cancel", false);
	this.menu_display("print", true);
	this.menu_display("setkey", true);
	$.show("i_woas_text_area");
	// aargh, FF eats the focus when cancelling edit
	$.hide("edit_area");
	this._set_title(this.prev_title);
}

function _lock_pages(arr) {
	this.alert("Not yet implemented");
}

function _unlock_pages(arr) {
	this.alert("Not yet implemented");
}

woas["edit_allowed"] = function(page) {
	if (this.tweak.edit_override)
		return (this.page_index(page) != -1);
	if (!this.config.permit_edits)
		return false;
	if (this.is_reserved(page))
		return false;
	return !this.is_readonly(page);
}

// setup the title boxes and gets ready to edit text
woas["current_editing"] = function(page, disabled) {
//	log("current = "+current+", current_editing(\""+page+"\", disabled: "+disabled+")");	// log:0
	this.prev_title = current;
	$("wiki_page_title").disabled = (disabled && !this.tweak.edit_override ? "disabled" : "");
	$("wiki_page_title").value = page;
	kbd_hooking = true;
	this._set_title(this.i18n.EDITING.sprintf(page));
	// current must be set BEFORE calling enabling menu edit
//	log("ENABLING edit mode");	// log:0
	this.menu_display("back", false);
	this.menu_display("forward", false);
	this.menu_display("advanced", false);
	this.menu_display("setkey", false);
	this.menu_display("home", false);
	this.menu_display("edit", false);
	this.menu_display("print", false);
	this.menu_display("save", true);
	this.menu_display("cancel", true);
	this.update_lock_icons(page);
	$.hide("i_woas_text_area");

	// FIXME!
	if (!this.browser.ie)	{
		$("wiki_editor").style.width = window.innerWidth - 35 + "px";
		$("wiki_editor").style.height = window.innerHeight - 180 + "px";
	}
	
	$.show("edit_area");

	$("wiki_editor").focus();
	current = page;
	scrollTo(0,0);
}

woas["change_buffer"] = null;
woas["old_title"] = null;

// sets the text and allows changes monitoring
woas["edit_ready"] = function (txt) {
	$("wiki_editor").value = txt;
	// save copy of text to check if anything was changed
	// do not store it in case of ghost pages
	this.change_buffer = txt;
	this.old_title = $("wiki_page_title").value;
}

var _servm_shown = false;

function _servm_alert() {
	if (woas._server_mode) {
		// show the message only once
		if (!_servm_shown) {
			this.alert(this.i18n.SERVER_MODE);
			_servm_shown = true;
		}
	}
}

woas["edit_page"] = function(page) {
	if (!this.edit_allowed(page)) {
		log("Not allowed to edit page "+page);	// log:1
		return;
	}
	_servm_alert();
	var tmp = this.get_text(page);
	if (tmp===null) return false;
	if (this.is_embedded(page) && !this.is_image(page))
		tmp = decode64(tmp);
	// setup the wiki editor textbox
	this.current_editing(page, this.is_reserved(page));
	this.edit_ready(tmp);
	return true;
}

//API1.0: check if a title is valid
woas["valid_title"] = function(title) {
	if (title.length == 0) {
		this.alert(this.i18n.EMPTY_TITLE);
		return false;
	}
	if (title.length > 256) {
		this.alert(this.i18n.TOO_LONG_TITLE.sprintf(256));
		return false;
	}
	if (title.indexOf("[")!=-1 || title.indexOf("]")!=-1 ||
		title.indexOf("{")!=-1 || title.indexOf("}")!=-1 ||
		title.indexOf("<") != -1 || title.indexOf(">")!=-1 ||
		title.indexOf("|")!=-1) {
		this.alert(this.i18n.INVALID_TITLE);
		return false;
	}
	if (title.substr(-2)=="::") {
		this.alert(this.i18n.ERR_PAGE_NS);
		return false;
	}
	var ns = this.get_namespace(title, true);
	if (ns.length && this.is_reserved(ns+"::") && !this.tweak.edit_override) {
		this.alert(this.i18n.ERR_RESERVED_NS.sprintf(title, ns));
		return false;
	}
	return true;
}

woas["rename_page"] = function(previous, newpage) {
	log("Renaming "+previous+" to "+newpage);	// log:1
	if (this.page_index(newpage)!=-1) {
		this.alert(this.i18n.PAGE_EXISTS.sprintf(newpage));
		return false;
	}
	var pi = this.page_index(previous);
	page_titles[pi] = newpage;
	var re = new RegExp("\\[\\[" + RegExp.escape(previous) + "(\\]\\]|\\|)", "gi");
	var changed;
	for(var i=0,l=pages.length;i<l;i++) {
		//FIXME: should not replace within the nowiki blocks!
		var tmp = this.get_page(i);
		if (tmp==null)
			continue;
		changed = false;
		tmp = tmp.replace(re, function (str) {
			changed = true;
			return "[["+newpage+str.substring(previous.length+2);
		});
		if (changed)
			this.set__text(i, tmp);
	}
	if (previous == this.config.main_page)
		this.config.main_page = newpage;
	// make sure that previous title is consistent
	if (this.prev_title === previous)
		this.prev_title = newpage;
	return true;
}

// applies some on-the-fly patches for the syntax changes in v0.9
function _new_syntax_patch(text) {
	//BUG: will also modify text contained in nowiki blocks
	text = text.replace(/(^|\n)(\+*)([ \t])/g, function (str, $1, $2, $3) {
		return $1+String("*").repeat($2.length)+$3;
	});
	
	return text;
}

function _css_obj() {
	return document.getElementsByTagName("style")[0];
}

woas["FF2_CSS_FIXUP"] = "\n.wiki_preformatted { white-space: -moz-pre-wrap !important; }\n";

// Opera gets 100% as real 100%
//woas["OPERA_FIXUP"] = "\ndiv.wiki_header, #loading_overlay, #woas_pwd_query, #woas_pwd_mask { width: 100%; }\n";

woas["get_css"] = function() {
	var co = document.getElementsByTagName("style")[0];
	var css = co.innerHTML;
	if (this.browser.firefox2) {
		// remove the fixup if present
		if (css.substr(0, this.FF2_CSS_FIXUP.length) == this.FF2_CSS_FIXUP)
			css = css.substr(this.FF2_CSS_FIXUP.length);
	}
/*	if (this.browser.opera) {
		// remove the fixup if present
		if (css.substr(0, this.OPERA_FIXUP.length) == this.OPERA_FIXUP)
			css = css.substr(this.OPERA_FIXUP.length);
	} */
	return css;
}
	
woas["setCSS"] = function(new_css) { this.set_css(new_css); }

//API1.0: set WoaS CSS
woas["set_css"] = function(new_css) {
	// with some browsers we have weird hot-fixes
    // Mozilla, since 1999
    if (this.browser.firefox2)
		new_css = this.FF2_CSS_FIXUP + new_css;
//	if (this.browser.opera)
//		new_css = this.OPERA_FIXUP + new_css;
	if (!this.browser.ie) {
		_css_obj().innerHTML = new_css;
		return;
	}
	var head=document.getElementsByTagName('head')[0];
	var sty=document.styleSheets[0];
	sty.cssText = new_css;
}

woas["get_raw_content"] = function() {
	var c=$("wiki_editor").value;
	// remove CR added by some browsers
	//TODO: check if ie8 still adds these
	if (this.browser.ie || this.browser.opera)
		c = c.replace("\r\n", "\n");
	return c;
}

// action performed when save is clicked
woas["save"] = function() {
	// we will always save ghost pages if save button was hit
	var null_save = !this._ghost_page;
	// always reset ghost page flag
	this._ghost_page = false;
	// when this function is called in non-edit mode we perform a full commit
	// for cumulative save
	if (this.config.cumulative_save && !kbd_hooking) {
		this.full_commit();
		this.menu_display("save", false);
		return;
	}
	var raw_content = this.get_raw_content();
	
	// check if this is a null save only if page was not a ghost page
	if (null_save)
		null_save = (raw_content === this.change_buffer);
	
	var can_be_empty = false;
	switch(current) {
		case "Special::Edit CSS":
			if (!null_save)
				this.setCSS(raw_content);
			back_to = null;
			current = "Special::Advanced";
			$("wiki_page_title").disabled = "";
			break;
		case "WoaS::Aliases":
			if (!null_save)
				this._load_aliases(raw_content);
			// fallback wanted
		case "WoaS::Bootscript":
			can_be_empty = true;
			// fallback wanted
		default:
			// check if text is empty
			if (!null_save && !can_be_empty && (raw_content == "")) {
				if (confirm(this.i18n.CONFIRM_DELETE.sprintf(current))) {
					var deleted = current;
					this.delete_page(current);
					this.disable_edit();
					back_or(this.config.main_page);
				}
				return;
			} else {
				var new_title = this.trim($("wiki_page_title").value);
				// here the page gets actually saved
				if (!null_save || (this.old_title !== new_title)) {
					null_save = false;
					this.set_text(raw_content);
					// disallow empty titles
					if (!this.valid_title(new_title))
						return false;
					if (this.is_menu(new_title)) {
						this.refresh_menu_area();
						back_to = this.prev_title;
					} else {
						if (new_title != current) {
							if (!this.rename_page(current, new_title))
								return false;
						}
						back_to = new_title;
					}
				} else
					back_to = this.prev_title;
			}
	}
	var saved = current;
	if (back_to !== null)
		this.set_current(back_to, true);
	else { // used for CSS editing
		back_or(this.config.main_page);
		//TODO: refresh mts?
	}
	if (!null_save)
		this.refresh_menu_area();
	this.disable_edit();
	if (!null_save)
		this.save_page(saved);
}

// push a page into history
function history_mem(page) {
	if (backstack.length>6)
		backstack = backstack.slice(1);
	backstack.push(page);
}

woas["save_page"] = function(title) {
	return this.save_page_i(this.page_index(title));
}

woas["save_page_i"] = function(pi) {
	// update the modified time timestamp (only when not in dev-mode)
	if (!this.tweak.edit_override)
		page_mts[pi] = Math.round(new Date().getTime()/1000);
	// this is the dummy function that will allow more efficient file saving in future
	if (this.config.cumulative_save) {
		// add the page to the bucket, if it isn't already in
		if (!this.save_queue.length) {
			this.save_queue.push(pi);
			this.menu_display("save", true);
		} else {
			if (this.save_queue.indexOf(pi)==-1)
				this.save_queue.push(pi);
		}
		log("save_queue = ("+this.save_queue+")");	// log:1
		return true;
	}
	return this.commit([pi]);
}

var max_keywords_length = 250;
var max_description_length = 250;

// proper autokeywords generation functions begin here

var reKeywords = new RegExp("[^\\s\x01-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]{2,}", "g");
function _auto_keywords(source) {
	if (!source.length) return "";
	var words = source.match(reKeywords);
	if (!words.length) return "";
	var nu_words = new Array();
	var density = new Array();
	var wp=0;
	for(var i=0;i<words.length;i++) {
		if (words[i].length==0)
			continue;
		cond = (woas.i18n.common_words.indexOf(words[i].toLowerCase())<0);
		if (cond) {
			wp = nu_words.indexOf(words[i]);
			if (wp < 0) {
				nu_words = nu_words.concat(new Array(words[i]));
				density[nu_words.length-1] = {"i":nu_words.length-1, "w":1};
			} else
				density[wp].w = density[wp].w + 1;
		}
	}
	if (!density.length) return "";
	words = new Array();
	var keywords = "", nw = "";
	density = density.sort(function(a,b){return b.w - a.w});
	var ol=0;
	for(i=0;i<density.length;i++) {
		nw = nu_words[density[i].i];
		if (ol+nw.length>max_keywords_length)
			break;
		keywords = keywords+","+nw;
		ol+=nw.length;
	}
	return keywords.substr(1);
}

var _g_br_rx = new RegExp("<"+"br\\s?\\/?>", "gi");
woas["xhtml_to_text"] = function(s) {
	return s.replace(_g_br_rx, "\n").replace(/<\/?\w+[^>]*>/g, ' ').replace(/&#?([^;]+);/g, function(str, $1) { if (!isNaN($1)) return String.fromCharCode($1); else return ""; });
}

woas.cancel_edit = function() {
	// there was some change, ask for confirm before cancelling
	if ((this.get_raw_content() !== this.change_buffer) ||
		(this.trim($("wiki_page_title").value) !== this.old_title)) {
		if (!confirm(this.i18n.CANCEL_EDITING))
			return;
	}
	if (kbd_hooking) {
		// we will cancel the creation of last page
		if (this._ghost_page) {
			// we assume that the last page is the ghost page
			pages.pop();
			page_mts.pop();
			page_titles.pop();
			page_attrs.pop();
			this._ghost_page = false;
		}
		this.disable_edit();
	}
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** datalayer.js ***/
// this file contains API for the data layer abstraction

// private function used during development for page contents versioning
woas["_native_save"] = function(plist) {
	// if we have a native sub-path, trigger the native WSIF data export
	if (!this.tweak.native_wsif)
		return;
	// always save in the root directory
	var done;
	// code disabled since we always save the full backup
//	if (typeof plist != "undefined" )
//		done = this._native_wsif_save(path,	true, true, "", true, plist); else
	done = this._native_wsif_save(woas.ROOT_DIRECTORY,	true, true, "", true);

	log("saved "+done+" pages natively"); // log:1
}

//API1.0: save all pages
woas["full_commit"] = function() {
	this._native_save();
	return this._save_to_file(true);
}

//API1.0: save WoaS configuration
woas["cfg_commit"] = function() {
	return this._save_to_file(false);
}

//API1.0: save specific list of pages
// plist is a list of page indexes which need to be saved
woas["commit"] = function(plist) {
	this._native_save(plist);
	// performs full save, while the single page + global header could be saved instead
	return this._save_to_file(true);
}

//API1.0: delete specific list of pages
// plist is a list of page indexes which need to be saved (not allowed to be empty)
woas["commit_delete"] = function(plist) {
	// update only the native WSIF index (leaves back deleted pages)
	this._native_save([]);
	// performs full save, while the single page + global header could be saved instead
	return this._save_to_file(true);
}

//API1.0: event called after some page is being saved
// plist can be undefined if all pages were saved
woas["after_pages_saved"] = function(plist) {
	// we assume that everything was saved
	if (typeof plist == "undefined") {
		this.save_queue = [];
		return;
	}
	// we remove each of the saved pages from queue (needs TESTING!)
	for(var i=0,l=plist.length;i<l;i++) {
		var p = this.save_queue.indexOf(plist[i]);
		if (p != -1)
			this.save_queue = this.save_queue.slice(0,p).concat(this.save_queue.slice(p+1));
	}
}

//API1.0: event called when the config was successfully saved
woas["after_config_saved"] = function() {
	cfg_changed = false;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** i18n.js ***/

// internationalization language resources
woas['i18n'] = {
	READ_ONLY: "This Wiki on a Stick is read-only",
	WRITE_PROTECTED: "Sorry, this Wiki on a Stick is already write-protected",
	CONFIRM_READ_ONLY: "Are you sure you want to set this WoaS as read-only? You will have to manually edit the file to revert this change.",
	INVALID_SPECIAL: "Invalid special page.",
	INVALID_DATA:"Invalid collected data!",
	CONFIRM_DELETE:"Are you sure you want to DELETE page \"%s\"?",
	CONFIRM_DELETE_ALL1: "Are you going to ERASE all your pages?",
	CONFIRM_DELETE_ALL2: "This is the last confirm needed in order to ERASE all your pages.\n\nALL YOUR PAGES WILL BE LOST\n\nAre you sure you want to continue?",
	DELETE:"Delete page:",
 	DELETE_IMAGE:"Delete embedded image",
 	DELETE_FILE:"Delete embedded file",
 	EXPORT_FILE:"Export file",
 	EXPORT_IMAGE:"Export image",
	CONFIRM_DELETE_FILE: "Are you sure you want to delete this file?",
	INSERT_NEW:"Insert new page title",
	LOAD_ERR: "Cannot load specified file",
	FILE_SELECT_ERR: "A file must be selected",
	PAGE_NOT_FOUND: "Page not found. Do you want to create it?",
	CONFIRM_EXPORT: "Do you want to export %s in the below specified path?",
	ASK_MENU_LINK: "Do you want to add a link into the main menu?",
	PAGE_EXISTS: "A page with title \"%s\" already exists!",
	FILE_DISPLAY_LIMIT: "Only the first 1024 bytes are displayed",
	CONFIRM_DELETE_IMAGE: "Are you sure you want to delete image '%s'?",
	DISPLAY_FULL_FILE: "Display full file",
	ERR_MARKER: "%s marker not found!",
	DUP_NS_ERROR: "Cannot duplicate into File:: or Image:: namespace!",
	PWD_QUERY: "Please enter a password",
	ERR_NO_PWD: "No password set for decryption of page \"%s\"\nPlease click the key icon and enter a password",
	ACCESS_DENIED: "Access denied to page \"%s\"",
	ERR_RESERVED_NS: "You are not allowed to create a page titled \"%s\" because namespace \"%s\" is reserved",
	ERR_SEL_FILE: "A file must be selected",
	ERR_PAGE_NS: "You cannot create a page as a namespace",
	PAGE_NOT_EXISTS: "Page does not exist: ",
	LAST_MODIFIED: "Last Modified: ",
	EXPORT_OK: "%d/%d pages exported successfully",
	STATIC_NOT_FOUND: "Static page \"%s\" not found!",
	ERR_VAR_MARKER: "Marker variable not found!",
	LOCK_CONFIRM: "Do you want to use the last password entered to lock this page \"%s\"?",
	LOCK_CONFIRM_LAST: "The password was last time used on page: %s",
	EMPTY_TITLE: "Pages with empty title are not allowed",
	INVALID_ALIAS: "Invalid alias \"%s\", ignoring it",
	SERVER_MODE: "You are using Wiki on a Stick on a REMOTE server, your changes will not be saved neither remotely or locally.\n\n"+
					"The correct usage of Wiki on a Stick is LOCAL, so you should use a local copy of this page to exploit the save features.\n"+
					"All changes made to this copy of Wiki on a Stick will be lost.",
	PRINT_MODE_WARN: "Sorry, you cannot browse the wiki while in print mode",
	MIME_TYPE: "Mime type",
	FILE_SIZE: "File size",
	B64_REQ: " (requires %s due to base64 encoding)",
	WIDTH: "Width",
	HEIGHT: "Height",
	DELETE_PAGE_PROMPT: "Delete page:",
	CONFIRM_IMPORT_OVERWRITE: "This will OVERWRITE pages with the same title.\n\nAre you sure you want to continue?",
	IMPORT_OK: "%s pages imported successfully (%d system pages skipped)",
	IMPORT_INCOMPAT: "Incompatible version: %s",
	IMPORT_UNRECON: "Unrecognized format",
	NO_ERROR: "No error",
	WSIF_NO_VER: "Could not read WSIF version",
	WSIF_NS_VER: "WSIF version %s not supported!",
	WSIF_NO_HN: "Could not locate header name",
	WSIF_BAD_HV: "Could not locate end of header value",
	ALT_BROWSER_INPUT: "Please specify full path to file \"%s\" because your browser does not allow such path to be read directly for security reasons.",
	CANCEL_EDITING:"Changes to this page will not be saved.",
	TOO_LONG_TITLE: "Maximum title length is %d characters",
	UNSUPPORTED_BROWSER: "Your browser might not be supported, please report a bug with your UserAgent string:\n%s",
	SAVE_ERROR:"Unable to save file \"%s\".",
	UNSPECIFIED_JAVA_ERROR: "Please check the Java console for errors regarding last operation and eventually file a bug report if it's not due to your browser/java restrictions",
	NO_TIDDLY_SAVER:"The TiddlySaver java applet was not available.",
	TIDDLY_HELP:"Please check that TiddlySaver.jar is in the same directory of this WoaS and that you have enabled Java permissions for it",
	NO_JAVA:"It was not possible to use TiddlySaver java applet nor direct Java saving.",
	INVALID_TITLE: "Title cannot contain any of these characters:\n< > | [ ] { }",
	FAILED_ERASE:"Saving the erased wiki has failed, please reload WoaS otherwise you will be working with unconsistent data",
	EDITING:"Editing %s",
	LOADING: "Loading Wiki on a Stick..."
}

// do not use any copyrighted wordlist here
woas.i18n['common_words'] = ['the','of','to' ,'and' ,'a' ,'in' ,'is' ,'it' ,'you' ,'that' ,'he' ,'was' ,'for','on' ,'are' ,'with' ,'as' ,'I' ,'his' ,'they' ,'be' ,'at' ,'one' ,'have' ,'this' ,'from' ,'or' ,'had' ,'by' , 'an', 'all' ];

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** import.js ***/

// function used to collect variables
function get_import_vars(data, ignore) {
	var c=[];
	// rename the variables
	data = data.replace(/([^\\])\nvar (\w+) = /g, function (str, $1, $2) {
		if (ignore && ignore.indexOf($2)!=-1)
			return "\nvar ignoreme = ";
		c.push('sw_import_'+$2);
		return $1+"\nvar sw_import_"+$2+" = ";
	});//.replace(/\\\n/g, '');
	log("collected variables = "+c);	// log:1
		
	c = eval(data+"\n["+c+"];");
	return c;
}

woas["import_wiki"] = function() {
	if(confirm(this.i18n.CONFIRM_IMPORT_OVERWRITE) == false)
		return false;

	// set hourglass
	this.progress_init("Import WoaS");
	
	var fail=false;
	var sys_pages=0;
	do { // a fake do...while to ease failure return
	// load the file as UTF-8
	var ct = this.load_file(null, this.file_mode.ASCII_TEXT);
	if (ct === null) {
		fail = true;
		break;
	}
	if (ct === false) {
		this.alert(this.i18n.LOAD_ERR);
		fail = true;
		break;
	}
	
	var import_css = $('cb_import_css').checked;
	var import_content = $('cb_import_content').checked;
	//TODO: import icon support
	var import_icons = $('cb_import_icons').checked;
	
	// get WoaS version
	var old_version;
	var ver_str = ct.match(/<div .*?id=("version_"|version_).*?>([^<]+)<\/div>/i);
	if (ver_str && ver_str.length>1) {
		ver_str = ver_str[2];
		log("Importing wiki with version string \""+ver_str+"\"");	// log:1
		switch(ver_str)	{
			case "0.03":
				old_version = 3;
				break;
			case "0.04": 
			case "0.04G":
				old_version = 4;
				break;
			default:
				this.alert(this.i18n.IMPORT_INCOMPAT.sprintf(ver_str));
				fail=true;
		}
		if (fail) break;
	} else {
		var ver_str = ct.match(/var version = "([^"]*)";(\r\n|\n)/);
		if (!ver_str)
			ver_str = ct.match(/var woas = \{"version":\s+"([^"]+)"\s*\};(\r\n|\n)/);
		if (ver_str && ver_str.length) {
			ver_str = ver_str[1];
			log("Version string: "+ver_str);	// log:1
			switch (ver_str) {
				case "0.9B":
				case "0.9":
					old_version = 9;
				break;
				case "0.9.2B":
					old_version = 92;
				break;
				case "0.9.3B":
					old_version = 93;
				break;
				case "0.9.4B":
					old_version = 94;
				break;
				case "0.9.5B":
				case "0.9.5C":
//				case "0.9.5D": // development only
					old_version = 95;
				break;
				case "0.9.6B":
//				case "0.9.6C": // development only
					old_version = 96;
					break;
				case "0.9.7B": // never released officially
//				case "0.9.6C": // development only
					old_version = 97;
					break;
				case "0.10.0":
				case "0.10.1":
				case "0.10.2":
				case "0.10.3":
				case "0.10.4":
				case "0.10.5":
				case "0.10.6":
				case "0.10.7":
				case "0.10.8":
				case "0.10.9":
				case "0.11.0":
				case "0.11.1":
					old_version = Number(ver_str.substr(2).replace(/\./g, ""));
					break;
				default:
					this.alert(this.i18n.IMPORT_INCOMPAT.sprintf(ver_str));
					fail=true;
			}
		if (fail) break;
		} else { // below code is not very solid!
//			log("Maybe version 0.02? Please report as a bug");	// log:2
			old_version = 2;
			if (ct.match("<div id=\"?"+escape("Special::Advanced")))
				old_version = 3;
		}
	}

	
	// import the variables
	var new_main_page = this.config.main_page,
		old_main_page = this.config.main_page;
	var old_block_edits = !this.config.permit_edits;
	var page_names = [];
	var page_contents = [];
	var old_page_attrs = [];
	var pc = 0;

	// old versions parsing
	if (old_version	< 9) {
	
	var wiki;
	try {
		wiki = ct.match(/<div .*?id=(wiki|"wiki")[^_\\]*?>((.|\n|\t|\s)*)<\/div>/i)[0];
	} catch(e) {
		this.alert(this.i18n.IMPORT_UNRECON);
		fail = true;
	}
	if (fail) break;
	
	// eliminate comments
	wiki = wiki.replace(/\<\!\-\-.*?\-\-\>/g, "");
	
	// separate variables from wiki
	var vars;
	var p = wiki.search(/<div .*?id=("variables"|variables)[^>]*?>/i);
	if (p!=-1) {
		vars = wiki.substring(p);
		wiki = wiki.substring(0, p);
	} else
		vars = "";
	
	if(old_version == 2) {
		try {
			vars = wiki.match(/\<div .*?id=("main_page"|main_page)>(.*?)\<\/div\>/i)[1];
		} catch(e) {
//			log("No variables found");	// log:0
		}
	}
	
	/* NOTES ABOUT OLD VERSIONS
	v0.10.7:
		* introduced WoaS::Plugins and changed WoaS::Bootscript from embedded to normal
	v0.10.0:
	    * introduced page_mts for global page modified timestamp
	v0.9.7:
		* introduced WoaS::Aliases
	v0.9.6:
		* Special::Bootscript -> WoaS::Bootscript
		
	v0.9.5D (not released)
		* Javascript:: reserved namespace
		* some Special:: pages no more work
	v0.9.5B
		* object orientation of code
		* server_mode disappears
	v0.9.4B
		* introduced Special::Bootscript
	v0.04
		* permit_edits variable appeared here
	v0.02
		* pages were not escaped
	*/


	// get an array of variables and wikis
	var var_names = [];
	var var_values = [];
	var vc = 0;

	// eliminate headers
	wiki = wiki.substring(wiki.indexOf(">")+1);
	vars = vars.substring(vars.indexOf(">")+1);
	
	vars.replace(/<div id="?(version_|main_page_|permit_edits_|[\w_]+)"?>((\n|.)*?)<\/div>/gi, function(str, $1, $2) {
				if(old_version == 2)
					var_names[vc] = "main_page_";
				else
					var_names[vc] = $1;
				var_values[vc] = $2;
				vc++;
			});
	
//	log("Variables are ("+var_names+")");	// log:0

	// now extract the pages from old versions < 0.9
	if (import_content) {
		wiki.replace(/<div .*?id="?([^">]+)"?>((\n|.)*?)<\/div>/gi, function(str, $1, $2, $3) {
//				log("Parsing old page "+$1);	// log:0
				if (old_version != 2) {
					page_names[pc] = unescape($1);
					page_contents[pc] = unescape($2);
				} else {
					page_names[pc] = $1;
					page_contents[pc] = $2;
				}
				// throw away old special pages
				if (page_names[pc].indexOf("Special::")===0) {
					if (page_names[pc].search(/Special::Edit Menu/i)==0)
						page_names[pc] = "::Menu";
					else {
						++sys_pages;
						return;
					}
				}
				
				old_page_attrs[pc] = 0;

				if (old_version < 9) {	// apply compatibility changes to stickwiki versions below v0.9
					page_contents[pc] = _new_syntax_patch(page_contents[pc].replace(new RegExp("(\\[\\[|\\|)Special::Import wiki\\]\\]", "ig"), "$1Special::Import]]").replace(/\[\[([^\]\]]*?)(\|([^\]\]]+))?\]\]/g,
					function (str, $1, $2, $3) {
						if ($3)
							return "[["+$3+"|"+$1+"]]";
						else
							return str;
					}));
				}
				pc++;
			}
			);

//		log("page_names is ("+page_names+")");	// log:0
	} // do not import content pages

	for(var i=0,il=var_names.length;i<il;++i) {
		if (var_names[i] == "main_page_")
			new_main_page = (old_version!=2) ? unescape(var_values[i]) : var_values[i];
		else if (var_names[i] == "permit_edits")
			old_block_edits = (var_values[i]=="0");
	}
	
}	else {	// we are importing a v0.9.x Beta

	// locate the random marker
	try {
		var old_marker = ct.match(/\nvar __marker = "([A-Za-z\-\d]+)";(\r\n|\n)/)[1];
	} catch (e) {
		this.alert(this.i18n.ERR_MARKER);
		fail = true;
	}
	if (fail) break;

	if (import_css) {
		// import the CSS head tag
		var css = null;
		ct.replace(/<style\s.*?type="?text\/css"?[^>]*>((\n|.)*?)<\/style>/i, function (str, $1) {
			css = $1;
		});
		if (css!=null) {
			log("Imported "+css.length+" bytes of CSS");	// log:1
			this.setCSS(css);
		}
	}

	var data = _get_data(old_marker, ct, true, true);
	var collected = [];
	
	// for versions before v0.9.2B
	if (old_version < 92) {
		collected = get_import_vars(data);
		data = ct = null;

		var has_last_page_flag = (collected.length==14) ? 1 : 0;
		if (!has_last_page_flag && (collected.length!=13)) {
			this.alert(this.i18n.INVALID_DATA);
			fail=true;
			break;
		}
		
		// set collected config options
		old_block_edits = !collected[2];
		this.config.dblclick_edit = collected[3];
		this.config.save_on_quit = collected[4];
		if (has_last_page_flag)
			this.config.open_last_page = collected[5];
		this.config.allow_diff = collected[5+has_last_page_flag];
		this.config.key_cache = collected[6+has_last_page_flag];
		// the gathered data
		new_main_page = collected[8+has_last_page_flag];
		page_names = collected[10+has_last_page_flag];
		old_page_attrs = collected[11+has_last_page_flag];
		page_contents = collected[12+has_last_page_flag];
		
	} else {	// we are importing from v0.9.2 and above which has a config object for all the config flags
	
		// old-style import for content, skipping the main woas object and the marker
		// shared with v0.9.5B
		collected = get_import_vars(data, new Array('woas', '__marker', 'version', '__config'));

		//0:sw_import_current,1:sw_import_main_page,
		//2:sw_import_backstack,3:sw_import_page_titles,4:sw_import_page_attrs,5:sw_import_pages
		// from 0.10.0: sw_page_mts is before sw_import_pages
		// from 0.10.9: main_page is inside woas.config
		if (old_version <= 108)
			new_main_page = collected[1];
		if (import_content) {
			var old_page_mts = [];
			// offset for missing main_page var
			var ofs_mp = (old_version <= 108) ? 0 : -1;
			if (old_version <= 97)
				page_contents = collected[5+ofs_mp];
			else {
				old_page_mts = collected[5+ofs_mp];
				page_contents = collected[6+ofs_mp];
			}
			page_names = collected[3+ofs_mp];
			old_page_attrs = collected[4+ofs_mp];
			if (old_version==92) {
				// replace the pre tags with the new nowiki syntax
				for(var i=0;i<page_contents.length;i++) {
					// page is encrypted, leave it as is
					if (old_page_attrs[i] & 2)
						continue;
					// ignore special pages
					if (page_names[i].indexOf("Special::")===0) {
						++sys_pages;
						continue;
					}
					page_contents[i] = page_contents[i].replace(/<pre(.*?)>((.|\n)*?)<\/pre>/g,
									function (str, $1, $2) {
										var s="{{{"+$2+"}}}";
										if ($1.length)
											s = "<span"+$1+">"+s+"</span>";
										return s;
									});
				}
				// done pre tags fixing
			} // v0.9.2 only
		} // do not import content pages

		// since version v0.9.5B+ we have an object oriented WoaS
		if (old_version >= 95) {
			// rename the members
			collected = [];
			data = data.replace(/([^\\])\nwoas\\["(\w+)"\\] = /g, function (str, $1, $2) {
				collected.push($2);
				return $1+"\ni__woas[\""+$2+"\"] = ";
			});//.replace(/\\\n/g, '');
			data = null;
			
			// retrieve the object containing all woas data & config
			var i__woas = eval(data+"\ni__woas");
			
			// import each member
			for(var a=0,acl=collected.length;a<acl;++a) {
				woas[collected[a]] = i__woas[collected[a]];
			}
			
			// add the new debug option
			if (old_version<=107)
				woas.config["debug_mode"] = false;
			
			
			if (import_icons) {
				//TODO: import the icons
			} ct = null;

			i__woas = null;
		} else data=null;
		// DO NOT delete the arrays! They're referenced
//		collected = null;
	} // done importing from v0.9.2B+
}

	// modified timestamp for pages before 0.10.0
	var current_mts = Math.round(new Date().getTime()/1000);

	// **** COMMON IMPORT CODE ****
	if (import_content) {
		// add new data
		var pages_imported = 0;
		for(var i=0, il=page_names.length; i<il; i++) {
			// we are not using is_reserved() because will be inconsistant in case of enabled edit_override
			//TODO: special treatment for WoaS:: namespace
			if (page_names[i].indexOf("Special::")===0) {
				if ((old_version>=94) && (old_version<=96)) {
					if (page_names[i]=="Special::Bootscript") {
						pi = this.page_index("WoaS::Bootscript");
						pages[pi] = page_contents[i];
						page_attrs[pi] = 4;
						pages_imported++;
						this.progress_status(pages_imported/page_names.length);
						continue;
					}
				}
				// here we are skipping special pages
				++sys_pages;
			} else { // not importing a special page
				pi = this.page_index(page_names[i]);
				if (pi == -1) {
					page_titles.push(page_names[i]);
					pages.push(page_contents[i]);
					page_attrs.push( old_page_attrs[i] );
					if (old_version < 100)
						page_mts.push( current_mts );
					else
						page_mts.push( old_page_mts[i] );
				} else {
					log("replacing "+page_names[i]);
					if (old_version==94) {
						// convert embedded files to base64 encoding
						if (old_page_attrs[i] & 4) {
							// plain copy images, which were already b64-encoded
							if (old_page_attrs[i] & 8)
								pages[pi] = page_contents[i];
							else {
								// page is encrypted, skip it
								if (old_page_attrs[i] & 2)
									continue;
							}
							pages[pi] = encode64(page_contents[i]);
						}
					} else {
						page_titles[pi] = page_names[i];
						// fix the trailing nul bytes bug in encrypted pages
						if ((old_version>=102) && (old_version<=103)
							&& (old_page_attrs[i] & 2)) {
								var rest = page_contents[i].length % 16;
								if (rest)
									log("removing "+rest+" trailing bytes from page "+page_names[i]); //log:1
								while (rest-- > 0) {page_contents[i].pop();}
						}
						// convert old base64 bootscript to plain text
						if ((old_version<107) && (page_titles[pi] == "WoaS::Bootscript")) {
							old_page_attrs[i] = 0;
							pages[pi] = decode64(page_contents[i]);
						} else
							pages[pi] = page_contents[i];
					}
					page_attrs[pi] = old_page_attrs[i];
				}
				++pages_imported;
				this.progress_status(pages_imported/page_names.length);
			} // not importing a special page
		} // for cycle
		// added in v0.9.7
		if (old_version <= 96) {
			page_titles.push("WoaS::Aliases");
			pages.push("");
			page_attrs.push(0);
			page_mts.push(current_mts);
		}
	} // do not import content pages

	// set the new config variable
	if (old_version<=108)
		this.config["main_page"] = old_main_page;
	// apply the new main page if that page exists
	if ((new_main_page !== old_main_page) && this.page_exists(new_main_page))
		this.config.main_page = new_main_page;
	
	this.config.permit_edits = !old_block_edits;
	} while (false); // fake do..while ends here
	
	// remove hourglass
	this.progress_finish();
	
	// when we fail, we return false
	if (fail)
		return false;
	
	// inform about the imported pages / total pages present in file
	this.alert(this.i18n.IMPORT_OK.sprintf(pages_imported+"/"+(page_names.length-sys_pages).toString(), sys_pages));
	
	// move to main page
	current = this.config.main_page;
	// save everything
	this.full_commit();
	
	this.refresh_menu_area();
	this.set_current(this.config.main_page, true);
	
	// supposedly, everything went OK
	return true;
}

/*** generic import code follows ***/

var _wsif_js_sec = {
	"comment_js": true,
	"comment_macros": true,
	"woas_ns": true
};

// apply some javascript security settings
function _import_wsif_pre_hook(NP) {
	// go on with special pages
	if (NP.title.indexOf("Special::")===0)
		return true;
	// check if page needs to be skipped
	if (_wsif_js_sec.woas_ns) {
		if (NP.title.indexOf("WoaS::")===0)
			return false;
	} else {
		// check that the WoaS::Bootscript is in proper format
		if ((NP.title == "WoaS::Bootscript") && (NP.attrs == 4)) {
			NP.attrs = 0;
			NP.page = decode64(NP.page);
			NP.modified = true;
			return true;
		}
		// directly import these pages
		if (NP.title.indexOf("WoaS::")===0)
			return true;
	}
	// only plain wiki and locked pages can be hotfixed
	if (NP.attrs > 1)
		return true;
	// comment out all javascript blocks
	var snippets = [];
	// put away text in nowiki blocks
	var page = NP.page.replace(reNowiki, function (str, $1) {
		var r = "<!-- "+parse_marker+"::"+snippets.length+" -->";
		snippets.push($1);
		return r;
	});
	if (_wsif_js_sec.comment_js) {
		page = page.replace(reScripts, "<disabled_script$1>$2</disabled_script>");
		NP.modified = true;
	}
	if (_wsif_js_sec.comment_macros) {
		page = page.replace(reMacros, "<<< Macro disabled\n$1>>>");
		NP.modified = true;
	}
	if (NP.modified) {
		// put back in place all HTML snippets
		if (snippets.length>0) {
			NP.page = page.replace(new RegExp("<\\!-- "+parse_marker+"::(\\d+) -->", "g"), function (str, $1) {
				return "{{{"+snippets[parseInt($1)]+"}}}";
			});
		} else
			NP.page = page;
	}
	return true;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** export.js ***/
var _export_main_index = false, _export_unix_norm = false,
	_export_default_ext;

var _title2fn;

var _export_fnames_array = [];

var _further_pages = [];

// save a base64 data: stream into an external file
woas["_b64_export"] = function(data, dest_path) {
	// decode the base64-encoded data
	data = decode64(data.replace(/^data:\s*[^;]*;\s*base64,\s*/, ''));
	// attempt to save the file
	return this.save_file(dest_path, this.file_mode.BINARY, data);
}

woas["_attrib_escape"] = function(s) {
	return s.replace(/"/g, '&quot;');
}

woas["_export_get_fname"] = function (title, create_mode) {
	if (typeof(_title2fn[title]) != 'undefined') {
		// return a cached title
		if (!create_mode) {
			// do not escape the null-page URL
			if (_title2fn[title] == '#')
				return '#';
			return escape(_title2fn[title]);
		}
		return _title2fn[title];
	}
	var orig_title = title;
	// handle the valid exportable special pages
	var sp;
	if (title.match(/::$/))
		sp = true;
	else if (this.is_reserved(title)) {
		if (title.match(/^Special::/)) {
			if ((this.page_index(title)==-1) &&
				// never save these pages
				(this.unexportable_pages.indexOf(title.substr(9)) == -1))
				sp = true;
			else {
				_title2fn[title] = "#";
				return "#";
			}
		} else {
			_title2fn[title] = "#";
			return "#";
		}
	}
	if (sp) {
		// save a reference to this namespace or reserved page
		if (_further_pages.indexOf(title)==-1)
			_further_pages.push(title);
	} else {
		var pi=this.page_index(title);
		if (pi==-1) {
			this.alert(this.i18n.PAGE_NOT_EXISTS+title);
			_title2fn[title] = "#";
			return "#";
		}
		// beware: a special page or namespace index page cannot be main page
		// considering the below code
		if (_export_main_index && (title==this.config.main_page)) {
			_title2fn[title] = "index."+_export_default_ext;
			_export_fnames_array.push(_title2fn[title]);
			return _title2fn[title];
		}
	}
	var ext = "";
	if (!sp && this.is__embedded(pi)) {
		title = title.substr(title.indexOf("::")+2);
//		if (!this.is__image(pi))
//			ext = "."+_export_default_ext;
//		emb = true;
	} else {
		ext = "."+_export_default_ext;
//		emb = false;
	}
	var fname = title
	// convert UTF8 characters to something else (cross-browser safe cheap solution)
	.replace(/[^\u0000-\u007F]+/g, function ($1) {
		var l=$1.length, r="";
		for(var i=0;i<l;i++) {
			switch ($1[i]) {
				// TODO: add most common diacritics
				case "\u00e2":
					r+="a";
					break;
				default:
					r+="_";
			}
		}
		return r;
	})
	// escape some path-unsafe characters
	.replace(/[:\\\/<>?#=!]+/g, function($1) {
		return "_".repeat($1.length);
	});
	// fix the directory separator chars
	if (_export_unix_norm)
		fname = fname.toLowerCase().replace(/\s+/g, "_").replace(/::/g, "-");
	else
		fname = fname.replace(/::/g, " - ");
	var test_fname = fname+ext, i=0;
	while (_export_fnames_array.indexOf(test_fname)!=-1) {
		log(test_fname+" already created, checking next fname");	// log:1
		test_fname = fname+"_".repeat(++i)+ext;
	}
//	if (i)		_export_replace_fname[fname+"_".repeat(i-1)+ext] = test_fname;
	_export_fnames_array.push(test_fname);
	_title2fn[orig_title] = test_fname;
	if (!create_mode)
		return escape(test_fname);
	return test_fname;
}

woas["export_parse"] = function (data, js_mode) {
	// a normal wiki page, parse it and eventually execute the attached javascript
	data = this.parser.parse(data, true, js_mode);
	if (js_mode) {
		wt = $("wiki_text");
		wt.innerHTML = data;
		this._activate_scripts();
		data = wt.innerHTML;
	}
	return data;
}

woas["export_one_page"] = function (
		data, title, fname, exp, mts) {
	// convert UTF8 sequences of the XHTML source into &#dddd; sequences
	data = this.utf8_encode(data);
	// prepare the raw text for later description/keywords generation
	var raw_text = this.trim(this.xhtml_to_text(data));
	if (exp.exp_menus) {
		var _exp_menu = this.get_text("::Menu");
		if (_exp_menu == null)
			_exp_menu = "";
		var _ns = this.get_namespace(title);
			if (_ns.length) {
				var mpi = this.page_index(_ns+"::Menu");
				if (mpi != -1) {
					var tmp=this.get_text_special(_ns+"::Menu");
					if (tmp!=null)
						_exp_menu += tmp;
				}
			}
			if (_exp_menu.length) {
				_exp_menu = this.parser.parse(_exp_menu, true, exp.js_mode);
				if (exp.js_mode)
					this._activate_scripts();
				// fix also the encoding in the menus
				_exp_menu = this.utf8_encode(_exp_menu);
			}
			data = '<div class="menu_area" id="sw_menu_area" style="position: absolute;"><div class="wiki" id="menu_area">'+_exp_menu+'</div></div><div class="woas_text_area" id="wiki_text">'+data+'</div>';
		}
		// craft a nice XHTML page
		data = "<title>"+this.xhtml_encode(title)+"</title>"+
				// add the exported CSS
				exp.css+
				// add the last-modified header
				(mts ? '<meta http-equiv="last-modified" content="'+
				(new Date(mts*1000)).toGMTString()+'" />'+"\n" : '')+
				// other useful META stuff
		'<meta name="generator" content="Wiki on a Stick v'+this.version+' - http://stickwiki.sf.net/" />'+"\n"+
		'<meta name="keywords" content="'+this.utf8_encode(this._attrib_escape(_auto_keywords(raw_text)))+'" />'+"\n"+
		'<meta name="description" content="'+
		this.utf8_encode(this._attrib_escape(raw_text.replace(/\s+/g, " ").substr(0,max_description_length)))+'" />'+"\n"+
		exp.meta_author+
		exp.custom_bs+
		"</h"+"ead><"+"body>"+data+
		(mts ? "<div class=\"woas_page_mts\">"+this.last_modified(mts)+"</div>" : "")+
		"</bod"+"y></h"+"tml>\n"; raw_text = null;
	return this.save_file(exp.xhtml_path+fname, this.file_mode.ASCII, woas.DOCTYPE+woas.DOC_START+data);
}

woas["export_wiki"] = function () {
	// export settings object
	var exp = {};
	try {
		exp["xhtml_path"] = $("woas_ep_xhtml").value;
		var img_path = $("woas_ep_img").value;
		exp["js_mode"] = 0;
		if ($("woas_cb_js_dyn").checked)
			exp.js_mode = 1;
		else if ($("woas_cb_js_exp").checked)
			exp.js_mode = 2;
		var sep_css = $("woas_cb_sep_css").checked;
		exp["exp_menus"] = $("woas_cb_export_menu").checked;
		_export_main_index = $("woas_cb_index_main").checked;
		_export_default_ext = $("woas_ep_ext").value;
		exp["meta_author"] = this.trim($("woas_ep_author").value);
		if (exp.meta_author.length)
			exp.meta_author = '<meta name="author" content="'+this._attrib_escape(this.xhtml_encode(exp.meta_author))+'" />'+"\n";
		_export_unix_norm = $("woas_cb_unix_norm").checked;
	} catch (e) { this.crash(e); return false; }
	
	this.progress_init("Exporting XHTML");
	exp["css"] = _css_obj().innerHTML;
	// add some other CSS which is not used by live WoaS
	exp["css"] += "\n.broken_link { color: red; font-decoration: strike-through;}\n";
	// reset export globals - remember that arrays are object and cannot be initialized in 1 line
	_export_fnames_array = [];
	_title2fn = {};
	if (sep_css) {
		var css_path = "woas.css";
		_export_fnames_array.push(css_path);
		this.save_file(exp.xhtml_path+css_path, this.file_mode.ASCII, exp.css);
		exp.css = '<link rel="stylesheet" type="text/css" media="all" href="'+css_path+'" />';
	} else
		exp.css = '<style type="text/css">'+exp.css+'</style>';
	exp["custom_bs"] = "";
	if (exp.js_mode==2) {
		data = pages[this.page_index("WoaS::Bootscript")];
		if (data!=null && data.length) {
			this.save_file(exp.xhtml_path+"bootscript.js", this.file_mode.ASCII, data);
			exp.custom_bs = '<sc'+'ript type="text/javascript" src="bootscript.js"></sc'+'ript>';
		}
	}

	var l=page_titles.length, data = null, fname = "", done=0, total=0,wt=null;
	for (var pi=0;pi<l;pi++) {
		// do skip physical special pages
		if (page_titles[pi].match(/^Special::/)) continue;
		// do skip menu pages (they are included in each page)
		var mnupos = page_titles[pi].indexOf("::Menu");
		if ((mnupos != -1) &&
			(mnupos==page_titles[pi].length-6)) continue;
		data = this.get_text_special(page_titles[pi]);
		// skip pages which could not be decrypted
		if (data == null) continue;
		fname = this._export_get_fname(page_titles[pi], true);
		// will skip WoaS::Bootscript and WoaS::Aliases
		if (fname == '#') {
//			log("skipping "+page_titles[pi]);
			continue;
		}
		++total;
		if (this.is__embedded(pi)) {
			if (this.is__image(pi)) {
				if (!this._b64_export(data, img_path+fname))
					break;
				// image export was successful, continue to next page
				else { ++done; continue; }
			} else {
				// fully export the file
				if (!this._b64_export(data, exp.xhtml_path+fname))
					break;
				// image export was successful, continue to next page
				else { ++done; continue; }
			}
		} else
			data = this.export_parse(data, exp.js_mode);
		if (!this.export_one_page(data, page_titles[pi], fname, exp, page_mts[pi]))
			break;
		++done;
	}
	log("pages yet to process: "+_further_pages);	// log:1
	// process further pages
	var title;
	// exchange arrays to parse at some extent
	var eatable = _further_pages.slice(0);
	while (eatable.length) {
		_further_pages = [];
		for(var i=0,el=eatable.length;i<el;i++) {
			title = eatable[i];
			data = this.get_text_special(title);
			if (data===null) {
				log("cannot process "+title);
				continue;
			}
			// TODO: allow special pages to have extended attributes
			data = this.export_parse(data, exp.js_mode);
			++total;
			if (this.export_one_page(data, title, _title2fn[title], exp))
				++done;
		}
		eatable = _further_pages.slice(0);
	}
//	_further_pages = [];
	if (exp.js_mode) {
		this.refresh_menu_area();
		this.set_current(current, false);
	}
	this.progress_finish();
	this.alert(this.i18n.EXPORT_OK.sprintf(done, total));
	return true;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** wsif.js ***/

// a class for some general WSIF operations
woas["wsif" ] = {	version: "1.2.0", DEFAULT_INDEX: "index.wsif",
					emsg: null, imported_page: false,
					expected_pages: null,
					system_pages: 0};

woas["wsif"]["header"] = function(header_name, value) {
	return header_name+": "+value+"\n";
}

woas["wsif"]["inline"] = function(boundary, content) {
	return "\n--"+boundary+"\n"+content+"\n--"+boundary+"\n";
}

// default behaviour:
// - wiki pages go inline (utf-8), no container encoding
// - embedded files/images go outside as blobs
// - encrypted pages go inline in base64

woas["_native_wsif_save"] = function(path, single_wsif, inline_wsif, author,
							save_all, plist) {
	this.progress_init("WSIF save");
	// the number of blobs which we have already created
	var blob_counter = 0;
	
	// prepare the extra headers
	var extra = this.wsif.header('wsif.version', this.wsif.version);
	extra += this.wsif.header('wsif.generator', 'woas');
	extra += this.wsif.header('woas.version', this.version);
	if (author.length)
		extra += this.wsif.header('woas.author', author);

	// boundary used for inline attachments
	var full_wsif = "", boundary = __marker;
	// use the 1st part of the global marker
	var p = boundary.indexOf("-");
	if (p !== -1)
		boundary = boundary.substr(0,p);

	var l, done = 0, full_save;
	if (typeof plist == "undefined") {
		full_save = true;
		l = page_titles.length;
	} else {
		l = plist.length;
		full_save = false;
	}
	// save count of total pages which need to be exported
	this.wsif.expected_pages = l;
	// the attributes prefix, we do not use the page index here for better versioning
	var pfx = "woas.page.";
	var pi;
	for (var ipi=0;ipi < l;++ipi) {
		if (full_save)
			pi = ipi;
		else
			pi = plist[ipi];
		// do skip physical special pages
		if (!save_all) {
			if (page_titles[pi].match(/^Special::/)) continue;
		}
		var record = this.wsif.header(pfx+"title", this.ecma_encode(page_titles[pi]))+
					this.wsif.header(pfx+"attributes", page_attrs[pi]);
		// specify timestamp only if not magic
		if (page_mts[pi] != 0)
			record += this.wsif.header(pfx+"last_modified", page_mts[pi]);
		var ct = null, orig_len = null;
		
		// normalize the page content, set encoding&disposition
		var encoding = null, disposition = "inline";
		if (this.is__encrypted(pi)) {
			ct = encode64_array(pages[pi]);
			encoding = "8bit/base64";
			// special header used for encrypted pages
			orig_len = pages[pi].length;
		} else {
			ct = pages[pi];
			if (this.is__embedded(pi)) {
				// if not forced to do them inline, convert for export
				if (!inline_wsif) {
					disposition = "external";
					encoding = "8bit/plain";
					// decode the base64-encoded data
					if (this.is__image(pi)) {
						var m = ct.match(/^data:\s*([^;]*);\s*base64,\s*/);
						record += this.wsif.header(pfx+"mime", m[1]);
						// remove the matched part
						ct = decode64(ct.substr(m[0].length));
					} else // no data:uri for files
						ct = decode64(ct);
				} else {
					encoding = "8bit/base64";
					if (this.is__image(pi)) {
						var m = ct.match(/^data:\s*([^;]*);\s*base64,\s*/);
						record += this.wsif.header(pfx+"mime", m[1]);
						// remove the matched part
						ct = ct.substr(m[0].length);
					}
				}
			} else { // normal wiki pages
				// check if ECMA encoding is necessary
				if (this.needs_ecma_encoding(ct)) {
					ct = this.ecma_encode(ct);
					encoding = "ecma/plain";
				} else
					encoding = "8bit/plain";
			}
		}
		//DEBUG check
		if (encoding === null) {
			this.crash("Encoding for page "+page_titles[pi]+" is set to null!");
			continue;
		}
		// update the index (if needed)
		if (!single_wsif && full_save) {
			full_wsif += this.wsif.header(pfx+"title", this.ecma_encode(page_titles[pi]));
			// a new mime type
			full_wsif += this.wsif.header(pfx+"encoding", "text/wsif");
			full_wsif += this.wsif.header(pfx+"disposition", "external");
			// add reference to the external WSIF file
			full_wsif += this.wsif.header(pfx+"disposition.filename", pi.toString()+".wsif")+
							"\n";
		}
		// update record
		record += this.wsif.header(pfx+"length", ct.length);
		record += this.wsif.header(pfx+"encoding", encoding);
		record += this.wsif.header(pfx+"disposition", disposition);
		// note: when disposition is inline, encoding cannot be 8bit/plain for embedded/encrypted files
		if (disposition == "inline") {
			// output the original length header (if available)
			if (orig_len !== null)
				record += this.wsif.header(pfx+"original_length", orig_len);
			// create the inline page
			boundary = _generate_random_boundary(boundary, ct);
			record += this.wsif.header(pfx+"boundary", boundary);
			// add the inline content
			record += this.wsif.inline(boundary, ct); ct = null;
		} else {
			// create the blob filename
			var blob_fn = "blob" + (++blob_counter).toString()+
						_file_ext(page_titles[pi]);
			// specify path to external filename
			record += this.wsif.header(pfx+"disposition.filename", blob_fn)+"\n";
			// export the blob
			if (!this.save_file(path + blob_fn,
							(encoding == "8bit/plain") ?
							this.file_mode.BINARY : this.file_mode.ASCII_TEXT, ct))
				log("Could not save "+blob_fn);
		}
		// the page record is now ready, proceed to save
		if (single_wsif) {// append to main page record
			full_wsif += record;
			++done;
		} else { // save each page separately
			if (this.save_file(path+pi.toString()+".wsif",
								this.file_mode.ASCII_TEXT,
								// also add the pages counter (single)
								extra + this.wsif.header("woas.pages", 1) +
								"\n" + record))
				++done;
		}
		this.progress_status(done/l);
		// reset the record
		record = "";
	} // foreach page
	// add the total pages number
	if (full_save || single_wsif)
		extra += this.wsif.header('woas.pages', done);
	else
		extra += this.wsif.header('woas.pages', page_titles.length);
	// build (artificially) an index of all pages
	if (!full_save && !single_wsif) {
		for (var pi=0,pl=page_titles.length;pi<pl;++pi) {
			full_wsif += this.wsif.header(pfx+"title", this.ecma_encode(page_titles[pi]));
			// a new mime type
			full_wsif += this.wsif.header(pfx+"encoding", "text/wsif");
			full_wsif += this.wsif.header(pfx+"disposition", "external");
			// add reference to the external WSIF file
			full_wsif += this.wsif.header(pfx+"disposition.filename", pi.toString()+".wsif")+
							"\n";
		}
	}
	// output the index WSIF file now
	if (!this.save_file(path+this.wsif.DEFAULT_INDEX,
						this.file_mode.ASCII_TEXT,
						extra + "\n" + full_wsif)) {
		if (single_wsif)
			done = 0;
	} // we do not increment page counter when saving index.wsif
	this.progress_finish();
	return done;
}

function _file_ext(fn) {
	var m=fn.match(/\.(\w+)$/);
	if (m == null) return "";
	return "."+m[1];
}

function _generate_random_boundary(old_boundary, text) {
	var b = old_boundary;
	if (!b.length)
		b = _random_string(10);
	while (text.indexOf(b) != -1) {
		b = _random_string(10);
	}
	return b;
}

woas["_native_load"] = function() {
	// we reset the arrays before loading the real data from index.wsif
	pages = [];
	page_attrs = [];
	page_titles = [];
	page_mts = [];
	// get the data
	var path = woas.ROOT_DIRECTORY+"index.wsif";
	return this._native_wsif_load(path, false, false);
}

woas["_native_wsif_load"] = function(path, overwrite, and_save, recursing, pre_import_hook) {
	if (!recursing) {
		this.wsif.emsg = null;
		this.progress_init("Initializing WSIF import");
	}
	var ct = this.load_file(path, this.file_mode.ASCII_TEXT);
	if (typeof ct != "string") {
		if (!recursing)
			this.progress_finish();
		if (ct === false)
			this.alert(this.i18n.LOAD_ERR);
		return false;
	}
	// reset when not recursing
	if (!recursing) {
		this.wsif.expected_pages = null;
		this.wsif.emsg = this.i18n.NO_ERROR;
		this.wsif.imported_page = false;
		this.wsif.system_pages = 0;
		var	global_progress = 0;
	}
	// the imported pages
	var imported = [];
	var pfx = "\nwoas.page.", pfx_len = pfx.length;
	// start looping to find each page
	var p = ct.indexOf(pfx), fail = false;
	// this is used to mark end-of-block
	var previous_h = null;
	// too early failure
	if (p == -1)
		this.wsif_error("Invalid WSIF file");
	else { // OK, first page was located, now get some general WSIF info
		var wsif_v = ct.substring(0,p).match(/^wsif\.version:\s+(.*)$/m);
		if (wsif_v === null) {
			this.wsif_error(this.i18n.WSIF_NO_VER);
			p = -1;
			fail = true;
		} else {
			// convert to a number
			wsif_v = wsif_v[1];
			var wsif_v_n = Number(wsif_v.replace(".", ""));
			// check if WSIF is from future of it is the unsupported 1.0.0
			if ((wsif_v_n == 100) || (wsif_v_n > Number(this.wsif.version.replace(".", "")))) {
				this.wsif_error(this.i18n.WSIF_NS_VER.sprintf(wsif_v));
				p = -1;
				fail = true;
			} else { // get number of expected pages (not when recursing)
				if (!recursing) {
					this.wsif.expected_pages = ct.substring(0,p).match(/^woas\.pages:\s+(\d+)$/m);
					if (this.wsif.expected_pages !== null)
						this.wsif.expected_pages = Number(this.wsif.expected_pages[1]);
				}
			}
		}
	}
	var title = null,	attrs = null,
		last_mod = null,	len = null,
		encoding = null,	disposition = null,
		d_fn = null,
		boundary = null,	mime = null;
	// position of last header end-of-line
	while (p != -1) {
		var sep, s, v;
		// remove prefix
		sep = ct.indexOf(":", p+pfx_len);
		if (sep == -1) {
			this.wsif_error(this.i18n.WSIF_NO_HN);
			fail = true;
			break;
		}
		// get attribute name
		s = ct.substring(p+pfx_len, sep);
		// get value
		p = ct.indexOf("\n", sep+1);
		if (p == -1) {
			this.wsif_error(this.i18n.WSIF_BAD_HV);
			fail = true;
			break;
		}
		// all headers except the title header can mark an end-of-block
		// the end-of-block is used to find boundaries and content inside
		// them
		if (s != "title")
			// save the last header position
			previous_h = p;
		// get value and apply left-trim
		v = ct.substring(sep+1, p).replace(/^\s*/, '');
		switch (s) {
			case "title":
				// we have just jumped over a page definition
				if (title !== null) {
					if (title.match(/^Special::/) && and_save) {
						++this.wsif.system_pages;
						title = attrs = last_mod = encoding = len =
							 boundary = disposition = mime = d_fn = null;
					} else {
						// store the previously parsed page definition
						p = this._native_page_def(path,ct,previous_h, p,overwrite,pre_import_hook,
								title,attrs,last_mod,len,encoding,disposition,
								d_fn,boundary,mime);
						// save page index for later analysis
						var was_title = title;
						title = attrs = last_mod = encoding = len =
							 boundary = disposition = mime = d_fn = null;
						if (p == -1) {
							fail = true;
							break;
						}
						// check if page was really imported, and if yes then
						// add page to list of imported pages
						if (this.wsif.imported_page !== false)
							imported.push(this.wsif.imported_page);
						else
							log("Import failure for "+was_title); //log:1
					}
					// delete the whole entry to free up memory to GC
					// will delete also the last read header
					ct = ct.substr(p);
					p = 0;
					previous_h = null;
					// update status if not recusing
					if (!recursing && (this.wsif.expected_pages !== null))
						this.progress_status(global_progress++/this.wsif.expected_pages);
				}
				// let's start with the next page
				title = this.ecma_decode(v);
			break;
			case "attributes":
				attrs = Number(v);
			break;
			case "last_modified":
				last_mod = Number(v);
			break;
			case "length":
				len = Number(v);
			break;
			case "encoding":
				encoding = v;
			break;
			case "disposition":
				disposition = v;
			break;
			case "disposition.filename":
				//TODO: ecma-escape
				d_fn = v;
			break;
			case "boundary":
				boundary = v;
			break;
			case "mime":
				mime = v;
			break;
			case "original_length":
				// this should be used for trimming base64 encrypted pages
				// ignored for now
			break;
			default:
				log("Unknown WSIF header: "+s);
		} // end switch(s)
		if (fail)
			break;
		// set pointer to next entry
		p = ct.indexOf(pfx, p);
	}
/*	if (recursing) {
		this.alert("title = "+title+"\nattrs = "+attrs+"\nlast_mod = "+last_mod+"\n"+
  				"len = "+len+"\nencoding = "+encoding+"\ndisposition = "+disposition+
   				"\nboundary = "+boundary+"\n");
	} */
	if (fail) {
		if (!recursing)
			this.progress_finish();
		return false;
	}
	// process the last page (if any)
	if ((previous_h !== null) && (title !== null)) {
		p = this._native_page_def(path,ct,previous_h,0,overwrite,pre_import_hook,
				title,attrs,last_mod,len,encoding,disposition,
				d_fn,boundary,mime);
		// save page index for later analysis
		if (p == -1) {
			this.wsif_error( "Import error for page "+title+" after import!" );
			fail = true;
		} else {
			// check if page was really imported, and if yes then
			// add page to list of imported pages
			if (this.wsif.imported_page !== false)
				imported.push(this.wsif.imported_page);
			else
				log("Import failure for "+title); //log:1
			// update status if not recusing
			if (!recursing && (this.wsif.expected_pages !== null))
				this.progress_status(global_progress++/this.wsif.expected_pages);
		}
	}
	if (!recursing)
		this.progress_finish();
	// save imported pages
	if (imported.length) {
		if (and_save) {
			var ep = this.wsif.expected_pages;
			this.commit(imported);
			this.wsif.expected_pages = ep;
		}
		return imported.length;
	}
	// no pages were changed
	return 0;
}

woas["_last_filename"] = null;

woas["_get_path"] = function(id) {
	if (this.browser.firefox3 || this.browser.firefox_new)
		return this.dirname(ff3_getPath($(id)));
	// use the last used path
	if (this.browser.opera)
		return this.dirname(this._last_filename);
	// on older browsers this was allowed
	return this.dirname($(id).value);
}

woas["_native_page_def"] = function(path,ct,p,last_p,overwrite,pre_import_hook, title,attrs,last_mod,len,encoding,
											disposition,d_fn,boundary,mime) {
	this.wsif.imported_page = false;
	var bpos_e;
	// last modified timestamp can be omitted
	if (last_mod === null)
		last_mod = 0;
	var fail = false;
	// attributes must be defined
	if (attrs === null) {
		log("No attributes defined for page "+title);
		fail = true;
	}
	if (!fail && (disposition == "inline")) {
		// craft the exact boundary match string
		boundary = "\n--"+boundary+"\n";
		// locate start and ending boundaries
		var bpos_s = ct.indexOf(boundary, p);
		if (bpos_s == -1) {
			this.wsif_error( "Failed to find start boundary "+boundary+" for page "+title );
			return -1;
		}
		bpos_e = ct.indexOf(boundary, bpos_s+boundary.length);
		if (bpos_e == -1) {
			this.wsif_error( "Failed to find end boundary "+boundary+" for page "+title );
			return -1;
		}
		while (!fail) { // used to break away
		// retrieve full page content
		var page = ct.substring(bpos_s+boundary.length, bpos_e);
		// length used to check correctness of data segments
		var check_len = page.length;
		// split encrypted pages into byte arrays
		if (attrs & 2) {
			if (encoding != "8bit/base64") {
				log("Encrypted page "+title+" is not encoded as 8bit/base64");
				fail = true;
				break;
			}
//			check_len = page.length;
			page = decode64_array(page);
			// trim to correct length
			// perhaps we could use woas.page.original_length field
			// also, we could not make this check if version is 0.10.4
			// but for now it's a good safety
			var rest = page.length % 16;
			if (rest)
				log("removing "+rest+" trailing bytes from page "+title); //log:1
			while (rest-- > 0) {page.pop();}
		} else if (attrs & 8) { // embedded image, not encrypted
			// NOTE: encrypted images are not obviously processed, as per previous 'if'
			if (encoding != "8bit/base64") {
				log("Image "+title+" is not encoded as 8bit/base64");
				fail = true;
				break;
			}
			if (mime === null) {
				log("Image "+title+"has no mime type defined");
				fail = true;
				break;
			}
			// re-add data:uri to images
			page = "data:"+mime+";base64,"+page;
		} else { // a normal wiki page
			switch (encoding) {
				case "8bit/base64":
					// base64 files will stay encoded
					if (!(attrs & 4))
						// WoaS does not encode pages normally, but this is supported by WSIF format
						page = decode64(page);
				break;
				case "ecma/plain":
					page = this.ecma_decode(page);
				break;
				case "8bit/plain": // plain wiki pages are supported
				break;
				default:
					log("Normal page "+title+" comes with unknown encoding "+encoding);
					fail = true;
					break;
			}
		}
		if (fail)
			break;
		// check length (if any were passed)
		if (len !== null) {
			if (len != check_len)
				this.alert("Length mismatch for page %s: ought to be %d but was %d".sprintf(title, len, check_len));
		}
		// has to break anyway
		break;
		} // wend
		
	} else if (!fail && (disposition == "external")) { // import an external WSIF file
		if (d_fn === null) {
			this.wsif_error( "Page "+title+" is external but no filename was specified");
			return -1;
		}
		// use last filename to get path
		var the_dir;
		if (path === null) {
			the_dir = this._get_path("filename_");
			if (the_dir === false) {
				this.wsif_error( "Cannot retrieve path name in this browser");
				return -1;
			}
		} else {
			this.wsif_error( "Recursive WSIF import not implemented");
			return -1;
		}
		// embedded image/file, not encrypted
		if ((attrs & 4) || (attrs & 8)) {
			if (encoding != "8bit/plain") {
				this.wsif_error( "Page "+title+" is an external file/image but not encoded as 8bit/plain");
				return -1;
			}
			// load file and apply encode64 (if embedded)
			var wanted_mode;
			// images
			if ((attrs & 4) && (attrs & 8))
				wanted_mode = this.file_mode.DATA_URI;
			// files
			else if (attrs & 4)
				wanted_mode = this.file_mode.BASE64;
			else // dunnowhat
				wanted_mode = this.file_mode.BINARY;
			page = this.load_file(the_dir+d_fn, wanted_mode, mime);
			if (typeof page != "string") {
				this.wsif_error( "Failed load of external "+the_dir+d_fn);
				return -1;
			}
			// fallback wanted to apply real page definition later
			boundary = "";
			bpos_e = last_p;
		} else {
			if (encoding != "text/wsif") {
				this.wsif_error( "Page "+title+" is external but not encoded as text/wsif");
				return -1;
			}
			// check the result of external import
			var rv = this._native_wsif_load(the_dir+d_fn, overwrite, false, true, pre_import_hook);
			if (rv === false)
				this.wsif_error( "Failed import of external "+the_dir+d_fn);
			// return pointer after last read header
			return last_p;
		}
	} else { // no disposition or unknown disposition
		this.wsif_error( "Page "+title+" has invalid disposition: "+disposition);
		return -1;
	}
	
	if (!fail) {
		// check if we need to call the pre-import hook
		if (typeof pre_import_hook == "function") {
			var NP = { "title": title, "attrs": attrs, "page": page, "modified": false };
			if (!pre_import_hook(NP)) {
				// return updated offset
				return bpos_e+boundary.length;
			}
			if (NP.modified) {
				page = NP.page;
				title = NP.title;
				attrs = NP.attrs;
			}
			NP = null;
		}
		// check if page already exists
		var pi = page_titles.indexOf(title);
		if (pi != -1) {
			if (overwrite) {
				// update the page record
				pages[pi] = page;
				page_attrs[pi] = attrs;
				page_mts[pi] = last_mod;
				// page title does not change
			} else
				log("Skipping page "+title); //log:1
		} else { // creating a new page
			pi = page_titles.length;
			pages.push(page);
			page_attrs.push(attrs);
			page_mts.push(last_mod);
			page_titles.push(title);
		}
		// all OK
		this.wsif.imported_page = pi;
	} // !fail
	// return pointer after last read header
//	return last_p;
	// return updated offset
	return bpos_e+boundary.length;
}

woas["wsif_error"] = function(msg) {
	log("WSIF ERROR: "+msg);	//log:1
	this.wsif.emsg = msg;
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** editor.js ***/

woas["wiki_buttons_display"] = function (v) {
	$('wiki_format_buttons').style.display = v ? 'block' : 'none';
	$('wiki_format_buttons').style.visibility = v ? 'visible' : 'hidden';
}

woas["html_buttons_display"] = function (v) {
	$('html_format_buttons').style.display = v ? 'block' : 'none';
	$('html_format_buttons').style.visibility = v ? 'visible' : 'hidden';
}

// submitted by pr0xy
function TextAreaSelectionHelper(obj) {
	this.target=obj;
	this.target.carretHandler=this; // ?
	this.target.onchange=_textareaSaver;
	this.target.onclick=_textareaSaver;
	this.target.onkeyup=_textareaSaver;
	this.target.onfocus=_textareaSaver;
// blurring handler disabled until META features are researched more
// this.target.onblur=kbd_blur;
	if(!document.selection) this.target.onSelect=_textareaSaver; // ?
 
	this.start=-1;
	this.end=-1;
	this.scroll=-1;
	this.iesel=null;
}

TextAreaSelectionHelper.prototype.getSelectedText=function() {
	if(this.iesel)
		return this.iesel.text;
	// Fixes a problem in FF3 where the selection was not being stored in this.start and this.end when selecting multilines
	this.start = $("wiki_editor").selectionStart;
	this.end = $("wiki_editor").selectionEnd;
	return ((this.start>=0)&&(this.end>this.start))? this.target.value.substring(this.start,this.end): "";
}

TextAreaSelectionHelper.prototype.setSelectedText=function(text, secondtag) {
	if(this.iesel) {
	if(typeof(secondtag)=="string") {
	  var l=this.iesel.text.length;
		 this.iesel.text=text+this.iesel.text+secondtag;
	  this.iesel.moveEnd("character", -secondtag.length);
	   this.iesel.moveStart("character", -l);   
	} else {
	  this.iesel.text=text;
	}
	this.iesel.select();
 } else if(this.start>=0&&this.end>=this.start) {
    var left=this.target.value.substring(0,this.start);
    var right=this.target.value.substr(this.end);
 var scont=this.target.value.substring(this.start, this.end);
 if(typeof(secondtag)=="string") {
   this.target.value=left+text+scont+secondtag+right;
   this.end=this.target.selectionEnd=this.start+text.length+scont.length;
   this.start=this.target.selectionStart=this.start+text.length;    
 } else {
      this.target.value=left+text+right;
   this.end=this.target.selectionEnd=this.start+text.length;
   this.start=this.target.selectionStart=this.start+text.length;
 }
 this.target.scrollTop=this.scroll;
 this.target.focus();
 } else {
   this.target.value+=text + ((typeof(secondtag)=="string")? secondtag: "");
if(this.scroll>=0) this.target.scrollTop=this.scroll;
 }
}

TextAreaSelectionHelper.prototype.getText=function() {
 return this.target.value;
}
TextAreaSelectionHelper.prototype.setText=function(text) {
 this.target.value=text;
}

function _textareaSaver() {
 if(document.selection) {
   this.carretHandler.iesel = document.selection.createRange().duplicate();
 } else if(typeof(this.selectionStart)!="undefined") {
   this.carretHandler.start=this.selectionStart;
this.carretHandler.end=this.selectionEnd;
this.carretHandler.scroll=this.scrollTop;
 } else {this.carretHandler.start=this.carretHandler.end=-1;}
}

function	DivTagThis(align) {
	TagThis('<div align="'+align+'">', '</div>');
}

function TagThis(starttag, endtag){
	woas._editor.setSelectedText(starttag, endtag);
}

function FullTagThis(tag){
	woas._editor.setSelectedText('<'+tag+'>','</'+tag+'>');
}

function setUrl(starttag,centertag,endtag) {
	var url=prompt('Link:','http://');
	if (url===null) return;
	var comm=prompt('Link text:','');
	if (comm===null) return;
		woas._editor.setSelectedText(starttag+woas.js_encode(url)+centertag,comm+endtag);
}

function setWikiImage() {
	setImage('[[Include::Image::',']]');
}

function setHTMLImage() {
	setImage('<'+'img src=\'','\' />');
}

function setWikiUrl() {
	setUrl('[[','|',']]');
}

function setWikiIUrl() {
	var url=prompt('Wiki page to link to:','');
	if (url===null) return;
	var comm=prompt('Link text:', url);
	if (comm===null) return;
	if (comm == url)
		woas._editor.setSelectedText('[['+url+']]');
	else
		woas._editor.setSelectedText('[['+url+'|',comm+']]');

}

function setHTMLUrl() {
	setUrl('<a href=\'','\' target=_blank>','</a>');
}

function setImage(starttag,endtag) {
	var pic=prompt('Image:','');
	if (pic!==null)
		woas._editor.setSelectedText(starttag,woas.js_encode(pic)+endtag);
}

function setTag() {
        var tag=prompt('Set tag:','');
	if (tag!==null)
	woas._editor.setSelectedText("[[Tags::",tag+"]]");
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** macro.js ***/

var reMacroDef = /^(%?[A-Za-z0-9_]+):([\s\S]*)$/;
// macro syntax plugin code adapted from FBNil's implementation
woas["macro_parser"] = function(text){
	var macro = { "reprocess": false, "text": text };
	var M=text.match(reMacroDef);
	// if no double colon declaration was found, then do not process anything
	if (M !== null) {
		var fn = M[1];
		// check that this is not a macro definition request
		if (fn.charAt(0) == '%') {
			fn = fn.substr(1);
			// when macro is not defined, define it
			if (this.macro_parser.create(fn, M[2])) {
				// we totally remove the block
				macro.reprocess = true;
				macro.text = "";
	//			macro.text = "<!-- defined "+fn+" macro -->";
			}
			return macro;
		}
		var fi = this.macro_parser.macro_names.indexOf(fn);
		if (fi != -1) {
			macro.text = M[2];
			this.macro_parser.macro_functions[fi](macro);
		} else {
			log("Undefined macro "+fn);
		}
	}
	return macro;
}

// this is the function to be called to register a  macro
// each macro function must accept a macro object as parameter and modify
// such object (it is always passed by reference)
woas["macro_parser"]["register"] = function(fn_name, fn_object) {
	if (woas.macro_parser.macro_names.indexOf(fn_name) != -1) {
		log("cannot redefine macro "+fn_name); //log:1
		return false;
	}
	woas.macro_parser.macro_names.push(fn_name);
	woas.macro_parser.macro_functions.push(fn_object);
	return true;
}

// some default macros
woas["macro_parser"]["default_macros"] = {
	// advanced transclusion: each newline creates a parameter
	"include":function(m) {
		var params = m.text.split("\n");
		// embedded transclusion not supported
		if (!params.length || !woas.page_exists(params[0]) || woas.is_embedded(params[0]))
			return m;
		var nt = woas.get_text_special(params[0]);
		if (nt === null)
			return m;
		if (params.length) { // replace transclusion parameters
			nt = nt.replace(/%\d+/g, function(str) {
				var paramno = parseInt(str.substr(1));
				if (paramno < params.length)
					return params[paramno];
				else
					return str;
				} );
		}
		m.text = nt;
		m.reprocess = true;
		return m;
}
};

woas["macro_parser"]["macro_names"] = ["include"];
woas["macro_parser"]["macro_functions"] = [woas.macro_parser.default_macros.include];

woas["macro_parser"].create = function(fn_name, fn_code) {
	// duplicated from register function
	if (woas.macro_parser.macro_names.indexOf(fn_name) != -1) {
		log("cannot redefine macro "+fn_name); //log:1
		return false;
	}
	var obj = null;
	try {
		eval("obj = function "+fn_name+"(macro) {\n"+fn_code+"\n}");
	}
	catch (e) {
		log("cannot define function "+fn_name+": "+e); //log:1
	}
	return this.register(fn_name, obj);
}

/* ]]> */ </script>
<script language="javascript" type="text/javascript">
/* <![CDATA[ */
/*** ui.js ***/
/* This file contains javascript used by user interface */
// no references to 'this' are allowed - global woas object is used

// when home is clicked
function home() {
	go_to(woas.config.main_page);
}

// when Advanced is clicked
function advanced() {
	go_to("Special::Advanced");
}

// follows a link
function go_to(cr) {
	if(cr == current)
		return;
	var _b_current = current;
	if (woas.set_current(cr, true)) {
		history_mem(_b_current);
		forstack = [];
	}
}

function back_or(or_page) {
	if (!go_back())
		woas.set_current(or_page, true);
}

// when Back button is clicked
function go_back() {
	if(backstack.length > 0) {
		forstack.push(current);
		woas.set_current(backstack.pop(), true);
		return true;
	}
	return false;
}

// when Forward button is clicked
function go_forward() {
	if(forstack.length > 0) {
		var _b_current = current;
		if (woas.set_current(forstack.pop(), true))
			history_mem(_b_current);
	}
}

// when cancel is clicked
function cancel() {
	woas.cancel_edit();
}

//DEPRECATED
function save() {
	woas.save();
}

woas["help_system"] = { "popup_window": null, "page_title": null };

// should have a better name
function help() {
	var wanted_page = "WoaS::Help::Index";
	var pi = woas.page_index(wanted_page);
	// we are editing
	if (kbd_hooking) {
		wanted_page = "WoaS::Help::Editing";
		pi = woas.page_index(wanted_page);
	} else {
		var npi = woas.page_index("WoaS::Help::"+current);
		if (npi != -1) {
			wanted_page = "WoaS::Help::"+current;
			pi = npi;
		}
	}
	woas.help_system.go_to(wanted_page, pi);
}

woas["help_system"]["go_to"] = function(wanted_page, pi) {
	if (typeof pi == "undefined")
		pi = woas.page_index(wanted_page);
	var text;
	// this is a namespace
	if (pi == -1) {
		woas.alert("Can't get help page "+wanted_page);
		return;
	} else
		text = woas.get__text(pi);
	if (text === null)
		return;
	// now create the popup
	if ((woas.help_system.popup_window === null) || woas.help_system.popup_window.closed) {
		woas.help_system.popup_window = woas._customized_popup(wanted_page, woas.parser.parse(
		"[[Include::WoaS::Template::Button|Close|window.close()]]\n"+text),
			"function go_to(page) { if (window.opener && !window.opener.closed)	window.opener.woas.help_system.go_to(page); }",
			"", " class=\"woas_help_background\"");
	} else { // hotfix the page
		woas.help_system.popup_window.document.title = wanted_page;
		woas.setHTML(woas.help_system.popup_window.document.body, woas.parser.parse(
		"[[Include::WoaS::Template::Button|Back|scrollTo(0,0);history.go(0)]]\n"+text));
		woas.help_system.popup_window.scrollTo(0,0);
	}
	woas.help_system.page_title = wanted_page;
}

// when edit is clicked
//DEPRECATED
function edit() {	woas.edit_page(current);	}

//DEPRECATED
function lock() {
	if (result_pages.length)
		_lock_pages(result_pages);
	else
		go_to("Lock::" + current);
}

//DEPRECATED
function unlock() {
	if (result_pages.length)
		_unlock_pages(result_pages);
	else
		go_to("Unlock::" + current);
}

function menu_dblclick() {
	if (!woas.config.dblclick_edit)
		return false;
	edit_menu();
	return true;
}

function ns_menu_dblclick() {
	if (!woas.config.dblclick_edit)
		return false;
	edit_ns_menu();
	return true;
}

function page_dblclick() {
	if (!woas.config.dblclick_edit)
		return false;
	edit();
	return true;
}

function edit_menu() {
	woas.edit_page("::Menu");
}

function edit_ns_menu() {
	woas.edit_page(current_namespace+"::Menu");
}

/** Used by search box **/

function menu_search_focus(f) {
	if (f) {
		if (current == "Special::Search") {
//		ff_fix_focus();
			$('string_to_search').focus();
		} else
			search_focused = true;
	} else {
		if (current != "Special::Search")
			search_focused = false;
	}
}

function menu_do_search() {
    if (current == "Special::Search") {
	$('string_to_search').value = $('menu_string_to_search').value;
       do_search($('menu_string_to_search').value);
    } else {
	_raw_do_search($('menu_string_to_search').value);
    }
}

function _raw_do_search(str) {
       cached_search = woas.parser.parse(woas.special_search( str ));
       woas.assert_current("Special::Search");
}

// Used by Special::Search
// make the actual search and cache the results
function do_search() {
	var search_string = $("string_to_search").value;
	if ( !search_string.length )
		return;
	_raw_do_search(search_string);
}

// Used by Special::Options page
function save_options() {
	if (!woas.config.permit_edits) {
		alert(woas.i18n.READ_ONLY);
		return false;
	}
	woas.cfg_commit();
	woas.set_current("Special::Advanced", true);
}

function ro_woas() {
	if (!woas.config.permit_edits) {
		alert(woas.i18n.WRITE_PROTECTED);
		return false;
	}
	if (confirm(woas.i18n.CONFIRM_READ_ONLY)) {
		woas.config.permit_edits = false;
		woas.cfg_commit();
		woas.set_current("Special::Advanced", true);
	}
}

function open_table_help() {
	woas.popup("help", 350, 200, ",menubar=no,toolbar=no,location=no,status=no,dialog=yes", 
	"<title>Building tables<\/title>",
	"<u>Building tables:<\/u><br /><br />"
	+"<tt>{|   <\/tt><br />"
	+"<tt>|+ Table Caption<\/tt><br />"
	+"<tt>| *colum 1* || *column 2* || *column 3*<\/tt><br />"
	+"<tt>|-<\/tt><br />"
	+"<tt>| line 2 || [[a link]] || something<\/tt><br />"
	+"<tt>|-<\/tt><br />"
	+"<tt>| line 3 || || more stuff<\/tt><br />"
	+"<tt>|}   <\/tt>");
}

// Used by Special::Lock
function lock_page(page) {
	var pwd = $("pw1").value;
	if (!pwd.length) {
		$("pw1").focus();
		return;
	}
	if (pwd!=$("pw2").value) {
		$("pw2").focus();
		return;
	}
	var pi = woas.page_index(page);
	woas.AES.setKey(pwd);
	woas._finalize_lock(pi);
}

// import wiki from external file
function import_wiki() {
	if (!woas.config.permit_edits) {
		alert(woas.i18n.READ_ONLY);
		return false;
	}
	woas.import_wiki();
	woas.refresh_menu_area();
}

function set_key() {
	woas._set_password();
}

// below function is used by Special::Lock

var _pw_q_lock = false;

function pw_quality() {

	if (_pw_q_lock)
		return;
		
	_pw_q_lock = true;

// used to get a red-to-green color tone
function _hex_col(tone) {
	var s=Math.floor(tone).toString(16);
	if (s.length==1)
		return "0"+s;
	return s;
}

	// original code from http://lxr.mozilla.org/seamonkey/source/security/manager/pki/resources/content/password.js
	var pw=$('pw1').value;

	//length of the password
	var pwlength=pw.length;
	
	if (pwlength!=0) {

	//use of numbers in the password
	  var numnumeric = pw.match(/[0-9]/g);
	  var numeric=(numnumeric!=null)?numnumeric.length/pwlength:0;

	//use of symbols in the password
	  var symbols = pw.match(/\W/g);
	  var numsymbols= (symbols!=null)?symbols.length/pwlength:0;

	//use of uppercase in the password
	  var numupper = pw.match(/[^A-Z]/g);
	  var upper=numupper!=null?numupper.length/pwlength:0;
	// end of modified code from Mozilla
	
	var numlower = pw.match(/[^a-z]/g);
	var lower = numlower!=null?numlower.length/pwlength:0;
	
	var u_lo = upper+lower;

	//   var pwstrength=((pwlength*10)-20) + (numeric*10) + (numsymbols*15) + (upper*10);
	  
		// 80% of security defined by length (at least 16, best 22 chars), 10% by symbols, 5% by numeric presence and 5% by upper case presence
		var pwstrength = ((pwlength/18) * 65) + (numsymbols * 10 + u_lo*20 + numeric*5);
		
		var repco = woas.split_bytes(pw).toUnique().length/pwlength;
		if (repco<0.8)
			pwstrength *= (repco+0.2);
//		log("pwstrength = "+(pwstrength/100).toFixed(2)+", repco = "+repco);	// log:1
	} else
		var pwstrength = 0;
  
	if (pwstrength>100)
		color = "#00FF00";
	else
		color = "#" + _hex_col((100-pwstrength)*255/100) + _hex_col((pwstrength*255)/100) + "00";
  
	$("pw1").style.backgroundColor = color;
	$("txtBits").innerHTML = "Key size: "+(pwlength*8).toString() + " bits";
	
	_pw_q_lock = false;
}

// used by embedded file show page
function show_full_file(pi) {
	var text = woas.get__text(pi);
	if (text==null)
		return;
	// put WoaS in loading mode
	woas.progress_init("Loading full file");
	// clear the partial display and put in the whole file content
	woas.setHTML($('_part_display'), '');
	woas.setHTML($('_file_ct'), woas.xhtml_encode(decode64(text)));
	// finished loading the file
	woas.progress_finish();
}

function query_export_file(cr) {
	var fn = cr.substr(cr.indexOf("::")+2);
	if (confirm(woas.i18n.CONFIRM_EXPORT.sprintf(cr)+"\n\n"+woas.ROOT_DIRECTORY+fn))
		woas.export_file(cr, woas.ROOT_DIRECTORY+fn);
}

function query_export_image(cr) {
	var img_name = cr.substr(cr.indexOf("::")+2);
	if (confirm(woas.i18n.CONFIRM_EXPORT.sprintf(img_name)+"\n\n"+woas.ROOT_DIRECTORY+img_name))
		woas.export_image(cr, woas.ROOT_DIRECTORY+img_name);
}

function query_delete_file(cr) {
	if (!confirm(woas.i18n.CONFIRM_DELETE.sprintf(cr)))
		return;
	woas.delete_page(cr);
	back_or(woas.config.main_page);
}

// delayed function called after page loads and runs the script tag
function _img_properties_show(mime, tot_len, enc_len, mts) {
	var img=$('img_tag');
	woas.setHTML($('img_desc'),
		woas.i18n.MIME_TYPE+": "+mime+"<br /"+
		">"+woas.i18n.FILE_SIZE+": about "+_convert_bytes(((tot_len-enc_len)*3)/4)+
		woas.i18n.B64_REQ.sprintf(_convert_bytes(tot_len))+
	"<br />"+woas.last_modified(mts)+
	"<br />"+woas.i18n.WIDTH+": "+img.width+"px<br />"+woas.i18n.HEIGHT+": "+img.height+"px");
}

function query_delete_image(cr) {
	if (!confirm(woas.i18n.CONFIRM_DELETE_IMAGE.sprintf(cr)))
		return;
	woas.delete_page(cr);
	back_or(woas.config.main_page);
}

// triggered by UI graphic button
function page_print() {
	woas._customized_popup(current, $("wiki_text").innerHTML, 
			"function go_to(page) { alert(\""+woas.js_encode(woas.i18n.PRINT_MODE_WARN)+"\");}");
}

woas["_customized_popup"] = function(page_title, page_body, additional_js, additional_css, body_extra) {
	var css_payload = "";
	if (woas.browser.ie && !woas.browser.ie8) {
		if (woas.browser.ie6)
			css_payload = "div.wiki_toc { align: center;}";
		else
			css_payload = "div.wiki_toc { position: relative; left:25%; right: 25%;}";
	} else
		css_payload = "div.wiki_toc { margin: 0 auto;}\n";
	if (additional_js.length)
		additional_js = woas.raw_js(additional_js)
	// create the popup
	return woas.popup("print_popup", Math.ceil(screen.width*0.75),Math.ceil(screen.height*0.75),
						",status=yes,menubar=yes,resizable=yes,scrollbars=yes",
						// head
						"<title>"+page_title+"</title>"+"<st"+"yle type=\"text/css\">"+
						css_payload+_css_obj().innerHTML+additional_css+"</sty"+"le>"+additional_js,
						page_body, body_extra);
}

// below functions used by Special::Export

woas["export_wiki_wsif"] = function () {
	var path, author, single_wsif, inline_wsif;
	try {
		path = $("woas_ep_wsif").value;
		author = this.trim($("woas_ep_author").value);
		single_wsif = $("woas_cb_single_wsif").checked ? true : false;
		inline_wsif = $("woas_cb_inline_wsif").checked ? true : false;
	} catch (e) { this.crash(e); return false; }
	
	var done = this._native_wsif_save(path, single_wsif, inline_wsif, author, false);

	this.alert(this.i18n.EXPORT_OK.sprintf(done, this.wsif.expected_pages));
	return true;
}

// workaround to get full file path on FF3
// by Chris
function ff3_getPath(fileBrowser) {
	try {
		netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
	} catch (e) {
	    alert('Unable to access local files due to browser security settings. '
	    +'To overcome this, follow these steps: (1) Enter "about:config" in the URL field; '+ 
	    '(2) Right click and select New->Boolean; (3) Enter "signed.applets.codebase_principal_support" '+
	     '(without the quotes) as a new preference name; (4) Click OK and try loading the file'+
	     ' again.');
	    return false;
	}
	var fileName=fileBrowser.value;
	return fileName
}

function import_wiki_wsif() {
	if (!woas.config.permit_edits) {
		this.alert(woas.i18n.READ_ONLY);
		return false;
	}
	
	var done;
	// grab settings
	_wsif_js_sec.comment_js = $("woas_cb_import_comment_js").checked;
	_wsif_js_sec.comment_macros = $("woas_cb_import_comment_macros").checked;
	_wsif_js_sec.comment_woas_ns = $("woas_cb_import_woas_ns").checked;
	// automatically retrieve the filename (calls load_file())
	done = woas._native_wsif_load(null, $("woas_cb_import_overwrite").checked, true, false,
			_import_wsif_pre_hook);
	if (done === false && (woas.wsif.emsg !== null))
		woas.crash(woas.wsif.emsg);

	if (done !== false) {
		// add some info about total pages
		if (woas.wsif.expected_pages !== null)
			done = String(done)+"/"+woas.wsif.expected_pages;
		woas.alert(woas.i18n.IMPORT_OK.sprintf(done, woas.wsif.system_pages));
		woas.refresh_menu_area();
	}
	return done;
}

// create a centered popup given some options
woas["popup"] = function(name,fw,fh,extra,head,body, body_extra) {
	if (typeof body_extra == "undefined")
		body_extra = "";
	var hpos=Math.ceil((screen.width-fw)/2);
	var vpos=Math.ceil((screen.height-fh)/2);
	var wnd = window.open("about:blank",name,"width="+fw+",height="+fh+		
	",left="+hpos+",top="+vpos+extra);
	wnd.focus();
	wnd.document.writeln(this.DOCTYPE+"<ht"+"ml><he"+"ad>"+head+"</h"+"ead><"+"body"+body_extra+">"+
						body+"</bod"+"y></h"+"tml>\n");
	wnd.document.close();
	return wnd;
}

// tell user how much work was already done
woas["progress_status"] = function (ratio) {
	this.setHTML($("woas_wait_text"), this._progress_section + "\n" +
				Math.ceil(ratio*100)+"% done");
}

// used to debug progress indicators
woas["_progress_section"] = false;

// reset progress indicator
woas["progress_init"] = function(section) {
	if (this._progress_section !== false) {
		this.crash("Progress indicator already started for "+this._progress_section+
					", will not start a new one for "+section)
		return;
	}
	this._progress_section = section;
	if (typeof section == "undefined")
		section = "";
	else section = "\n" + section;
	this.setHTML($("woas_wait_text"), section);
	document.body.style.cursor = "wait";
	// put in busy mode and block interaction for a while
	$.show("loading_overlay");
	$("loading_overlay").focus();
}

woas["progress_finish"] = function(section) {
	if (this._progress_section === false) {
		this.crash("Cannot finish an unexisting progress indicator section");
		return;
	}
	$.hide("loading_overlay");
	document.body.style.cursor = "auto";
	this.setHTML($("woas_wait_text"), this.i18n.LOADING);
	this._progress_section = false;
}

function clear_search() {
	$("string_to_search").value = "";
	$("string_to_search").focus();
	if (!cached_search.length)
		return;
	cached_search = "";
	woas.assert_current("Special::Search");
}

/* ]]> */ </script></head><body class="woas_background" id="body" style="cursor: auto;" onload="woas.after_load()" onunload="woas.before_quit()">
<div id="loading_overlay" style="display: inline; visibility: visible;"><noscript><h1>If you are seeing this text, your browser is not javascript-enabled.</h1></noscript><div id="woas_wait_text"></div></div>
<div style="display: none; visibility: hidden;" id="woas_pwd_mask">
<div style="visibility: visible;" id="woas_pwd_query">
<form id="stealthpwd" action="" onsubmit="woas._password_ok(); return false">
<h3>Enter a decryption password</h3>
<p><input name="woas_password" id="woas_password" size="16" type="password" /></p>
<p class="woas_password_desc">Password will be used next time you attempt to access an encrypted page, and then kept or removed second the AES key caching option you have chosen.</p>
<p><input value="OK" type="submit" />&nbsp;<input value="Cancel" onclick="woas._password_cancel()" type="button" /></p>
</form>
</div>
</div>
<div class="wiki_header woas_background" id="sw_wiki_header" style="position: fixed;">
<table cellspacing="0" width="100%">
<tbody><tr>
<td style="width: 35px;"><img id="img_logo" alt="WoaS Logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J%2FAAAAAXNSR0IArs4c6QAAAAJiS0dEAP%2BHj8y%2FAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH2gEcDzUY4t9JowAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAI7SURBVEjHtdVPSFRRFAbw33ujljETWhaGo9YiCGoVuHDTIggE2xRBbgeEoFWQFARBq3ZCELQKgqJtbWtTEAitgqBNCZJFGGb%2B18Hxz20xr3HSmXEU%2Bt7ivnvf%2B757z3feOydSAZNh2QrW0IAm%2Bx2LVMS25e9h0UbFF5u1aI1qCvwMs9ZVRyStK6oq8D3M2xn7HdYSVRAYC3n1ocHRslDi4vCtbjprpspmcTH2BbtBwddQJjATZu0Wi36FvwFZqOk861atbUttvDku1SAHeUsKFb6MueQM8c%2BwUcOuJatVnxYDb8hX3XtFoWZoxZM3LFkpW0wlfmxY29HIvNnQEsV5fQql62IyVqO%2FknPegNtgFfG6wyZ80GtaQRrjcnpdN5eQhvTrNwaG5Tx3S0%2BSH%2BIga9SItA8mZTGs21MZTxKBnMfuJLOsLzLOupL4RJySNeadGyWBT645adAbMO6xnCHvwUNcMmg0cYy4Ubc30vp9NaG7FG1TYueQHve9sAjSBr10xj3QiLhZp1F96PRWJ854ZsIjF8CK07LeYQ4PfJRyCuzTGhEfkJVyAeeMyOKmTy5bkAODbhsw4ZyrGDekz2t3kSnWg5nwWbAXHHcsIm6NDu2J%2FrfMxrRJ7UGgffNvPBQd2TU9UyrzMZyIDu6K3qRja13o0Fw3PaWrrKiWbmbCDwt17d7lSFSlsYyG3zukNKNjS3fa0md%2BhUnzVRPXXqFDVmiZU2HOouV%2Fjn1QRntUV3PdxHRYRUpb5H%2FiD%2FUerIBA%2BEx5AAAAAElFTkSuQmCC" /></td>
<td><span class="title" id="wiki_title">Useful commands</span></td>
<td align="right">
<div id="menu_back" style="display: inline; cursor: pointer; visibility: visible;"><a title="Back" onclick="go_back()"><img id="img_back" style="display: inline; visibility: visible;" alt="Back" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABexJREFUeNp9lWuMlkcVx39n5nned9+9sO6yLCy3XSg1LAVES2Itoi1YoynGJtbGhDQa+8VUqyFqtI0aYiQWEz/VSzTapImJmlY/tIENASzQ7SVtdVfcpiqUTYGyyy6yu+x7eZ5nLscP70u6UeMkk5kzk/P/zzkzc/7Cfzdp9dgyho3hboFtCv2t9WlVxqLyPDDZ8rOtPeX/NNMCR+Bea3geyFtOccl4c14zhmeBXf/pv/S0S8Ej0G+EXyvsUyX2dIrs3mLj9iGjvcuQwsPF2ah/Phdl7EI0hQcRBOVJhUeAegtXlxLcBN9sDCMxMrS8C/foZ0vy+T2p7VsuoogSjAQfNfeBhZoycTHwq2M+/OHFSFQSEV5X5V5g5iaJLGFbaw2jITL44WHjfvdoR7JmqF1i3Wp0KibWcdkCDZ+ShTK5C6ioiiAjrwd97Cnn5qqURHhVlT1A7ebFNEMQno7K7Xdvte7Y4a60d3kvRb5CSPskKZeZb1RY6N5HR+qxxRTRlMiLKDfqqreuEd6/ySQnx2ORFayn+RieA4xt5elBhW+s7hU3cqiS9r6nS13ol6RjAFtZzuyNNm4MfY+VOw9g+j8KV0fw2XUiCarIfA1ZvRwd6MWeGNcI7AROA5MGEBG+CnBwf8msGbDq8rLYchemrYeZah/1Dd9lw7aPkbgZbMcgptyLISAiiEAphbkq7N5qZM/7RFsZ+VpzFO6Kys4NK0XvvzMxsapYazDGM3u9oLH2IQY330FwOVoZwJw7BPPjkC4DERALGIwgzqOf+mAzK1HZC2wyRrgHYO8OG3s6hcwhhgVmr1Wpr32YwffuJIYcY8skfzsAE48TvCdm84SsSshqhKKBCGQFsmGVsL6fAHSJsDsBdgBsHzK4IBA9s/NlasPfZ3B4FyGbw5S7WZweo/GvKnHVl3HOU3hP4Rw+CKY6Sbg8ig+WcgqDK4SLM4rAjkSVlQC9nUjhReq1BgsbD7Jhy1587SpiK8R8gfaeW2jb9QSEAo0FMWREX6AxQzRw7uS3mTt7lLb2Et2d4eY3Xp3c/Gw+Qu4juYfuSkGMnhgcRiwKiClj8CgF4BANGAlEdaSlLpKOAZyHNIrou9VIEhGuoTA9p1q4oAVtYv9+mKx7HeW1+4jFdSTtwl09Q3H1DJp0412ODxEfAj5CY3GWS2efAWvIXdC5xRa8MpMAE8A9f52M5F7JnIDmuNEv0X3nz2hb+wlCPo9UVlO9dIrFS2MEK+ROyRxkBWQOCixRDfWGcnFWW/hMmKicBHjhjSDTcxEXotZ9Sr2IXD39MLW3j4BpI9pOeu76Dcm6j9Dw4Gwn3lYISRsxKVN4AVGdnFIuX8MCmSpnjConjfDm5WuYI68FTRJYbHga3lIvApf+9BUWL44gRohukZUfOgTt66nVqmRFICs8eRHInKLAiTFt6ojwIjBhWky/APj5kRAuTEcBdLHuaThLLQ+cP36AucljpOVl2KSdgg4aeTM1uYNqppRT9LV/qLz0ZvOKVfnJ0nJdEuFlVT6wY6P4w19MknKCZgWSJAaNHqTEytseoL7wDtPnThBIKJzScFApoW9NqRx+OrrFOinwLPDpZiDvasF2I7wQlWVbh8R/836TrOsTrefgg0iMSpH5po7aBB8UETSxyF/OK78ciW6hRirCpCq7gClahUSlSTJ9+ybzCvCZt6a0cvosznmhrxtpLyvWCjZNxSQWIaqPyOVryjOjGn9/WkMjJ13Vw6VKiU/WcyZbB9elkmnHn2gPpcTcdt8Pst/+8x2/DYjL2oUtgzauX6HS2RbFR7i+iF6YUj1/BVP4ppwMr5NTP/yC3X98PF756XPRGCFGBaxpot+1zeL+2Gnc0S7qR9eXHn9o4JFV/T3n/4fQL7XjLQNy9jufS/a/9OOSnPlRKk993ZqOtiWin5hmmXjsgZRDD5a5URfT1Q4L3ffFfOPBysuvvLrn+MlTH58YG906N/VGH2Jib6fMDK+T8Ts2m5Gdt5rRUqr+ynU11YaqiOq3ngxMvK0YgX8Db1YRHvYQ7IQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC" /><span id="alt_back" style="display: none; visibility: hidden;">&nbsp;<strong>[Back]</strong>&nbsp;</span></a></div>
<div id="menu_forward" style="display: none; cursor: pointer; visibility: hidden;"><a title="Forward" onclick="go_forward()"><img id="img_forward" style="display: inline; visibility: visible;" alt="Forward" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABf1JREFUeNp9lX+MVUcVxz9n7r3v7ntvd4G3CywL7KLBCJWlYLGmKWgBtVGM0Yj80zSaqLVp0n+0/qDxD00kjU2aaKoxKm1CYqJNq6kQuiFCkBawKVS2uIYohYUFusvuwr4f+37ce2fm+Mc+ZKPGSSYzZybne86ZM+d8hf8e0p6+Law3hu0CQwrL2ueTqpzzynFgrK0XtO+U/zNMGxyBXYHhOJC0lfyC9c6+bgwHgQf/U3+htwvBPbDMCC8ofFYVv6RTZNs9gd+4xmipG0ktjE97ffuil3OXvUktiCAoLyo8CTTauLrQwB3wdcYw7D1rerrI9n4pJ1/eEQW9PSIKijViHZpaS6WujI479h+x7venPF4JRTiryi5g6o4RWWBtVWA46TyDW9eb7Hd7i+HKNQXxjVA1taKagpuj0XQ0fJEktSiqYpDhs06fPpBls3PkRHhLlR1A/U5i5kMQXvbKfds3BNmRH3dFpZ4SabJUJCpJkOvG+ozx+iCmOEDeXsFLTJKpVBuqH1gpbF5rwmMjPm2lDDD/GQ4BJmi/06MKT/WXJBvel49Ki7s0c8skKvahuWWYKORyZZD4/v30DH0V7Bx26hTedKCqUq6r9PeIrigRHB1RD2wBTgBjASBG2K/Q/9zXYh76SCRZq0vCQi8a90FuNUYdPr+K3nVfIHBlpO9h1NVoTZzCSoxXpVKH968QuXJT/dhNjBEWK7wUiLBdlb3vWy7606/HEqtgooJouASJFoMpoAj5dBRVh5a2QXKLqO8T+KxG/cZfsBKTOS/Oo90FzJG3VRRWAi8HgeExVbbt3hr6PVsjaSVIlAsQcYgmiC9j7DSS3SJ47zcYTaFnKy6pEPfvwGVVKtfewklEM1HpKsDpC95X6nSIMBICmwA2rjFkFjxKuVzldnQvYXE5SAiq4FcgDJL87Tid3E/PwGay5iw9H/4eSWa5evYA1ueII2VwqTA+pQhsClVZDlDqRBJnpFWvcrXrCdbu3EdkLJgcIsF81ajHuwxxZXzWBASbzLJiy1PMVW9zeeQQHYUcizrdnTLu/3dpWw+ZVRopLO8fZFF3kVwIcSTEEXSEShx6Ch1CnAvxzgKKuhQRQ2ffFjILzovo3W4koQgzKEzOqiaZVSeR5K78hGpBCAt9gAMMqmCM0Jgr0+wYondpH2nSJMgVacyOMXbm16iBNHM6W2vDK1MhMAp88p0xT2KVZhagtVskb36HIACR+RSICM26csk/wL2f+yjezhGEMUltgvOHnqAycx2ViGrTMT6tbXxGjVeOAbzxdyeTs57MqTasoUmRhi/QcEVadFFpKhdlJ5t3v8Di7hBPQDI3yfk/Pk55ZhxncoDXsQm4PkMAtFR53ahyzAgXrs9gDp9xGoZQa3qaiaWROBqpp9WscS1Zx9BnnqE7qpBlSjo3yTuvfoPyzDjexDQThwJHz+k8jwingFHTtvRLgF8cdu7ypBdAa02lmSiNVKk2oNBVorSoiEqBdG6Cc68+zuz0ONbE1BqWOIee+YfK6QvzKVblZwub3TkRdjUSVl24pvZjQyYwBm20EOsUqyFZ7Spps0zaqjJ69IeUp8dxkqPedORj9NKEyvMHfZZmRMBB4Afzgdzlgo1GeMMr3RvWiP32bhOu7hVtJJBZRBWy1GIdqBjUBKBOw0Dkr+8qvxr2WaVOJMKYKg8CE4AEbVIwwOR9a82bwBcvTWj+xHmyzELvIqTQAYERgiiUIAwwAWqdl+sz8MpJ9S+dUNdMiPqWcC2f49ONhLG247qQMoOR5wsuF5oPff5Hrd/+84YdAnx3Ae4ZED+wDOnsQKyH2zWjY5PoxRvOpHaeTtavlj8/85XgkT+N+Pd+fsgbI3ivQGDm0R8aCsj+0Gnsa13UD6/OPfvYwJODffl3/wfR35XF+LX98fnv7zGPnH4uJ68/G8mBbwWm2LGA9EMz3yae3hOx79GYWl1NoStP0Nvva7Od+aNnqjuOnp3+1Ojl6obZWtaLWt+7amhq46YtIzt3fHz4gQ/qycqZb9rrN6tmrmVURPW7LzpGrypG4F/y5h6hh4BiQgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=" /><span id="alt_forward" style="display: none; visibility: hidden;">&nbsp;<strong>[Forward]</strong>&nbsp;</span></a></div>
<div id="menu_advanced" style="display: inline; cursor: pointer; visibility: visible;"><a title="Advanced" onclick="advanced()"><img id="img_advanced" style="display: inline; visibility: visible;" alt="Advanced" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABcZJREFUeNqNVW1MlFcWfs657ywdhqXIsJRkDNuFTmKklXZTR6g7Wxs1BQsmVRvaNE2JydYlrOy6MTGrpg20KT/Kpqi7bnRd+0cEbWs/BJtqSIpJK5GMFLrQbUH5mhEWmJ2BwMI473tPf8w7Feyy6Ulubm5yz3me+9zzAaxgRORi5mKlVBoRAQDba0UXAGrJ+f/dhRPAJQACYBDAH5nZuSTQvaYSnAjM/HMiKl7pLttsz+fl5cnFixfj+/fvt9LT0wXAN0T0yP9wTDyP+T4AhwDM2MTevPd5DICYGQA6fT6fjIyMmOFw2Ors7IwVFRUJgGEiylziQ7ac2wHcdLlcsmfPHqu6utokIgFQv0RyAjMb9mEdgEmfzyc3btywpqenpbu7O5aamioAnrd9HPb+SwC6rKxMWlpa4pcuXbI6OzutTZs2CYBvkh/hFJELWut/MfNGEek1DKPy+vXrmJ6eFrfbLatWrWKn0wkAypYxuZd4vV46fPhwzDAMg4hoYGBArl27BgAnmRK3znu93mdLS0vztdYfK6W2m6b5jMfjQV5eHiKRCHp6eoxwOAwAfSICAJYNsBEA0tLSVFZWluTm5lpNTU0qFot1M/MxMPM6APFz585Z8/Pz8fLycguA5OTk6EOHDklfX5/09vZaFRUVAmDMMAyXLSMAHGFmOXXqlHnkyBGzrq5OV1VVWcwsAHYm8kupVAADBw4ckKmpKWtoaMhqb2+PDw0NmaFQSPr7+3UwGNRnz541U1JSBMDf7EQ4CkBOnz4dP3bsmAlA22uciO5mkM2kITc3V0ZHR2MzMzMyNzenZ2dn9dzcnBWJRPTw8LCIiL58+bKkpqaaAL4kIvPEiRNWY2PjHQBCRCeZ+SFmdi1NX2XncH80Gn1pYGAgff369WY0GkUgEKD6+npmZvj9fnzW0UEOQ8nI8IjcvHUz5/jx47KwsIB9+/YZRHQCwB4R+Y+IxO24ellJE9GTACZSUlLE6XRqADEAQ1lZPzPLysqECRqAKIN0Y+PbZkNDg2kzf/vHtJJkNWYAKAGwnYgeNAwjnYlHwSSZrqes1T95QbYW10hdXZ1mJhOAMHPNPXWxovEPMImaAMi65/5gnvl8WNdVN0k2fiNAjhQVP67feqvBskGqbSfjx4AoAASi8wCk4NnfmS19E7p/flFebPxIHnLv04BH/+rXRSIi+uDBgyYAUUrtToLYkq0oFYGoxQ5+p+Xrf+veqVn9ctNnuvS1d+ThxytMAOarr70q4+PjEg6HrZqamqRcLySJrgRCAJYHn5zRlc0d+umD/5B1RbtMgDQr1q2trdbg4KB0dXXJ2NiYtXv3bguAdrvd21avXv0DyZOHvwIkBTv3xpr7JnTv1Gwi+J9OSeETz90hsBDRewA6PB6PtLW1xQOBgFy5ckUCgUDc7/dLdnZ2d3NzM/Lz878PTAC0UioXQOX9jo3Y/9u9jsK8Vfjz5RsY/2qQJjo+jfd+8b5DoD8SkV1EtCsUCv2zqqrKuH37dnxiYgK3bt1S27Ztw+TkpCc9PT0zMzMTAEjZICIiXgDVufc/qfMdLjrX8y0i4WlMtH9i9nzxruPRxwo/mJ2d3RWPxxnAHDN/HI1Gy7q6urI3bNgQdzgcZkNDg+HxeL5yu91/OXPmTKJL2N0UO3bszMx+IHPSRY+IR1XFfvHTvfGHH62IAZAtW7ZcqK2tTY7F5HCCUupBAP1KKXE4HJKRkRE+evRo8Zo1a+5+tN24uK2tDbW1tb9PVGeGxZxtApDi4uILIyOjqrKykgCQYSRSnW1Hv9+fVl9fv8PhcLxYUFDwgNfr/b5wYbMAAJSXl9Pi4iJOnvz70yWlW5o3PbXxw9ffeP2VsbExIxgMUigUos2bNy/z8fl8dPXqVSopKYHdbpYHX5ZGzGhtbWURwfz8f7GwsIhIJIpgMMjj4+MUjUYRDodRWFgIAFi7di3a29uxdetWIDHdDKKkgnftO1VKiuX0HbQtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==" /><span id="alt_advanced" style="display: none; visibility: hidden;">&nbsp;<strong>[Advanced]</strong>&nbsp;</span></a></div>
<div id="menu_home" style="display: inline; cursor: pointer; visibility: visible;"><a id="a_home" title="Main Page" onclick="home()"><img id="img_home" style="display: inline; visibility: visible;" alt="Main Page" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABbdJREFUeNp9lVuMVlcVx39rn/N9c7/fmKHMwBTFQaDQIRptIQNUU1ONbaxNE2IxxhcT2xBrNOXBNxpJ0yejiQk16UPTVsWYkpY0zggtEBtrZbQzVIsyOOUyzAwzzO27nLP3Wj58Z+hEjTs5Z+19Ttb/v9fae62/8N9DskezxYBz7BPYbtCZfZ8y44Iap4GJzC/K/hn/Z7gMHIGHIsdpoJw56Rq7Ol9xjteA+/7Tf+1u14Ir0OmEFwy+bIa21Ivs2Rrpjo3OWhuRxMPkjNp7l1QuXFaXeBBBMH5h8CRQyHBtLcEq+Kec45QqG9saSJ/5el4O7c9F7W0ihphoJN6rlVPPwooxNhk4/mYIJ84H1IhF+JMZDwHTqySyhu2uyHEuKH33D7j0lWfq4vUba0ULkVmKiC5RLixRDhElq6WcGggmovLGu6kdeTFN55fJi/BHM/YDK6sHUwlB+JUag/u2RembxxpyrW2tJKUOkapOiWKYSzoobvguNVUx0eJFzJTCckluL3v75IaYXZtdPDKqSSmhl8plOAm4KMvTNwy+39Mq6amjNbnW5gZLQpfkG3tQy3NdB4nueZ72gYdx3Q/jfZH5pBG36RC5hrvk9o33pbtVrLtVouFRVWA38BYwEQHihOMGPc9/u4qh3TlJkmbJ1zWzktQz3fA4bYPfo7m5BS3PA4Goa4jaDQ/QdvcDVNd3svDhSywUoL8buXLTdOImzgnNBq86EYbU2L2pS+zRz8cuFBx5WWRmsZrbPYdZf+9BavNGSMsgOVBFQoFcDKEwTUgWCUkZJyapF/vKZytZUeMAsNk54QsAB+6JtKUhorSyIFf9IOz6Geu37EX8MiGkgGEWsKyOzMA0Jd/0CVp3HUaDUiyrbFon9HYQgAYR9jhgJ8CO/hyhvMT16kdo2PsSHR2d+OItTAOoxzQF9WABMwWzzCrdg0/Rf+A5ggn5nNHXJatFttOZ0QXQWi9SKJnUt/XR0NhMUl7BTDFNsJBgmmLmK4QWMAtgiqqHUKa1bw+Sa0RDoKlOVsu4505p++BJpAY3eZzbpx+jtHSz0pBWwTXF1GPmUQ2YelQ9Lq5i9tJJRk88QXF5DiUnZnfakTgRZgGm5s3SgBVLKQsf/pri0hQi9vHu15JoimUkzkXcunKemSsfoJIn8WrzSxm8Me2AMYC/TChlbxRTKFGLqaIhQTVFNcVCioaKrUQSMMvSFuXQCIIay0WYnMkuAow5NUYAzo4HmZo30mBWLHuCTyoEPkF9uTLPSCqESRaNJ009pTKIYJdvGFdniYCSGW87M0ac8MHVWdzr7wbLxbBUUnDxnThtzRvJOnV2jpFEqMUUk0pDG75gFR0RzgNjEeCBGHjw4qT6vdvjqDZOzeWbpL59M768iPkC6guEtID6IiEtEJICmpYorcww/s7LkM7ae5eQX55Vzbrz08DfVtt1XoQ/mHHvzn7xx74VxXln5qMmiSOHYBWVUQgGIRhpgDQIKyslYgp2ZUbkx69qulQkB7wGfLUSyMdasMMJZ9Vo3LZR/A8ejeP1bd4KJSMNiFlGoOAVQqjkPI5FRi87fv5GSBdWyIkwYcZ9wA1AokwUHDA1uNm9A3ztnzes5sz7kqbB0dHkpK7aEUUOcU6cc7jIWTCRa7ccJ86LvnJGQ7FMbl0LH9Xk+VKhzES2cVsrmdHoT2pDPnaffuRo8vLfrybbAW2sFbb2Oe3tQOprEB9gbgmbmMIuXVOXeANwW3vdmWcPuYO/G9XrPz2pzgmqBkSugj60PSL5TYMLp2qZPbEuf+Spx5/c1H/3P/6H0K9d68DAlr/+6Js9B88dQ95+Li8vPh25uuo1oh+7Sk6PPJbn6BM5rs/lnN/yLL2f+Y4uzt+sGR4e2T888vsvjo+Pb5ubn28XEW1va5nesW1g9MDQ507tG7r/XJV+5P/828Nu5tpFc3HOfviCZ+xfhhP4N5gwShkDZas3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==" /><span id="alt_home" style="display: none; visibility: hidden;">&nbsp;<strong>[Home]</strong>&nbsp;</span></a></div>
<div id="menu_unlock" style="display: none; cursor: pointer; visibility: hidden;"><a title="Unlock" onclick="unlock()"><img id="img_lock" style="display: inline; visibility: visible;" alt="Unlock" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA%2FwD%2FAP%2BgvaeTAAAEnUlEQVR42o2WX2wUVRTGf3NnZ7a7tkvTdA1rlxSWthgwEpoawh9jS8SHxofqAyaGBzBBE15IBLTxwfgCGBITfZAXk%2FYBjDE09QGJpqKFGBKiDYkuVChd7KbbbbtLy3bb2dk%2Fs3N96M52t63ASU5m5t7c853zne%2FeOwoV9vDhwxpWWSgUypVelYphWfKnmnACrxd8z549rwB2yYslfwuoB9zAayWgXYBrXQQneKU3NzfvcrLs7%2B%2BXsVhMTk1NyVu3bsmK7N8EZCqVcr4PlUDXVlBpBw4ceDEajd7u7e0tJpNJDh48SDqdJpVK4ff7iUQi9Pf3A1wBWFpa4s6dOwDfA92rQdYAzM3NvQRw%2BvRp9erVq1YwGGT79u3s2LGDrVu3Eg6H87t376avr6%2B8ZnZ2lgcPHgAMAi2V%2FaribXp6WllcXLw4MTHByMgIR44ccW3YsOFDr9c76vP54vF4vKOnp6cvGo3S1NRUlVhrayvAp6vEsLYCALd7pUqPx3O%2FpaVl9OjRoxPnzp27%2FH9qOX78OMAMMF2psKoKxsfHBYBpmuUxr9c729raagQCAftJcrxw4QKACeQrx8sA4XBYDAwM1K5eaBiGb3h4uOn69es2z2bFdQG%2B%2FOiDd4bvz%2FQBDA4OkkgknAb%2BtjrCsWPHqK1dyUXXdS5dusThw4cvAreBfxyaFGeDhUIhMxUfJT8%2Fibn4iHzGIJtZYPFxCjOTAUDTNPQaN8Klorlr2NXTSywWI5FI0N7eDvAV8DUQKW3O6h4ouTS59AxGIkrWWCLzOMlcMsGSsQQSPJ4adK8HVRVo6spJUVdXx82bN9m3b98J4LsSwFoV2baNLC5TKG2wFXtZcxKEEKAoKELBtiWvn%2FqBzz45iRCCuro6VFV1wmwCtHVVBBIpJUiJlEViMynGJmYxM1kE0FBfy6aNcPZKnEgkghCCTIm%2BxsZGhoeH6erqugy8CvwJ5KopEipCCBShIIQk8Hw9HpEjs7CIRCBqdHq%2FvceNGzcoFAqMj49jWRaKoqDrOps3b2ZkZISOjo7fgZ3AXREKhbIrHBWxihZWvoCVL%2FDocZrJxBJT81kSCxne%2FfxXzp45g5TLlWqaRltbG21tbWzZsoX6%2Bnr8fj%2Fnz58H%2BAtocJUUlF0mSEFVVFSXC6G6aPR5EVkPGbeNXVJ3Z1cXhmGgKArbtm1D1%2FXl6hWl%2FOzs7HRS3ljdA9tCFjIUcovkc2mi8QTzyXlMw0RzucoBHDdNk0AgAEA0Gi2PO6BA%2FaoeKEhVQwg3Lk0nuLGBWlVimu4qwTmBQqEQwBeAbG5uPjU5OYmiKOTz%2Bf857Io2kiKyWMAqFLByuVJPLGTRAuCXoaEyHQCH3mg%2FeeLtnaecHW1ZFkNDQ870QtU9%2B%2FM3HzPx7zjZhSRZM0sulyWfzVKwiggUajw6g6Murl27hmEYaJpGMBgEIBaLoes6Y2Nj7N%2B%2FH%2BA94McywMt%2B%2FYW%2Fk%2FmpZznN9u7dy8DAALa9cv6Fw2GklHR3dwP0Aj8BdysrUAAV0EvP1X8Slfacz%2BeLp9Pp9ebeB%2F4A7gE55SnJPmneBTQAAaDO4bx06cwDFsB%2F1pf2UYdfB6cAAAAASUVORK5CYII%3D" /><span id="alt_unlock" style="display: none; visibility: hidden;">&nbsp;<strong>[Unlock]</strong>&nbsp;</span></a></div>
<div id="menu_lock" style="display: inline; cursor: pointer; visibility: visible;"><a title="Lock" onclick="lock()"><img id="img_unlock" style="display: inline; visibility: visible;" alt="Lock" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAB3RJTUUH1wMbFisGhO%2Br5wAAAAlwSFlzAAALEwAACxMBAJqcGAAAAARnQU1BAACxjwv8YQUAAANZSURBVHja3VTPT1NZGD3vvZYWGGqVNgKyEBZqwsRYtRpjJpkdMbNk5YrMZjYQF27c%2Bxe4MCxcIJmdyRAjGxMX%2FohKUGMgMAt%2BTCJ0CtqR2tLS9%2Fp%2B3eu5r8UEZphS48qbnL57b9895%2FvO970LfK%2FjKjFJlIhHxH0i9a3Ib%2Fb396%2BPj4%2FLjY0NOTMzIycmJvxEImHyv1%2BbJTP2rG8PDw9fn5ycjPX19aFYLCIWi6Gnp0cbGBgI5%2FP5XzKZjMb3nn1N5FfS6bRZKBTk%2FPx8ZWho6C337GQymR0ZGbHn5ubk1NSUHBwcLNctbHo8YHRycXFRplKpP7ieIS4TP8Xj8eejo6OmsmtsbMzh3r2m2elxMZfLyenp6QqXK8TPRCuhLEn39vZm19bWpKoN1wsH5dV3Jp2dnZFKpYJyuawIbGKeqBJq%2FSabzYrNzU10d3Wp15MHFQjtTJaWlm6xe4bry8eEl2zVb3UfO3rt71wRoegPePniBeUEWiPhoyFDlwQOd7SjI9EN27ZRyr9HV4eB5Wzx3rYbdJyl7RGMEXHCJ3KEW1h5AiE0eJ6A8F3OHVjFf%2Fj0gtSE70G4Nnzbgl%2B18ObhXfz2%2B7riOkvMhvYIlOr4MjSyWPlVlHKr8Cng2xXYTpWJCEgpKcw9x4S3XYBjbkEEssHo2lWD%2FYYQPiSjrC3okFarOnQdmq5B09QGaTQ1N0j4xRRjVw32HzKIlD9YWPgTy6vrsMxqEJlQbdYWxYnjx5CIePBdZiPkrtMNBTSdUdWjPX%2FpAk6fs%2BDRJk9lRZuEWw1sK7ERAuo9VW2cAS1SZJ7jYPbt7P4ZtNTIQ0aoOQHJUwa9NUJhnLuYxunUKbhsSZ%2BiyjqpCuxWsJ3jnPZE2w%2FzVKYJAeEFNrhOBXOzK%2FtmEIcXNITREm22BjqkEWYdIjh74Qx%2BPHOSNbAhpAgKr%2Fz3XQvlDwZaolG4bqTJGvhsU6hWdWFuleHwg1K9L%2Bqtqz4yzzah0cJo2yGU88Vdx40G9O3p%2FrbLbRo9%2FpiBVSrALH9ClVCdJDybNVDZaAxCh7W9haevlvH6nfmUZ3mv4K%2F%2FZaf6RT7uoHbhHRRPiBvEeeBfXftfGjhC9KD26YcbWlq7xz4SWeJDI4EdEUXccoCAdoZqJZf49Bkd5rOdXLtvgwAAAABJRU5ErkJggg%3D%3D" /><span id="alt_lock" style="display: none; visibility: hidden;">&nbsp;<strong>[Lock]</strong>&nbsp;</span></a></div>
<div id="menu_print" style="cursor: pointer; display: inline; visibility: visible;"><a title="Print" onclick="page_print()"><img id="img_print" style="display: inline; visibility: visible;" alt="Print" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAB3RJTUUH1wcECDIDhMeZAwAAAAlwSFlzAAAewQAAHsEBw2lUUwAAAARnQU1BAACxjwv8YQUAAABjUExURf8f7XNzc1JSUmNjY1paWmtra3t7e0pKSggICCkpKSEhIRgYGBAQEDExMcbGxgAAADk5OYSEhK2trYyMjJycnJSUlKWlpc7OzkJCQr29vdbW1rW1td7e3v%2F%2F%2F%2Ff39%2Bfn5%2B%2Fv7w37xZMAAAABdFJOUwBA5thmAAABKUlEQVR42n2S2a6DIBRFZRKhBRkPU9X%2B%2F1de1A7el64HcsLKDmTDMPzCcnyB1vc%2BTJgSxgg9IMK8hRfLWsDVZWddvPwIBRkzrHKrWqeLsDMHz1hkMq3P5zWRGzeICIvysl4FCRRv69ZEzOH5%2BIoHB1OXddssZWjZE%2Bd986xiTqnqYunIdVnsPN3LMLTJGm%2BaLi0RhEjVXQRFhsFNGjNmitbegIJHerCpZrqLxu6BiGwyRGEIply1U7iC5BhtABKbxA3A6VdCp2gMz0qIWASr%2FbRTWNApuRhKyrduUHVBHWIMuleUUl%2FyLThVXDyFjfDGKUUUxI8IX7Cx4F9i9CF%2BCBCi9bvQs7F2%2FIelE%2BpdoUlIeduR8hikuKujRYRJrxXtj94HNhJOf%2F2cP%2B6HGtUMDq8TAAAAAElFTkSuQmCC" /><span id="alt_print" style="visibility: hidden; display: none;">&nbsp;<strong>[Print]</strong>&nbsp;</span></a></div>
<div id="menu_setkey" style="display: inline; cursor: pointer; visibility: visible;"><a title="Set password" onclick="set_key()"><img id="img_setkey" style="display: inline; visibility: visible;" alt="Set Key" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A%2FwD%2FoL2nkwAAAAlwSFlzAAAu6AAALugBK4TfhAAAA2ZJREFUSMe1ls1rXGUUxn%2FvnTsfma80JmkzWpvaVsii0lqx1VYpbWrRSYsiLbhRiqvOwoXSpSD%2BAW5cOCKIFtSFIoLWEaolIFKJMRQrRMU2HRXDtNNkviczc%2B%2B8r4ueGW%2FbaZoscuHlwuFynnOe9zzPucoYw1o%2BFmv82KuqJpVRgPKEjE4nl6VArYQiK5XxA0E5toBowAWaQFOnk%2B6qAaxUxgIiQAwIAyEBsATAARpADagA9Vs7uiOAlcrYQD%2BwDogLUB%2Fg9wC0gCWgCpSAIlDW6aReFkAqHwAGgXsEqNNFQADaQk9dqi8Ci8ACUOp00vOSJ3Z%2BsCsSLDxZrg%2BFfpo7nF2sjfgEJCL34PPwX%2FHEjMRbAnxzByc%2F3xeP2v9%2BEg5WJhQ3unTcYGv6yuEz52Zf%2BFWo6vN0UAfKUvl1IA9cA64C13U6qbsdjL15ynrukb%2B%2FDNrV%2FQ0nPJ%2BvbDwPrB%2Fpz%2B57%2FMEzzxfrw9GZ7HgeiEq1jnDvl8q9F96hstEFeGr72SNBu7p%2FqRWbPf3DGy%2FnK4k4kHh4dHJuYuf7J%2FZs%2FWbvTPbgeVD9krQJFCR5UxL3yaQFbwMI2pVxgHz1vnfzlURTkgQu%2FHVg7rFtmcJQdH7gtadThwyqKzSFMYBRSt4YgzJGgak2Rl%2BC5Ge2Z2AVQFv7tAipc3rYiVLcSE7Ablh%2Bn%2BNVN27bbmuDslIZ1QUoLW34IxIosSH%2Bz4shf32q4YQ1oHds%2Bn7bYDQ3sFAdqb1z7q1fgCGhoQbkj%2B9%2Be9NYYmqzMRYoUGgWavd%2B%2Bt7k69%2FqdNJ0AWYu7z69bnvu1XCgvCc1fuqjXPGBadvXun%2FjwJ9PgOHHS0cvyMRozx2UlNIuwOz83u8s5ba3DF886LZDLRnXm8f0xMcHRgcj2a%2BioeJDnZjjBp2pueTZyd%2BOXRJVRzxTVBtL%2FBwb6b8SyJU3X%2Fx9%2FtFpICfnqk4nm7cpOfbKh%2F5DO754NmRXd5WWhtTU5Weyhdp6vySP9dBBRabJq4NrwKJOJ%2FWdrCICDAvfg2IbcY%2BSvVbR8aGC2EReRNZYbh%2FUxVs6E%2BSKqS3nRSVRdFHid3VTSyjpUBOV6fF7AByPm5Ylec1r2XfbB0qSRlewD6pAa8X7oEc3ATm3brRWr8T%2FL1VjVn3Uya%2FVir9d69%2BW%2FwCh5sidoCxDaQAAAABJRU5ErkJggg%3D%3D" /><span id="alt_setkey" style="display: none; visibility: hidden;">&nbsp;<strong>[Set Key]</strong>&nbsp;</span></a></div>
<div id="menu_help" style="display: inline; cursor: pointer; visibility: visible;"><a title="Help" onclick="help()"><img id="img_help" style="display: inline; visibility: visible;" alt="Help" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A%2FwD%2FoL2nkwAAAAlwSFlzAAAN1wAADdcBQiibeAAAAAd0SU1FB9oDCxIoGlBNSPYAAAcJSURBVEjHfZZrUJXHGcf%2Fu%2B%2FtvO%2B5QCwckItcFAMSg8WmhFiqUYuXRG3N5GLajmOa0dZG05HRzrRe%2BqHTzDTTRjL2g9iONBrTqo3BNMqkBR1BCKERKgpChHO4eTCcHM7hvHDOeS%2B7%2FVBgrNN2Z555Zndn%2Fs%2FuPvt7dgn%2BSxNFUcjKyqJ%2Bv988evSoPDY2liTLsirLskAIQTwetxOJRCwlJSVy4MABA%2F%2BnkYf66sWLF%2Fe4XK6vJkwzcf369SFJEFILCwsr3W53HqWUEEJgWRaPRCJDfX199SYwtGnDhmRKiNLU1NRRVVVV%2B78CpLe0tHx6p6fnoynbbjECYzWrV6505JY8Dk3TIEkSCCHgnINzDtM0oU9NYeyTT%2FFhW6tFPO43ChcVLAuFQnl79%2B59Stf1KAAIs%2BotLS3Xr169WhsKBhvyIvqpHQmipT22BOqifC5QShhjc%2BKUUgiCAFVR%2BLybPaTszgAdNhPLGztuHCwrL48XFBQcbmho%2BP1cgJqamo0TodAT94dHzq4j8odrVY9Kih%2FlTBCInZZCEpYFwzCQSCRgmiZs2wbnHNCnCO%2FqBnU4eMH9oJIkSS%2Be7fjsrc1btjxx7969YH9%2Ff58IAMtLS5d%2B3Nh4u9ih%2FflJ1SOjuAimQyFT%2FiFMj4ygLdmJP9TUoL29HZFIBNnZ2dj92mt4wT0PauA%2BklJSiZyTg%2BV9n9NRl6f2SnPTe7m5ucsA%2FFUEgIiuj9u6fmQbcaj2wlxuuDQS7h%2FAvabr%2BKL7Dp7%2FrPk%2FboLP58P%2Bqir4svOxu7wCZGEcj6R4IXtT%2Bab%2BAc%2Bvuf1KRNf3A4AIAOcuvO%2FYvW6jzCHAlCWifzGO4eZW%2BG93IxgO8yWpXrJ1104sWLCAc875hbo6Wn%2FpEs4FRrB1YAAyY1AZoGRnEvaNcqw1Y2LtX84TABBPnjwp%2Bny%2BgszyMgEeD6dT0yT6fh18HR0YiUxwz%2BNL8Vz2KiMSjb7Q2dnZTinlaenpZQAuhLmNyPQ0j%2FgGiXfrZmjfeRaKIPD80VGS3nRtUVVVlSR2d3cnlZSUVGqqCg4QJovQnqnEo%2Fk5ME6fIb0iNa6NDmc11V0cf%2BCUegAgLdXL8nZ8jyatqgApLoItiqCEEJfTifz8%2FGe6urp%2BQRVFUZOTk%2FMlSQLnHLZlw5iOQfGmIv2l5xFzadsfEhcAvA3AzshZcIitXQUxPQ3WdAyccxBC4HA44Ha7F1iWpVBCiEgpdRDyb%2BYYY2CMgds2wsEgmGE2PUT7MQCVAF5Zu2ZN7UQwyAnn4LPkEgJKKSilVJIkSh%2BuHXRmiBACURQhiuKDtO8H8EMAbwF4Z0Zobn52kbNAMsZAbdu2TNOMMcbmCBVFEYIkIT0jA5yQygcC%2FHjGvwkANuflWTk5oIoMQRDmSolhGLAsizHGGI3H49OhUOiOYRizlRSyUwMb8EOru4xlKd4TJd%2BsWDIjnD3jx9KKCrPLFxb8aV5zG8SrLZDcLgiCANu2EYvFEAqF7pqmGaNFRUXhW7du%2FS2q6wAhXKAUSZ23oR38JWIXL%2FOV3nRy%2BMVtN392%2BPBOABQADh458v3anx%2FyrStdLkSPneDJvzkGcf8RmMMjMCYn%2BUQ4jN7e3o%2FGx8cjBABe37dv95aVq6q%2FLjtEUVagLF6E%2BLETuN9wBcHpaT5vz05ib1iLseEREEKQlZsD540uTB76FfeqKpHmp4E9twlTPj%2FCg4O8LyMNJ%2F13f3L%2BnVNviwDw8raX%2BKUP6hIFnw%2BJjrx8LubmEGXndsyPJaA2N5PpkqWQqICKigoAwMjoKMyiAmRoTkIz0sG2PgvmVDF56zbX%2B%2FpIo70k7pIVAbNbNhOGJjmd776XpE3ovgESOXMWtkAhHtyHlIM%2FRXLJY3Bp2lymnZqGpOxs0DcOAT%2FaAZaeiokr1xDt7ycf52ZGXPl5tQldTwJAKQDp1KlT3UuLiyvq7%2FbtalLlaLizE8E3q3m8%2FQbItzciSdWQnJwMwzBgGAY8Hg80RYG8cgUMI4H7te%2FyL1s%2FwQ3vvMQHo8OvrygrK%2FMPDvYCcFEA8vHjx5sDgUDgB6%2B%2B%2Bt3fdXftOvOIM6QPDRH9ZhfMWJzP8iFJ0tzLZlkWYvE4120L0Z4ecjnLG60e9u%2F5bXX1xtOnTydaW1uvAJAJAA2AAkCrrq4%2Bt3jxYsffGxtb7ERi%2B5qiJc6iym8Rj9sNRVHmIDQMA7FYDOFwGB1tbazrH%2B3mlEP947qnny49f%2F48raurezkSiUwCMMhMHpQZE9avX7959erVX4vqOm9pa9M9mvaV0tLSJ%2BfPn79QURSVc454PB4PBAL%2Bjo6OVsu2v3xqxQpnbGpKqK%2Bv%2F2d7e3sdAAuACSBOHvoAyACkB0wAoGRmZnrcbrdKKRU554QxZuu6Hg8EApOMMQOAPSNqPSBuALD%2FBaO%2BPTDD5E81AAAAAElFTkSuQmCC" /><span id="alt_help" style="display: none; visibility: hidden;">&nbsp;<strong>[Help]</strong>&nbsp;</span></a></div>
<div id="menu_edit" style="display: inline; cursor: pointer; visibility: visible;"><a title="Edit" onclick="edit()"><img id="img_edit" style="display: inline; visibility: visible;" alt="Edit" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABSVJREFUeNqVlX9oXFUWxz/3vvfmR6aZyZB0YqKhlTUIldK0ILgisv6s9Rdrq1Y32P4hRcXUij/YNuLSFP3H+ttqtFiwTVfRrtbowhpo1iK7BbWg0qildfwRMzGTkNTxdd5kZt67Z//YmWnSpIoXDvdxL+98z/l+zzlXcWqFgAuBGGD4fUu01kPGmCxgAUH1QlVMgL3hcLgzGo0GIqIr56c8iMzrGMD3feV5Xk5rfZcx5k3ABvwqAEqplIik9+3bt2DlypUml8spy7JqTn9tFxEcx5GdO3eqnp4epbVeb4zZA2jA2JVINEBLSwuO46C1BsC27dq3Umpeq9yprVu3mnA4THd3926llIhIH1D5uwJijKFYLKogCFQ8HldKKVUsFpXv+yoIglnm+37t3Pd9JicnrS1btqienh5E5CWl1DmA0aeT6jgO+Xyevr4+RkdHicfjBEFAoVCgVCrNa+VyWWmtxfM8vWHDBj8ejy8QkXalFPZM50EQUFdXx+DgIF1dXbS2trJmzRrWrl1Lc3Mz4+PjGGOwbbtGW3Vva2tTlmVJoVBQFVpVjftaSSmF7/ssW7aM1tZW2s45m97eXjo7O3n22eewbZtEIk65XK4JPFP0qi4zK24OQKFQYPny5axYsYJ0Os2mTRt5/59vMzr6LTfccCMff3KYC5YsYeHChbS0tNTMcZzTy1nNdHwWkD948KC4rmvy+bzs3r1HOjouEGPyEgRGRET+PbhXzmpeIIcOfSwiRnK5nOTzefE8T1zXlWKxaNLptJ9IJAS4QinFHJEty8J1Xa6++iq0DvHFF5+idZGCd5LLLl/L80+sYt0dnfz8cw6lqIpcY+D0hpwFICI1HYLAZ+nSDvr6/g5EcCILmMh8yepVi7juyhC33LqekyddhoeHGRkZwff9Ws+cEaAahWVZnDhxgtWrb+If+97nyKHtlCYPkD78FIf/c4zt267BnfwvL+zYRTKZwPO8eQWeNwMArTWRSJSLL76Irvs2s/q2R5g4upOIU2C6pPnu6Div7/ozr+16iuPffE97+3mzOvs3KVJKkUqlsG2Hhx/axOXXb+TOv37I4rZGImGL0ZFfaIg4PP34RWzs2kQkEiUSCc87EOelqKqDMYapqSlefnE7pdAKHn1ikPP/0Igdsjjy+U+suXYJl1zosW79PYRC4VpvnLEPZmYwNjZGJpMhk8lw7NhxXtrxJPsP+rz13hDti5Og4LNPfuSZx1aRPtrPq7v2YFkWQRD8egbVVS6XKRaL+L6P67o4jkNv7w42P3mEr45N0NYaJ/dLkYmMy/33LueDf31QCdKcGaCagdaaZDJJU1MTjY2NpFIpHCfEZX+6lGeef4V1DxzAGKH93EakLPS/8yWLFi+q+Jgd6JxhFwQBxhiSyeSc2e/7AevvuJ10+juuW/c3tj34R/oHjjP0Q4revgdPJ0FmAijA1NfXEwqFTENDg7Isaw5tVQG3be0mtbCRNw4coL7xPD56bTtNTU0ANDQ0yMyGqwKUgGD//v0MDw+rfD6vbdtGKUWpVKqlrtT/34vp6WmaU0n+ctvNCEJ//7tMT08TiURkYmJCe54HUBCRWY/+5mg0ep9SqqSUUuVyGSOGumgUYwQQjAnwvGnq6+OUy6VTQmpdHRNijIl4nvcucPes2gcYGBgIZ7PZWCaTqRsYGIh1dCyNjY+nY647FZs6MRHz8l/Hrrliceyhh7tjnpePjYyMxMbGxmLZbDaWzWZjU1NTsaGhoWgikaj5/R958KLgEIeBwgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=" /><span id="alt_edit" style="display: none; visibility: hidden;">&nbsp;<strong>[Edit]</strong>&nbsp;</span></a></div>
<div id="menu_cancel" style="display: none; cursor: pointer; visibility: hidden;"><a title="Cancel" onclick="cancel()"><img id="img_cancel" style="display: inline; visibility: visible;" alt="Cancel" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABlhJREFUeNp1lW2M3FUVh59z739mdmZ2d2a324XutkWEbl8otEpFm0LbKBVSX6IEgoKpRYONfDAKopA2MdHaqDHWQARCVCIfSDFaEiFCiWkbamybVKyUtltb3G7ftt3dbvdlZuf/cu89ftipCQZPcpOb++H3u/fcc84jfHBYwBtAhC6v3AF8BOgBDDACvGtgH8LpoNA81+b6vyFNcYywCPgtMJo36A1tJtw2Owofnx2FvnYbShYF6sBrAmuE/5rI/wq+by+gIvwgKFuWVG30jcUt+qmevM4pmZATkSwotVT1fC3I/uHM7BiIOXTZi8BLwDcVJptGgQ9wyym8nDd8ceuKkvvWslYKBWtCFiTJPIlTEg+ZBx8UCVDLvH/1TMbPjjaisVTfFbhb4XxTW68aiIAq7Kjk5P6dd7Wnn1xQySVSFm9yKsGLSetoPE2aeRoOGl6IM9GGC1JQr/3jPnv07/X8YD28I7BGYRwQ28x5AB4z8Ogrd7Wn6/oquWlbkSxX1JAvSVQsQ76IBI/xKYpAEjNdr0lIGkwFS0chilZ02HT3payn4ZkvsBMwFlArzFfY8eTyUsumZWVpUJIrpW4m1j4ihZX3IY1JZPISGEPkU9zUGIO9Kyg/9HOKNywn6z8gU7HTWQVru/Li9w67ZQIHgFNWZq7/+LyyWfeb1a1ZIcpFDmF8zSNy42e+RrF7HtHiO3Bnj2IvnUKnxniv5xPM3/wH5i65lfZbbieIMLH/dambIteV4NiENxdi7TTwkjFCDvjCfdcX6C4am3hVCU6q7e0AhCzGtJRo+fI23LV9nLrmVuY9+TId1U6mJ8ZwQGF+Hxi52gJm3bV5mPmHRVFQbgL61szJ0XCIipMoMpT++gL+5tXYWb0ElyItZXTjr5gblLZKJ0l9Cim242vjjOx8GpUIQGKP9rUaX7aU657bjcKi1ojc3JIN05nivBK8x549QvbMBtzlc0iUx6UJhWoX5Y4ukkYdKZTQrM75nzzAxKE9UCij3pMFpS0SulsMwM0GmN2aMxQMGntIPSSJwwXFnv4H6bb1TF4YwOQK+CzDZRnYHG5yhIs/vpeJA29CuQPnPV7Bh5lstUYC0B0BIaiSOsgiJSioCkGULG4w2NHBPJtHQyAERTWAKMEHGmPjZF7xKvig+ABeQVUJqgDBABenMmUs8eI8xA7SYKhNjNPfu4q5m1+h0t1DFjfAWojy+KSBqcymZ+trRAtuozE+hsPiguIVYq9MZgowZASONzzxyQlvfAg0nGhcr3Om52PcuHkH1UqVuF5DCkX85ChuZBApteFq49hShet/+EcKCz5KMl3HqQFVRpMgw4kCHDZGOAYc3Xsxw3tC7JUrU9N0fPohZnV20Zi8guSLhGSKC7/YyL+/fzfp0ACmtUo6PkKu4xp6H/wuaZqRBtSgHJsMJgmMG9hnmrP8929cyBiYCkEDknhUTx/BA7nqLEIyxemtX2L0wG5qF87R/73P0jh3inz3PKKCJR4+S+pRF1Rih9874gB2KQza5hDvjwNfaTitrp5tQ52CSU4c0mTismSTo5x97nEuH9xDKFZxNk995CIjf/szWMPowV2ceHE79dRTtMLuESe7R5wIPKxw7ipgvMAGhd89saQl+1xvIRpLg5hGTQUVyeWRlhLBe0JQvFiyJCGpx2SKprkCpSiSkzWf/vREnI8DvwS+w0xZoE1AHC5HUn1r2K2q5CRbWokkiYomi1rUSSTOeVyALEDqlAxLlm/REOWlbIX+KZ9tPxXnvfKXoGxsTmi1TR4oYHbe2f5GV8l0bD8WrxqqO11Uyfs2CyEEyfyMeNasdzSQQzVT8a9eSPTZgTS3pGLf3HJT6Z59Iy5OwgzMrJEZ9bVzcvqjFWW7/sOl12dXWgee+5dbu/N0rXx+PJEoEiJrA4h6RetedLDuZdeZWJ55L7H/rIm//0P5bU8sKT7cWzTppVjl+KRXA4iVme57emUrmxa3MK3GViotfmDB57t+PX7dpheef/aBocGBhaA230Rg2nxyW2fX2Xse/OqfNnRPPNXx1osnh33RBB/0+ITXxw5Pvw/07FlfZXlXBKLk8nlbqFSD/fpTmi68Mzp8cP/St985csu580NzvPemq2vW6NKFfcdWrFx1uPNKf/34lnu5ODRmUyKfukAtU779dp2RVPkPYy9lOpej6EMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC" /><span id="alt_cancel" style="display: none; visibility: hidden;">&nbsp;[Cancel]&nbsp;</span></a></div>
<div id="menu_save" style="display: none; cursor: pointer; visibility: hidden;"><a title="Save" onclick="save()"><img id="img_save" style="display: inline; visibility: visible;" alt="Save" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAAA0FJREFUeNq1lc+KHFUUxn/n3qqu6h7tGdPByTBOEjQunK26EQRdhAGRuHGE2agLH8C1j5AXCFnkAYyBEIKoRHeabWQyJKIm+IdAdwSd0HZPdVXdc1xU9UynbZIe/xy4XG5R93z3fN937hWqeALYqGcFhH8WBkTAD8DXTCS64n18Jo6ToFo4792hAEQEVUUVc87baDR0ZvYBcEFAngO7eeatD5vHjq2XKysDee/dNxkOc9zcOIJzgXPnrhD0mfDVl+cbt29f/0zEvREBHqD9ZIckWfCdIwnLy8v0+3t47x7PiRkAcexoLy6SZW1arTaAQyq+ACSEAtVAURQyGo3I8/krMANVoSxLQigtaKjKsgkAREAEmRjOzVeBCDgnCPXecU7g8Rn+ZfzvANHkYprxsYD/GYABiExAzS+yWcX/IwEATEu8V7w3vNc5skvVvt7Qyj2zAVSVVqvJj3d6nD37MeAxJimSh+qxuj5DMVNUA7t/wFNHInSC2mhyh6AkyQrd3gOKYhcRv2/V6dOJCBoCjWSJNG2jqiSpAPrQUaLpTXk+4mhnyObma4QAWTZABNJ0AdWDk5mB98bFi9fJ8gWSxBFCybQt/gagqjSbTU6cOMknl66xvd0DjJdfWmNj41WGwwznBFVIU0+z1WQwDMRRNNMUUyJXzIYQyPOMbvcB8DSqSre7S1mOKIoc5xxmRp57NITaebMjmvlVqmq8czingOJ8Zd8DK8pB3ke0y34n26y/qutp8n45dEQ1fPA+qkU0MzMxM4q8JMsCqkpelJgZqoZz4xvU6m6vZqs6bnxYA4hEBDNz/f7vliQtnBuQNBJL0xbr68cpw6+Asf7CsyRJimpFk1klcqOR4HxEVIvsfSzeRQAmApGZfQ9c/uLz81tpupB3Oidd736X7e0dVlc7rK4u1g6LuHXru30NzMA55f5vPfLc0CCEMkgIZTkY7Hog7PebiHNLS8uXKlQpqR5+O+wQEQVCvX6/lrHq+M13PmplWf760c7QnT79Cnt7h3nRFO+Fq1e/saLoRDd3rv10986Nb0WECMTAiOMkWzv+4qfPnyrY2nqb/p97+DletDFdcSz8/EtgNFrj3r0d7nJDRMT+AqKAkRUl/oStAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==" /><span id="alt_save" style="display: none; visibility: hidden;">&nbsp;<strong>[Save]</strong>&nbsp;</span></a></div>
</td><td style="width: 0.5em;">&nbsp;</td></tr></tbody></table></div><p style="font-size: 20px;">&nbsp;</p>
<div id="i_woas_text_area" style="display: inline; visibility: visible;">
<div class="menu_area" id="sw_menu_area" style="position: fixed;">
<div class="wiki" id="menu_area" ondblclick="menu_dblclick()"></div>
<div id="menu_edit_button" style="display: inline; visibility: visible;"><input class="woas_menu_button" value="Edit menu" title="Edit menu" onclick="edit_menu()" type="button" /></div>
<div class="wiki" id="ns_menu_area" ondblclick="ns_menu_dblclick()" style="display: none; visibility: hidden;"></div>
<div id="ns_menu_edit_button" style="display: none; visibility: hidden;"><input class="woas_menu_button" value="Edit namespace menu" onclick="edit_ns_menu()" type="button" /></div>
</div>
<div style="visibility: visible;" class="woas_text_area" id="wiki_text" ondblclick="page_dblclick()"></div>
<div style="display: none; visibility: hidden;" class="woas_page_mts" id="wiki_mts"></div></div>
<div id="edit_area" style="display: none; visibility: hidden;">
<div id="edit_page_title" style="display: block;">Page title: <input id="wiki_page_title" size="50" value="" />&nbsp;<a style="color: blue;" onclick="woas.wiki_buttons_display($('wiki_format_buttons').style.display != 'block')">Show/Hide wiki buttons</a>&nbsp;|&nbsp;<a style="color: blue;" onclick="woas.html_buttons_display($('html_format_buttons').style.display != 'block')">Show/Hide XHTML buttons</a></div>
<div id="wiki_format_buttons" style="display: block; visibility: visible;">
Wiki Code:
<input class="wiki_button" name="btn11" value="Wiki URL" title="Wiki page link" style="text-decoration: underline; width: 70px;" onclick="setWikiIUrl()" type="button" />
<input class="wiki_button" name="btn10" value="URL" title="External link" style="text-decoration: underline; width: 40px;" onclick="setWikiUrl()" type="button" />
<input class="wiki_button" name="btn7" value="=" title="Level 1 header" style="width: 40px;" onclick="TagThis('= ','')" type="button" />
<input class="wiki_button" name="btn8" value="==" title="Level 2 header" style="width: 40px;" onclick="TagThis('== ','')" type="button" />
<input class="wiki_button" name="btn9" value="Img" title="Include wiki image" style="width: 40px;" onclick="setWikiImage()" type="button" />
<input class="wiki_button" name="btn1" value=" B " title="Bold text" style="font-weight: bold; width: 30px;" onclick="TagThis('*', '*')" type="button" />
<input class="wiki_button" name="btn2" value=" i " title="Italic text" style="font-style: italic; width: 30px;" onclick="TagThis('/', '/')" type="button" />
<input class="wiki_button" name="btn3" value=" u " title="Underlined text" style="text-decoration: underline; width: 30px;" onclick="TagThis('_', '_')" type="button" />
<input class="wiki_button" name="btn4" value="{{{ }}}" title="Nowiki text" style="width: 70px;" onclick="TagThis('{{{\n', '\n}}}')" type="button" />
<input class="wiki_button" name="btn5" value="*" title="Bulleted list item" style="width: 40px;" onclick="TagThis('* ','')" type="button" />
<input class="wiki_button" name="btn6" value="#" title="Numbered list item" style="width: 40px;" onclick="TagThis('# ','')" type="button" />
<input class="wiki_button" name="btn7" value="@" title="Alphanumeric list item" style="width: 40px;" onclick="TagThis('@ ','')" type="button" />
<input class="wiki_button" name="btn8" value="Ruler" title="Ruler (horizontal line)" style="width: 46px;" onclick="TagThis('---- ','')" type="button" />
<input class="wiki_button" name="btn9" value="Tags" title="Wiki tag or tags" style="width: 43px;" onclick="setTag()" type="button" />
<a class="world" onclick="open_table_help()">About tables</a>
</div>
<div id="html_format_buttons" style="display: block; visibility: visible;">XHTML Code:
  <input class="wiki_button" name="b" title="Bold text" id="b" value="B" style="font-weight: bold;" onclick="FullTagThis('strong')" type="submit" />
  <input class="wiki_button" name="i" title="Italic text" id="i" value="i" style="font-style: italic;" onclick="FullTagThis('em')" type="submit" />
  <input class="wiki_button" name="u" title="Underlined text" id="u" value="u" style="text-decoration: underline;" onclick="FullTagThis('u')" type="submit" />
  <input class="wiki_button" name="s" title="Strike-through text" id="s" value="S" style="text-decoration: overline;" onclick="FullTagThis('s')" type="submit" />
  <input class="wiki_button" name="sup" title="Superscript text" id="sup" value="Sup" onclick="FullTagThis('sup')" type="submit" />
  <input class="wiki_button" name="sub" title="Subscript text" id="sub" value="Sub" onclick="FullTagThis('sub')" type="submit" />
  <input class="wiki_button" name="left" title="Align selection left" id="left" value="Left" onclick="DivTagThis('left')" type="submit" />
  <input class="wiki_button" name="center" title="Align selection center" id="center" value="Center" onclick="DivTagThis('center')" type="submit" />
  <input class="wiki_button" name="right" title="Align selection right" id="right" value="Right" onclick="DivTagThis('right')" type="submit" />
  <input class="wiki_button" name="justify" title="Justify selection" id="justify" value="Justify" onclick="DivTagThis('justify')" type="submit" />
  <input class="wiki_button" name="list" title="Unordered list" id="list" value="List" onclick="FullTagThis('ul')" type="submit" />
  <input class="wiki_button" name="list_eq" title="Ordered list" id="list_eq" value="List=" onclick="FullTagThis('ol')" type="submit" />
  <input class="wiki_button" name="li" id="li" title="List item" value="li [*]" onclick="FullTagThis('li')" type="submit" />
  <input class="wiki_button" name="blockquote" title="Blockquote (indented text)" id="blockquote" value="Blockquote" onclick="FullTagThis('blockquote')" type="submit" />
  <input class="wiki_button" name="img" id="img" title="Image link" value="Image" onclick="setHTMLImage()" type="submit" />
  <input class="wiki_button" name="url" id="url" title="External link" value="Link" onclick="setHTMLUrl()" type="submit" />
</div>
<textarea id="wiki_editor" style="width: 1405px; height: 500px;" rows="0" cols="0"></textarea> 
</div>
<div style="visibility: hidden;" id="debug_info">
<p>&nbsp;<span style="font-size: large; font-weight: bold;">Debug console</span>&nbsp;&nbsp;<input value="Toggle" onclick="$.toggle('woas_debug_panel')" type="button" /></p>
<p><span id="woas_debug_panel" style="visibility: hidden; display: inline;">
<textarea id="woas_log" ondblclick="$('woas_log').value=''" rows="12" readonly="readonly" cols="60"></textarea><br /><input onclick="$('woas_log').value=''" value="Clear" type="button" />
</span></p>
</div>
<hr />
<div class="woas_about_footer"><sub><a class="link" onclick="go_to('Special::About')">About Wiki on a Stick v0.11.1</a></sub></div>
<script type="text/javascript">
//<![CDATA[
if (woas.use_java_io)
	document.write("<"+"!-- "+__marker+"-TAIL-START --><applet style='position:absolute;left:-1px' name='TiddlySaver' code='TiddlySaver.class' archive='TiddlySaver.jar' width='1' height='1'></applet>"+
			"<"+"!-- "+__marker+"-TAIL-END -->");
//]]>
</script>
</body></html>