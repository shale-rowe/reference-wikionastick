<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<script type="text/javascript">
/* <![CDATA[ */

var version = "0.9B";

var permit_edits = true;

var allow_diff = true;

var current = "Main Page";

var main_page = "Main Page";

var backstack = new Array(
);

var page_titles = new Array(
"Special:Menu",
"Special:Advanced",
"Special:Import",
"Special:About",
"Main Page",
"Special:Search",
"MyPages:Page 1",
"MyPages:Page 2"
);

var pages = new Array(
"[[Main Page]]\n" +
"\n" +
"[[Special:Advanced]]\n" +
"[[Special:Backlinks]]\n" +
"[[Special:Search]]",
"!Pages\n" +
"  [[Special:All Pages|All Pages]]: a list of all user created pages in this wiki\n" +
"  [[Special:|All Special Pages]]: list of all system pages\n" +
"  [[Special:Pages not yet created|Pages not yet created]]: a list of pages that have links to them, but were still not created \n" +
"  [[Special:Orphaned Pages|Orphaned Pages]]: a list of pages that once were linked to, but now no page links to them anymore\n" +
"  [[Special:Search|Search]]: search all wiki pages\n" +
"\n" +
"!Maintenance\n" +
"  [[Special:Import|Import wiki]] from an early (or current) version.\n" +
"  [[Special:Erase Wiki|Erase Wiki]]: delete ALL wiki pages and reset with default data\n" +
"\n" +
"!Special edits\n" +
"  [[Special:Edit CSS|Edit CSS]]: edit the global CSS styles\n" +
"  [[Special:Edit Menu|Edit Menu]]: edit main menu (on the left)\n" +
"\n" +
"!Options\n" +
"  [[Special:Block Edits|Block/Unblock edits]]: hides the edit button, to be used when this wiki goes public (when used as a webpage, for example)\n" +
"  [[Special:Diff|Diff mode]]: enable/disable the diff mode (useful for revision control systems) after having viewed it\n" +
"\n" +
"!Info\n" +
"  [[Special:About|About Wiki on a Stick]]\n" +
"  This wiki was last modified in <span id=\"lastDate\"></span>.",
"Import a wiki from an early (or current) version:\n" +
"\n" +
"File: <input id=\"filename_\" type=\"file\" /><input type=\"button\" value=\"Import\" onclick=\"import_wiki()\" />\n" +
"\n" +
"*Important:* CSS will not be imported from versions below v0.04",
"!Wiki on a Stick version 0.9\n" +
"\n" +
"Current version *v0.9B* by Daniele C. ([[http://sf.net/users/legolas558/|legolas558]])\n" +
"Original version (v0.01 &tilde; v0.04) by Andr\u00e9 Wagner\n" +
"Wiki on a Stick is licensed under the [[http://www.gnu.org/copyleft/gpl.html|GNU/GPL]] license.\n" +
"\n" +
"!!Contributes\n" +
"This project wouldn't be what it is without the help of other people. If you contributed to Wiki on a Stick and your name is not here, please send an email to <a class=\"world\" href=\"mailto:legolas558 _AT_ users.sourceforge.net\">this email address</a>.\n" +
"\n" +
"+ *Jeremy Ruston* - the creator of the wonderful [[http://www.tiddlywiki.com/|TiddlyWiki]], who served as inspiration for Wiki on a Stick. He also kindly allowed the usage of his saving/loading routines.\n" +
"+ *Philip O'Donnel* - creator of the table syntax & parsing code\n" +
"+ *Tim Lord*\n" +
"+ *Knut Kohl*\n" +
"+ *Rob Schmersel*\n" +
"+ *Cyril Mazard* - search feature\n" +
"+ *plumloco* - XHTML lists parsing and other improvements\n" +
"\n" +
"If, for any reason, you don't want your name listed here, just send an email.\n" +
"\n" +
"!!Contributing\n" +
"\n" +
"Read more at [[http://sf.net/projects/stickwiki/|Our SourceForge Project]]\n" +
"We also have a [[http://groups.google.com/group/stickwiki/|Google dicussion group]]",
"!Wiki on a Stick Example\n" +
"!!Formatting\n" +
"!!!Third header\n" +
"!!!!Fourth header\n" +
"\n" +
"/(click on the pencil icon on the top right corner to edit the wiki source)/\n" +
"\n" +
"You can also double click anywhere on the text to edit, and you can use escape to cancel editing\n" +
"\n" +
"If you have an older Wiki on a Stick, [[Special:Import|import it]]!\n" +
"\n" +
"<pre>\n" +
"\n" +
"This is pre-formatted text!\n" +
"</pre>\n" +
"\n" +
"<pre style=\"color:gray\">\n" +
"\n" +
"This is stylish pre-formatted text!\n" +
"</pre>\n" +
"\n" +
"Using [[Special:Main Page]] you will always link to the main page, no matters what its name is.\n" +
"\n" +
"New pages have red links, like this [[New page]]\n" +
"\n" +
"There is support for [[Tagged:Nice|tags]] and namespaces. For example, see [[MyPages:Page 1]] and [[MyPages:Page 2]], both belonging to the [[MyPages:]] namespace.\n" +
"\n" +
"!!Syntax parser testcases\n" +
"\n" +
"On my right there is some _underlined text_, followed by *bold text* and /italics/.\n" +
"\n" +
"Now I will use /*italics and bold*/, followed by */bold and italics/* and finally _*/underlined bold italics/*_.\n" +
"\n" +
"Maybe you want to see some *_/bold underlined italics/_* or also some */_bold italics underlined_/*?\n" +
"\n" +
"And here is, just for you, a partial *bold-/italics/*!!!\n" +
"\n" +
"!!Syntax\n" +
"\n" +
"External links: [[http://stickwiki.sourceforge.net/|Wiki on a Stick]]\n" +
"\n" +
"As you can see, /an/unix/path/ is correctly recognized.\n" +
"\n" +
"Boldface: *Boldface text*\n" +
"Italics: /italics text/\n" +
"Underline: _underlined text_\n" +
"\n" +
"Ruler:\n" +
"---\n" +
"\n" +
"List:\n" +
"* Item 1\n" +
"** Subitem a\n" +
"** Subitem b\n" +
"* Item 2\n" +
"** Subitem c\n" +
"*** Subsubitem d\n" +
"* Item 3\n" +
"\n" +
"Numbered list:\n" +
"# Item A\n" +
"## Subitem i\n" +
"## Subitem ii\n" +
"# Item B\n" +
"## Subitem iii\n" +
"### Subsubitem iv\n" +
"# Item C\n" +
"\n" +
"!!Tables\n" +
"\n" +
"{|\n" +
"|+ Telephone Table\n" +
"| *Column Name* || *Type* || *Other* || *Description*\n" +
"|-\n" +
"| id || INT || PRIMARY KEY || Row ID\n" +
"|-\n" +
"| contact_id || INT || KEY || References FOREIGN KEY(Contacts.id)\n" +
"|-\n" +
"| type || ENUM('Home','Work','Mobile','Pager','Other') || || Defines type of Telephone record\n" +
"|-\n" +
"| number || CHAR(32) || || Contains actual Telephone number\n" +
"|}",
"!Search in Wiki\n" +
"\n" +
"<input id=\"string_to_search\" type=\"text\" onfocus=\"search_focus(true)\" onblur=\"search_focus(false)\" />&nbsp;<input type=\"button\" value=\"Search\" onclick=\"do_search()\" />&nbsp;<input type=\"button\" value=\"Clear\" onclick=\"clear_search()\" />\n" +
"",
"Hello there! I am indeed a better page than [[MyPages:Page 2]]\n" +
"\n" +
"[[Tags: Nice]]",
"Hey, don't tell anyone around but...I am better than [[MyPages:Page 1]]!"
);


/* ]]> */
</script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">body {
  background-color: #CCFFCC;
}

/* page title */
p.title {
  font-size: 24pt;
  font-weight: bold;
  margin-bottom: 0pt;
  margin-top: 0pt;
}

/* Text */
/*
.text_area {
  font-family: "Arial";
} */

/* Left menu */
div.menu_area {
  border-width: 1pt;
  border-color: grey;
  border-style: solid;
  font-size: 9pt;
  background-color: white;
  padding: 5pt;
  width: 80pt;
}

/* Main text */
div.text_area {
  border-width: 1pt;
  border-color: grey;
  border-style: solid;
  background-color: white;
  padding: 10pt;
}
	
/* existent link */
a.link {
  color: blue;
}
a.link:hover {
  text-decoration: underline;
  cursor: pointer;
}

/* unexistent link */
a.unlink {
  color: red;
}
a.unlink:hover {
  text-decoration: underline;
  cursor: pointer;
}

/* outside world link */
a.world {
  color: darkgreen;
  text-decoration: underline;
}
a.world:hover {
  cursor: pointer;
}

/* Tables */
table.text_area {
  border-color: black;
  border-spacing: 0px;
  border-style: solid;
  border-width: 1px;
}

table.text_area td
{
  border-width: 1px;
  border-style: solid;
  padding: 5px;
}

/* since v0.9 */
h1 { font-size: 23px; }

h2 { font-size: 20px; }

h3 { font-size: 17px; }

h4 { font-size: 14px; }


div.taglinks {
	border: 1px solid #aaa;
/*	background-color: #f9f9f9; */
	padding: 5px;
	margin-top: 1em;
	clear: both;
}

div.search_results {
	border: 1px solid #aaa;
	background-color: #f9f9f9;
	padding: 5px;
	margin-top: 1em;
	clear: both;
}

a.link.tag {
  color: navy;
}
</style>
<script language="javascript" type="text/javascript">
<!--
/*** stickwiki.js ***/

var debug = true;			// toggle debug mode (and console)
var save_override = true;	// allow to save when debug mode is active
var end_trim = true;		// trim pages from the end
var save_on_quit = true;
var dblclick_edit = false;

var forstack = new Array();
var cached_search = "";
var tag_to_show = "";
var search_focused = false;
var prev_title = current;	// used when entering/exiting edit mode

// Browser
var ie = false;
var firefox = false;
var opera = false;
var unsupported_browser = true;

// Returns the element by ID
function el(name)
{
	return document.getElementById(name);
}

// fixes the array.push and array.splice methods
if (typeof Array.prototype.push == "undefined") {
  Array.prototype.push = function(str) {
    this[this.length] = str;
  }
}

if (typeof Array.prototype.splice == "undefined") {
  Array.prototype.splice = function(offset, length) {
    var temp = [];
    for (var i = this.length - 1; i >= 0; i--) {
      if (i < offset || i > (offset + length - 1)) {
        temp[temp.length] = this[i];
      }
      this.length--;
    }
    for (i = temp.length - 1; i >= 0; i--) {
      this[this.length] = temp[i];
    }
  }
}

function page_index(page) {
	for(var i=0; i<page_titles.length; i++)
	{
		if(page_titles[i].toUpperCase() == page.toUpperCase())
			return i;
	}
	return -1;
}

// Returns if a page exists
function page_exists(page)
{
	return (is_special(page) || (page.indexOf("Tagged:")==0) || (page[page.length-1]==":") || (page_index(page)!=-1));
}

function str_rep(s, n) {
  var r = "";
   while (--n >= 0) r += s;
   return r;
}

function _random_string(string_length) {
	var chars = "ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
	var randomstring = '';
	for (var i=0; i<string_length; i++) {
		var rnum = Math.floor(Math.random() * chars.length);
		randomstring += chars.charAt(rnum);
	}
	return randomstring;
}

var parse_marker = "#"+_random_string(8);

function _get_tags(text) {
	var tags = new Array();
	if (text.indexOf("Tag:")==0) {
		tags.push(text.substring(4));
	} else if (text.indexOf("Tags:")==0) {
		var alltags = text.substring(5).split(",");
		for(i=0;i<alltags.length;i++) {
			tags.push(alltags[i].replace(/^\s/g, "").replace(/\s$/g, ""));
		}
	}
	return tags;
}

function header_replace(hdr, text) {
	return text.replace( new RegExp("(^|\n)"+RegExp.escape(hdr)+"([^"+RegExp.escape(hdr.charAt(0))+"].*)", "g"), 	function (str, $1, $2) {
		var l = hdr.length;
		if ($2.indexOf(hdr)==$2.length-l)
			header = $2.substr(0, $2.length-l);
		else
			header = $2;
		log("Header is "+header);
		return "<h"+l+">"+header+"<\/h"+l+">";
	});
}

// XHTML lists parsing code by plumloco
// This is a bit of a monster, if you know an easier way please tell me!
// There is no limit to the level of nesting and it produces
// valid xhtml markup.
var reListItems = /([\*#]+)\s+([^\n]*)\n/g;
var reReapLists = /(?:^|\n)[\*#]\s[^\n]+\n(?:[\*#]+\s[^\n]+\n)*/g;
function parseList(str) {
        var o_or_u = (str.charAt(1)=='*'?'ul':'ol'),
		open_o_or_u = '<' + o_or_u + '>',
		close_o_or_u = '</' + o_or_u + '>',
		old = 0,
		stk = [];

        function toStr(item)
        {
            var s, i;
            if (typeof(item) === 'string')
            {
                return '<li>' + item + '</li>';
            }
            if (item instanceof Array)
            {
                s = open_o_or_u;
                for ( i=0; i<item.length; i++)
                {
                    s += toStr(item[i]);
                }
                return s + close_o_or_u;

            }
            return '<li>' + item.data + toStr(item.lst) + '</li>';
        }

        function collapse(to, from)
        {
            var nos, tos
            while (to < from)
            {
                nos = stk[from-1].pop();
                tos = stk[from];
                if (typeof(nos)==='string')
                {
                    stk[from-1].push({data: nos, lst: tos});
                }
                else
                {
                    stk[from-1].push(tos);
                }
                stk[from] = [];
                from -= 1;
             }

        }
        function collect(str, p1, data)
        {
            var nos, tos, type;
            var level = p1.length;
            while (stk.length <= level)
            {
                stk.push([])
            }
            if (level >= old)
            {
                stk[level].push(data);
                old = level;
            }
            else
            {
                collapse(level, old)
                stk[level].push(data);
            }
        }
        str.replace(reListItems, collect);
        collapse(1, old)
        return toStr(stk[1]);
    }

// used not to break layout when presenting search results
var force_inline = false;

// Parse typed code into HTML
function parse(text)
{
	if (text == null) {
		log("text = null while parsing current page \""+current+"\"");
		return;
	} else
//		log("typeof(text) = "+typeof(text));
	var prefmt = new Array();
	var tags = new Array();
	// put away stuff contained in <pre> tags
	text = text.replace(/\<pre.*?\>(.*?)\<\/pre\>/g, function (str, $1) {
		var r = "<!-- "+parse_marker+prefmt.length+" -->";
		prefmt.push($1);
		return r;
	});
	
	// <b>
	text = text.replace(/\*([^\*\n]+)\*/g, parse_marker+"bS#$1"+parse_marker+"bE#");
	// <u>
	text = text.replace(/(^|[^\w])_([^_]+)_/g, "$1"+parse_marker+"uS#$2"+parse_marker+"uE#");
	
	// italics
	text = text.replace(/(^|[^\w])\/([^\/]+)\/($|[^\w\>])/g, function (str, $1, $2, $3) {
		if (str.indexOf("//")!=-1) {
			return str;
		}
		return $1+"<i>"+$2+"</i>"+$3;
	});
	
	text = text.replace(new RegExp(parse_marker+"([ub])([SE])#", "g"), function (str, $1, $2) {
		var tag = "<";
		if ($2=="E")
			tag += "/";
		tag += $1+">";
		return tag;
	});
	
	// headers
	for(i=1;i<5;i++) {
		text = header_replace(str_rep("!", i), text);
	}
	
	// <hr>
	text = text.replace(/(^|\n)\-\-\-/g, "<hr />");
	// <strike>
	//text = text.replace(/(^|\n|\s|\>|\*)\-(.*?)\-/g, "$1<strike>$2<\/strike>");
	// <br />

	// table start
	text = text.replace(/(^|\n)\{\|([^\n]*)/g, "$1<table class=\"text_area\" $2><tr>");
    
	// table end
	text = text.replace (/(^|\n)\|\}/g, "$1<\/tr><\/table>");
    
	// table caption
	text = text.replace(/(^|\n)\|\+([^\n]*)/g, "<caption>$2<\/caption>");
    
	// table new row
	text = text.replace(/(^|\n)\|\-/g, "<\/tr><tr>");
	
	// table data
	text = text.replace(/(^|\n)\|\s([^\n]*)/g, function(str, $1, $2)
		{
		$2 = $2.replace(/(\|\|)/g, "<\/td><td>");
			return "<td>" + $2 + "<\/td>";
		});

	// links with | 
	text = text.replace(/\[\[([^\]\]]*?)\|(.*?)\]\]/g, function(str, $1, $2)
			{
				if($1.indexOf("://")!=-1)
					return "<a class=\"world\" href=\"" + $1 + "\" target=\"_blank\">" + $2 + "<\/a>";
				
				if(page_exists($1))
					return "<a class=\"link\" onclick='go_to(\"" + $1 +"\")'>" + $2 + "<\/a>";
				else
					return "<a class=\"unlink\" onclick='go_to(\"" + $1 +"\")'>" + $2 + "<\/a>";
			}); //"<a class=\"wiki\" onclick='go_to(\"$2\")'>$1<\/a>");
	// links without |
	var inline_tags = 0;
	text = text.replace(/\[\[([^\|]*?)\]\]/g, function(str, $1)
			{
				if($1.match("://"))
					return "<a class=\"world\" href=\"" + $1 + "\" target=\"_blank\">" + $1 + "<\/a>";
					
				found_tags = _get_tags($1);
				
				if (found_tags.length>0) {
					tags = tags.concat(found_tags);
					if (!force_inline)
						return "";
					inline_tags++;
					return "<!-- "+parse_marker+":"+inline_tags+" -->";
				}
				
				if(page_exists($1))
					return "<a class=\"link\" onclick='go_to(\"" + $1 +"\")'>" + $1 + "<\/a>";
				else
					return "<a class=\"unlink\" onclick='go_to(\"" + $1 +"\")'>" + $1 + "<\/a>";
					}); //"<a class=\"wiki\" onclick='go_to(\"$1\")'>$1<\/a>");

	if (ie)
		text = text.replace("\r\n", "\n");
		
	// fix double newlines
	text = text.replace(/\n\n/g, "<\/p><p>");
	// ordered/unordered lists parsing (code by plumloco)
	text = text.replace(reReapLists, parseList);
	
	// end-trim
	if (end_trim)
		text = text.replace(/[\n\s]*$/, "");
	
	text = text.replace(/\n/g, "<br />");
	
	if (prefmt.length>0) {
//		log("Replacing "+prefmt.length+" preformatted blocks");
		text = text.replace(new RegExp("<\\!-- "+parse_marker+"(\\d+) -->", "g"), function (str, $1) {
//			log("Replacing prefmt block #"+$1);
			return prefmt[$1];
		});
		prefmt = new Array();
	}
	
	if (tags.length) {
		if (force_inline)
			s = "";
		else
			s = "<div class=\"taglinks\">";
		s += "Tags: ";
		for(i=0;i<tags.length-1;i++) {
			s+="<a class=\"link tag\" onclick=\"go_to('Tagged:"+tags[i]+"')\">"+tags[i]+"</a>&nbsp;&nbsp;";
		}
		if (tags.length>0)
			s+="<a class=\"link tag\" onclick=\"go_to('Tagged:"+tags[tags.length-1]+"')\">"+tags[tags.length-1]+"</a>";
		if (!force_inline) {
			s+="</div>";
			text += s;
		} else {
			text = text.replace(new RegExp("<\\!-- "+parse_marker+":(\\d+) -->", "g"), function (str, $1) {
				if ($1==inline_tags)
					return s;
				return "";
			});
		}
	}
	if (force_inline)
		force_inline = false;
	
	return "<p>" + text + "</p>";
}

// prepends and appends a newline character to workaround plumloco's XHTML lists parsing bug
function _join_list(arr, sorted) {
	if (sorted)
		arr = arr.sort();
	return "\n* [["+arr.join("]]\n* [[")+"]]\n";
}

function _simple_join_list(arr, sorted) {
	if (sorted)
		arr = arr.sort();
	return arr.join("\n")+"\n";
}

function _get_namespace(ns) {
	var pg = new Array();
	for(var i=0;i<page_titles.length;i++) {
		if (page_titles[i].indexOf(ns+":")==0)
			pg.push( page_titles[i]);
	}
	return "!Pages in "+ns+" namespace\n" + _join_list(pg, true);
}

function _get_tagged(tag) {
	var pg = new Array();

	for(var i=0; i<pages.length; i++)
	{
		pages[i].replace(/\[\[([^\|]*?)\]\]/g, function(str, $1)
			{
				if($1.match("://"))
					return;
					
				found_tags = _get_tags($1);
				
//				alert(found_tags);
				
				for (var t=0;t<found_tags.length;t++) {
					if (found_tags[t] == tag)
						pg.push(page_titles[i]);
				}

				
			});
	}
	
	if (!pg.length)
		return "No pages tagged with *"+tag+"*";
	return "!Pages tagged with " + tag + "\n" + _join_list(pg, true);
}

// Returns a index of search pages (by miz & legolas558)
function special_search( str )
{
	var pg_body = new Array();
	var title_result = "";

	var count = 0;
	// matches the search string and nearby text
	var reg = new RegExp( ".*" + RegExp.escape(str).replace(/^\s+/, "").
					replace(/\s+$/, "").replace(/\s+/g, ".*") + ".*", "gi" );

	for(i=0; i<pages.length; i++)
	{
		if (is_special(page_titles[i]) && (page_titles[i] != "Special:Menu"))
			continue;
//		log("Searching into "+page_titles[i]);
		
//		log("Regex is \""+reg+"\"");

		//look for str in title
		if(page_titles[i].match(reg))
			title_result += "* [[" + page_titles[i] + "]]\n";

		//Look for str in body
		res_body = pages[i].match( reg );
//		log("res_body = "+res_body);
		if (res_body!=null) {
			count = res_body.length;
			res_body = res_body.join(" ").replace( /\n/g, " ");
			pg_body.push( "* [[" + page_titles[i] + "]]: *found " + count + " times :* <div class=\"search_results\"><i>...</i><br />" + res_body +"<br/><i>...</i></div>");
		}
	}
	
	if (!pg_body.length && !title_result.length)
		return "No results found for *"+str+"*";
	force_inline = true;
	return "Results for *" + str + "*\n" + title_result + "\n\n---\n" + _simple_join_list(pg_body, false);
}

// Returns a index of all pages
function special_all_pages()
{
	var pg = new Array();
	var text = "";
	for(i=0; i<page_titles.length; i++)
	{
		if (!is_special(page_titles[i]))
			pg.push( page_titles[i] );
	}
	return _join_list(pg, true);
}

// Returns a index of all dead pages
function special_dead_pages () { // Returns a index of all dead pages
	var dead_pages = new Array();
	var from_pages = new Array();
	var page_done = false;
	for (j=0;j<pages.length;j++) {

		pages[j].replace(/\[\[([^\]\]]*?)(\|([^\]\]]+))?\]\]/g,
			function (str, $1, $2, $3) {
				if (page_done)
					return false;
//				log("In "+page_titles[j]+": "+$1+" -> "+$3);
				if ($1.indexOf("://")!=-1)
					return;
				if ($1.match(/Tag(s|ged)?:/gi))
					return;
				p = $1;
				if (!page_exists(p) && ((up = p.toUpperCase)!=page_titles[j].toUpperCase())) {
//					up = p.toUpperCase();
					for(i=0;i<dead_pages.length;i++) {
						if (dead_pages[i].toUpperCase()==up) {
							from_pages[i].push(page_titles[j]);
							page_done = true;
							break;
						}
					}
					if (!page_done) {
						dead_pages.push(p);
						from_pages.push(new Array(page_titles[j]));
						page_done = true;
					}
				}
	        }
		);
		page_done = false;
	}

	var pg = new Array();
	for(i=0;i<dead_pages.length;i++) {
		s = "[["+dead_pages[i]+"]] from ";
		var from = from_pages[i];
		for(j=0;j<from.length-1;j++) {
			s+="[["+from[j]+"]], ";
		}
		if (from.length>0)
			s+="[["+from[from.length-1]+"]]";
		pg.push(s);
	}
	
  if (!pg.length)
	return '<i>No dead pages</i>';
  return _simple_join_list(pg, true);
}

// Returns a index of all orphaned pages
function special_orphaned_pages()
{
	var pg = new Array();
	var found = false;
	for(j=0; j<pages.length; j++)
	{
		if (is_special(page_titles[j]))
			continue;
		// search for pages that link to it
		for(i=0; i<pages.length; i++) {
			if ((i==j) /*|| is_special(page_titles[i])*/)
				continue;
			if( (pages[i].toUpperCase().indexOf("[[" + page_titles[j].toUpperCase() + "]]") != -1)
				|| (pages[i].toUpperCase().indexOf("|" + page_titles[j].toUpperCase() + "]]") != -1)
				) {
//					log("Page \""+page_titles[j]+"\" linked from page \""+page_titles[i]+"\"");
					found = true;
					break;
			}
		}
		if(found == false) {
			if (!is_special(page_titles[j]))
				pg.push( page_titles[j] );
		} else found = false;
	}
//	alert(pages[0]);
	if (!pg.length)
		return "/No orphaned pages found/";
	else
		return _join_list(pg, true); // TODO - Delete repeated data
}

function special_links_here()
{
	var pg = new Array();
	for(j=0; j<pages.length; j++)
	{
		// search for pages that link to it
		if(	(pages[j].toUpperCase().indexOf("[[" + current.toUpperCase() + "]]")!=-1) ||
				(pages[j].toUpperCase().indexOf("|" + current.toUpperCase() + "]]") != -1)
				) {
					pg.push( page_titles[j] );
		}
	}
	if(pg.length == 0)
		return "/No page links here/";
	else
		return "!!Links to "+current+"\n"+_join_list(pg, true);
}

// retrieve a stored page
function get_text(title)
{
	var pi = page_index(title);
	if (pi==-1)
		return null;
	return pages[pi];
}

// Sets text typed by user
function set_text(text)
{
	var pi = page_index(current);
	if (pi==-1) {
		log("current page \""+current+"\" is not cached!");
		return;
	}
	pages[pi] = _new_syntax_patch(text);
}

// thanks to S.Willison
RegExp.escape = function(text) {
  if (!arguments.callee.sRE) {
    var specials = [
      '/', '.', '*', '+', '?', '|',
      '(', ')', '[', ']', '{', '}', '\\'
    ];
    arguments.callee.sRE = new RegExp(
      '(\\' + specials.join('|\\') + ')', 'g'
    );
  }
  return text.replace(arguments.callee.sRE, '\\$1');
}

function clear_search() {
	if (!cached_search.length)
		return;
	cached_search = "";
	assert_current("Special:Search");
}

function assert_current(page) {
	if( current != page )
		go_to( page ) ;
	else
		set_current( page );
}

// make the actual search and cache the results
function do_search()
{
	var search_string = el("string_to_search").value;

	if ( !search_string.length )
		return;
	
	cached_search = special_search( search_string )

	assert_current("Special:Search");
}

function block_edits(page) {
	if (edit_allowed(page))
	{
		permit_edits = false;
		menu_display("edit", false);
		menu_display("edit_button", false);
//		if(unsupported_browser)			document.getElementById("unsupported_browser").style.display = "none";
		alert("Edits blocked.");
	} else {
		permit_edits = true;
		menu_display("edit", true);
		menu_display("edit_button", true);
		if(unsupported_browser)
			document.getElementById("unsupported_browser").style.display = "block";
		alert("Edits unblocked.");
	}
	if (!save_on_quit)
		_save_config_only();
	back_or(main_page);
}

function is_special(page) {
	return (page.search(/Special:/i)==0);
}

function _get_special(cr) {
	var text = null;
	log("Getting special page "+cr);
	switch(cr) {
		case "Search":
			text = get_text("Special:"+cr);
			text += cached_search;
			break;
		case "Erase Wiki":
			if (erase_wiki()) {
				save_all();
				back_or(main_page);
			}
			return null;
		case "Main Page":
			go_to(main_page);
			return null;
		case "All Pages":
			text = special_all_pages();
			break;
		case "Orphaned Pages":
			text = special_orphaned_pages();
			break;
		case "Pages not yet created":
			text = special_dead_pages();
			break;
		case "Backlinks":
			text = special_links_here();
			break;
		case "Block Edits":
			alert("Block edits currently disabled!");
			//block_edits(current);
			return null;
		case "Edit Menu":
			go_to("Special:Menu");
			edit();
			return null;
		case "Edit CSS":
			current_editing(cr, true);
			el("wiki_editor").value = document.getElementsByTagName("style")[0].innerHTML;
			return null;
		default:
			text = get_text("Special:"+cr);
			if(text == null)
				alert("Invalid special page.");
	}
	return text;
}

// Load a new current page
function set_current(cr)
{
	var text;
	log("Setting \""+cr+"\" as current page");
	var p = cr.indexOf(":");
	if (p!=-1) {
		namespace = cr.substring(0,p);
		log("namespace of "+cr+" is "+namespace);
		cr = cr.substring(p+1);
		if (!cr.length)
			text = _get_namespace(namespace);
		else {
			switch (namespace) {
				case "Special":
					text = _get_special(cr);
					if (text == null)
						return;
					break;
				case "Tagged":
					text = _get_tagged(cr);
					if (text == null)
						return;
					break;
				default:
					text = get_text(namespace+":"+cr);
			}
		}
		ns = namespace+":";
	} else {
		ns = "";
		text = get_text(cr);
	}
	
	if(text == null)
	{
		if (ns == "Special") {
			alert("You are not allowed to create a page titled \""+ns+cr+"\" because namespace \""+namespace+"\" is reserved");
			return;
		}
		if(confirm("Page not found. Do you want to create it?"))
		{	// create and edit the new page
			// treat the page as a normal page
			cr = ns+cr;
			pages.push("");
			page_titles.push(cr);
			current = cr;
			log("Now pages list is: "+page_titles);
			edit_page(cr);
//			save_page(cr);
		}
		return;
	}

	load_as_current(ns+cr, text);
	if(document.getElementById("lastDate"))
		document.getElementById("lastDate").innerHTML = document.lastModified;
}

function load_as_current(title, text) {
	current = title;
	el("wiki_title").innerHTML = title;
	el("wiki_text").innerHTML = parse(text);
	document.title = title;
	update_nav_icons();
}

function refresh_menu_area() {
/*
	var bl_src = "\n\n[[Special:Backlinks]]";
	if (is_special(current)) {
		pre_src = "";
		post_src = bl_src;
	} else {
		post_src = "";
		pre_src = bl_src;
	}	*/
	el("menu_area").innerHTML = parse(get_text("Special:Menu")/*+pre_src)+post_src*/);
}

function _gen_display(id, visible, prefix) {
	el(prefix+"_"+id).style.display = (visible ? "inline" : "none");
}

function img_display(id, visible) {
	if (!ie) {
		_gen_display(id, visible, "img");
		_gen_display(id, !visible, "alt");
	} else {
		_gen_display(id, !visible, "img");
		_gen_display(id, visible, "alt");
	}
}

function menu_display(id, visible) {
	_gen_display(id, visible, "menu");
}

function create_alt_buttons() {
	if (ie) {
		el("alt_back").innerHTML = "&#223;";
		el("alt_forward").innerHTML = "&#222;";
		el("alt_cancel").innerHTML = "&#251;";
	}
}

// save configuration on exit
function before_quit() {
	if (save_on_quit)
		_save_config_only();
	return true;
}

// when the page is loaded
function on_load()
{
	log("***** StickWiki started *****");
	
	document.body.style.cursor = "auto";
	
	if(debug == true)
		el("debug_info").style.display = "block";
	else
		el("debug_info").style.display = "none";
		
	if (!ie) {
//		setup_uri_pics(el("img_home"),el("img_back"),el("img_forward"),el("img_edit"),el("img_cancel"),el("img_save"),el("img_advanced"));
	}

		
	img_display("back", true);
	img_display("forward", true);
	img_display("home", true);
	img_display("edit", true);
	img_display("advanced", true);
	img_display("cancel", true);
	img_display("save", true);
	
	unsupported_browser = (!firefox && !ie);
	document.getElementById("unsupported_browser").style.display = (unsupported_browser ? "block" : "none");

	// customized keyboard hook
	document.onkeydown = kbd_hook;

	// Go straight to page requested
	var qpage=document.location.href.split("?")[1];
	if(qpage)
	{
//		if(!page_exists(qpage)
//			current = main_page;
//		else
			current = unescape(qpage);
	}

	set_current(current);
	refresh_menu_area();
	disable_edit();
}

function ff_fix_focus() {
//runtime fix for Firefox bug 374786
	if (firefox)
		el("wiki_text").blur();
}

function search_focus(focused) {
	search_focused = focused;
	if (!focused)
		ff_fix_focus();
}

var kbd_hooking=false;

function kbd_hook(orig_e)
{
	if (!orig_e)
		e = window.event;
	else
		e = orig_e;
		
	if (!kbd_hooking) {
		if (search_focused) {
			if (e.keyCode==13) {
				ff_fix_focus();
				do_search();
				return false;
			}
			return orig_e;
		}
		if ((e.keyCode==8) || (e.keyCode==27)) {
			go_back();
			ff_fix_focus();
			return false;
		}
	}

	if (e.keyCode==27) {
		cancel();
		ff_fix_focus();
		return false;
	}

	return orig_e;
}

// when the page is resized
function on_resize()
{
	if(ie == false)
	{
		el("wiki_editor").style.width = window.innerWidth - 30 + "px";
		el("wiki_editor").style.height = window.innerHeight - 150 + "px";
	}
}

function update_nav_icons() {
	menu_display("back", (backstack.length > 0));
	menu_display("forward", (forstack.length > 0));
	menu_display("advanced", (current != "Special:Advanced"));
	menu_display("edit", !is_special(current) && (edit_allowed(current)));
}

// Adjusts the menu buttons
function disable_edit()
{
	log("DISABLING edit mode");
	kbd_hooking = false;
	// check for back and forward buttons - TODO grey out icons
	update_nav_icons();
	menu_display("home", true);
	menu_display("save", false);
	menu_display("cancel", false);
	el("text_area").style.display = "block";
	el("edit_area").style.display = "none";
	log("setting back title to "+prev_title);
	document.title = el("wiki_title").innerHTML = prev_title;
}

function menu_dblclick() {
	if (!dblclick_edit)
		return false;
	edit_menu();
	return true;
}

function page_dblclick() {
	if (!dblclick_edit)
		return false;
	edit();
	return true;
}

function edit_menu() {
	edit_page("Special:Menu");
}

// when edit is clicked
function edit()
{
	edit_page(current);
}

var edit_override = false;

function edit_allowed(page) {
	if (edit_override)
		return true;
	if (!permit_edits)
		return false;
	if (is_special(page) && (page!="Special:Menu"))
		return false;
	return true;
}

// setup the title boxes and gets ready to edit text
function current_editing(page, disabled) {
	log("Currently editing "+page+", title disabled: "+disabled);
	prev_title = current;
	el("wiki_page_title").disabled = (disabled ? "disabled" : "");
	el("wiki_page_title").value = page;
	document.title = el("wiki_title").innerHTML = "Editing "+page;
	// current must be set BEFORE calling enabling menu edit
	log("ENABLING edit mode");
	kbd_hooking = true;
	menu_display("back", false);
	menu_display("forward", false);
	menu_display("advanced", false);
	menu_display("home", false);
	menu_display("edit", false);
	menu_display("save", true);
	menu_display("cancel", true);
	el("text_area").style.display = "none";

	// FIXME!
	if(!ie)	{
		el("wiki_editor").style.width = window.innerWidth - 30 + "px";
		el("wiki_editor").style.height = window.innerHeight - 150 + "px";
	}
	el("edit_area").style.display = "block";

	el("wiki_editor").focus();
	current = page;
}

function edit_page(page) {
	if (!edit_allowed(page))
		return;
	// setup the wiki editor textbox
	current_editing(page, is_special(page));
	el("wiki_editor").value = get_text(page);
}

// renames a page
function rename_page(previous, newpage)
{
	log("Renaming "+previous+" to "+newpage);
	for(i=0; i<pages.length; i++)
	{
		if(page_titles[i] == previous)
		{
			page_titles[i] = newpage;
			// TODO - change all references
			break;
		}
	}
	if (previous == main_page)
		main_page = newpage;
}

// when a page is deleted
function delete_page(page)
{
	for(i=0; i<pages.length; i++)
	{
		if(page_titles[i].toUpperCase() == page.toUpperCase())
		{
			log("DELETED page "+page);
			page_titles.splice(i,1);
			pages.splice(i,1);
			break;
		}
	}
}

function _new_syntax_patch(text) {
	// links with |
	text = text.replace(/\[\[([^\]\]]*?)\|(.*?)\]\]/g, function(str, $1, $2)
			{
				if($1.indexOf("://")!=-1)
					return str;
				
				// replace the first occurence of the two double colons
				return str.replace("::", ":");
			});
	// links without |
	text = text.replace(/\[\[([^\|]*?)\]\]/g, function(str, $1)
			{
				if($1.match("://"))
					return str;
				
				// replace the first occurence of the two double colons
				return str.replace("::", ":");
			});

	//BUG: will also edit <pre> tags stuff
	text = text.replace(/(^|\n)(\+*)/g, function (str, $1, $2) {
		return $1+str_rep("*", $2.length);
	});
	
	return text;
}

// when save is clicked
function save()
{
	switch(current)
	{
		case "Special:Edit CSS":
			document.getElementsByTagName("style")[0].innerHTML = el("wiki_editor").value;
			back_to = null;
			current = "Special:Advanced";
			el("wiki_page_title").disabled = "";
			break;
		default:
			// check if text is empty
			if(el("wiki_editor").value == "")
			{
				if(confirm("Are you sure you want to DELETE this page?"))
				{
					delete_page(current);
					disable_edit();
					back_or(main_page);
					save_all();
				}
				return;
			}
			else
			{
				// here the page gets actually saved
				set_text(el("wiki_editor").value);
				new_title = el("wiki_page_title").value;
				if (new_title=="Special:Menu") {
					refresh_menu_area();
					back_to = prev_title;
//					alert(prev_title);
				} else { if (!is_special(new_title) && (new_title != current))
							rename_page(current, new_title);
					back_to = new_title;
				}				
			}
	}
	save_page(current);
	if (back_to != null)
		set_current(back_to);
	else // used for CSS editing
		back_or(main_page);
	disable_edit();
}

// when cancel is clicked
function cancel()
{
//	if(confirm("Are you sure you want to cancel this edit?")) 
	if (kbd_hooking)
	{
		disable_edit();
	} 
}

// when home is clicked
function home()
{
	go_to(main_page);
}

function back_or(or_page) {
	if (!go_back())
		set_current(or_page);
}

// when Advanced is clicked
function advanced()
{
	go_to("Special:Advanced");
}

function history_mem(page) {
	if (backstack.length>6)
		backstack = new Array(page);
	else
		backstack.push(page);
}

// follows a link
function go_to(cr)
{
	if(cr == current)
		return;
	history_mem(current);
	forstack = new Array();
	set_current(cr);
}

// when Back button is clicked
function go_back()
{
	if(backstack.length > 0)
	{
		forstack.push(current);
		set_current(backstack.pop());
		return true;
	}
	return false;
}

// when Forward button is clicked
function go_forward()
{
	if(forstack.length > 0)
	{
		history_mem(current);
		set_current(forstack.pop());
	}
}

function js_encode(s, split_lines) {
	// escape double quotes
	s = s.replace(new RegExp("\"", "g"), "\\\"");
	// escape newlines (\r\n happens only on the stupid IE) and eventually split the lines accordingly
	if (!split_lines)
		s = s.replace(new RegExp("\r\n|\n", "g"), "\\n");
	else
		s = s.replace(new RegExp("\r\n|\n", "g"), "\\n\" +\n\"");
	// and fix also the >= 128 ascii chars (to prevent UTF-8 characters corruption)
	return s.replace(new RegExp("([^\u0000-\u007F])", "g"), function(str, $1) {
				var s = $1.charCodeAt(0).toString(16);
				for(var i=4-s.length;i>0;i--) {
					s = "0"+s;
				}
				return "\\u" + s;
	});
}

function printout_arr(arr, split_lines) {
	var s = "";
	for(var i=0;i<arr.length-1;i++) {
		s += "\"" + js_encode(arr[i], split_lines) + "\",\n";
	}
	if (arr.length>1)
		s += "\"" + js_encode(arr[arr.length-1], split_lines) + "\"\n";
	return s;
}

function save_page(page_to_save) {
	log("Saving page \""+page_to_save+"\"");
	save_all();
}

function _save_config_only() {
	// not yet written
}

function save_all() {
	document.body.style.cursor = "wait";

	var computed_js = "\n/* <![CDATA[ */\n\nvar version = \""+version+
	"\";\n\nvar permit_edits = "+permit_edits+
	";\n\nvar allow_diff = "+allow_diff+
	";\n\nvar current = \"" + js_encode(current)+
	"\";\n\nvar main_page = \"" + main_page + "\";\n\n";
	
	computed_js += "var backstack = new Array(\n" + printout_arr(backstack, false) + ");\n\n";

	computed_js += "var page_titles = new Array(\n" + printout_arr(page_titles, false) + ");\n\n";
	
	computed_js += "var pages = new Array(\n" + printout_arr(pages, allow_diff) + ");\n\n";

	// not needed: the end tag is provviden by the matching function
//	computed_js += "/* ]]> */";
	
	// attempt to clear the first <script> tag found in the DOM
	try {
		var obj = document.documentElement.childNodes[0];
		var subobj = null;
		for (var i=0;i<obj.childNodes.length;i++) {
			subobj = obj.childNodes[i];
			if (subobj.tagName && subobj.tagName.toUpperCase() == "SCRIPT") {
				if (ie)
					subobj.text = "/* ]]> */\n";
				else
					subobj.innerHTML = "/* ]]> */\n";
				break;
			}
		}
	} catch (e) { log(e);}
	
	// cleanup the DOM before saving
	el("wiki_editor").value = "";
	el("wiki_text").innerHTML = "";
	el("menu_area").innerHTML = "";
	if (ie) {	// to prevent their usual UTF-8 corruption
		el("alt_back").innerHTML = "";
		el("alt_forward").innerHTML = "";
		el("alt_cancel").innerHTML = "";
	} else {
//		free_uri_pics(el("img_home"),el("img_back"),el("img_forward"),el("img_edit"),el("img_cancel"),el("img_save"),el("img_advanced"))
	}
	
	if (!debug || save_override)
		r = saveThisFile(computed_js);
	else r = false;
	document.body.style.cursor= "auto";
	
	refresh_menu_area();
	
	if (ie)
		create_alt_buttons();
//	else		setup_uri_pics(el("img_home"),el("img_back"),el("img_forward"),el("img_edit"),el("img_cancel"),el("img_save"),el("img_advanced"))
	return r;
}

// save this file
function saveThisFile(data)
{
	if(unsupported_browser)
	{
		alert("This browser is not supported and your changes won't be saved on disk.");
		return false;
	}
	var filename = document.location.toString().split("?")[0];
	filename = filename.replace("file:///", "");
	filename = filename.replace(/%20/g, " ");
	filename = filename.replace(/#.*/g, "");
	if(navigator.appVersion.indexOf("Win")!=-1)
		filename = filename.replace(/\//g, "\\");
	else
		filename = "/" + filename;
	
	var offset = document.documentElement.innerHTML.search(/\/\* ]]> \*\/(\r\n|\n)<\/script>/i);
	
	r = saveFile(filename,
	"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\n<head>\n<script type=\"text/javascript\">" + data + "\n" + document.documentElement.innerHTML.substring(offset) + "</html>");
	if (r)
		log("\""+filename+"\" saved successfully");
	return r;
}

// Copied from TiddyWiki
function saveFile(fileUrl, content)
{
	var r = null;
	r = mozillaSaveFile(fileUrl, content);
	if((r == null) || (r == false))
		r = ieSaveFile(fileUrl, content);
	if((r == null) || (r == false))
		r = operaSaveFile(fileUrl, content);
	return(r);
}

function erase_wiki() {
	if(confirm("This will ERASE all your pages.\n\nAre you sure you want to continue?") == false)
		return false;
	var pg_advanced = get_text("Special:Advanced");
	var pg_import = get_text("Special:Import");
	var pg_search = get_text("Special:Search");
	var pg_about = get_text("Special:About");
	page_titles = new Array("Main Page", "Special:Menu", "Special:Advanced", "Special:Import", "Special:Search", "Special:About");
	pages = new Array("This is your empty main page", "[[Main Page]]\n\n[[Special:Advanced]]\n[[Special:Backlinks]]\n[[Special:Search]]", pg_advanced, pg_import, pg_search, pg_about);
	current = main_page = "Main Page";
	backstack = new Array();
	forstack = new Array();	
	return true;
}

function import_wiki()
{
	var filename = el("filename_").value;
	if(filename == "")
	{
		alert("A file must be selected");
		return false;
	}

	if(confirm("This will OVERWRITE pages with the same title.\n\nAre you sure you want to continue?") == false)
		return;

	// set hourglass
	document.body.style.cursor= "wait";
	
	var ct = loadFile(filename);
	
	// get version
	var old_version, ver_str;
	try {
		ver_str = ct.match(/\<div id=\"version_\"\>(.*)\<\/div\>/i)[1];
		log("Old wiki contains version string \""+ver_str+"\"");
		switch(ver_str)
		{
			case "0.03":
				old_version = 3;
				break;
			case "0.04": 
			case "0.04G":
				old_version = 4;
				break;
			case "0.9B":
				old_version = 9;
			default:
				alert("Incompatible version: " + ver_str);
				return false;
		}
	} catch(e) {
		old_version = 2;
		if(ct.match("<div id=\""+escape("Special:Advanced")+"\">"))
			old_version = 3;
	}

	// get only the needed part
	var wiki;
	try {
		wiki = ct.match(/\<div .*id=\"wiki\"\>((.|\n|\t|\s)*)\<\/div\>/)[0];
	} catch(e) {
		alert("Unrecognized file");
		document.body.style.cursor= "auto";
		return false;
	}
	
	// eliminate comments
	wiki = wiki.replace(/\<\!\-\-.*\-\-\>/g, "");

	// separate variables from wiki
	var vars;
	try {
		vars = wiki.match(/\<div .*id=\"variables\"\>((.|\n|\t|\s)*)\<\/div\>/)[0];
	} catch(e) {
		vars = "";
	}
	if(old_version == 2)
	{
		try {
			vars = wiki.match(/\<div.*id=\"main_page\".*\>(.*)\<\/div\>/)[0];
		} catch(e) {
		}
	}
	wiki = wiki.replace(vars, "");

	// get an array of variables and wikis
	var var_names = new Array();
	var var_values = new Array();
	var vc = 0;
	var page_names = new Array();
	var page_contents = new Array();
	var pc = 0;

	// eliminate headers
	wiki = wiki.replace(/\<div.*?id=\"wiki\".*?\>/, "");
	vars = vars.replace(/\<div.*?id=\"variables\".*?\>/, "");

	vars.replace(/\<div.*?id=\"(.*?)\".*?\>((\n|.)*?)\<\/div\>/g, function(str, $1, $2)
			{
				if(old_version == 2)
					var_names[vc] = "main_page_";
				else
					var_names[vc] = $1;
				var_values[vc] = $2;
				vc++;
			});
			
	wiki.replace(/\<div.*?id=\"(.*?)\".*?\>((\n|.)*?)\<\/div\>/g, function(str, $1, $2, $3)
			{
				if (old_version != 2) {
					page_names[pc] = unescape($1);
					page_contents[pc] = unescape($2);
				} else {
					page_names[pc] = $1;
					page_contents[pc] = $2;
				}
				if (old_version < 9) {	// apply compatibility changes to stickwiki versions below v0.9
					page_contents[pc] = _new_syntax_patch(page_contents[pc].replace(new RegExp("(\\[\\[|\\|)Special::Import wiki\\]\\]", "ig"), "$1Special::Import]]").replace(/\[\[([^\]\]]*?)(\|([^\]\]]+))?\]\]/g,
					function (str, $1, $2, $3) {
						if ($3.length)
							return "[["+$3+"|"+$1+"]]";
						else
							return str;
					}));
					if (page_names[pc] == "Special::Edit Menu")
						page_names[pc] = "Special:Menu";
				}
				pc++;
			}
			);

	// add new data
	var pages_imported = 0;
	
	//TODO: import the variables and the CSS from v0.04
	if (old_version>=4) {
		var css = null;
		ct.replace(/\<style.*?type=\"text\/css\".*?\>((\n|.)*?)\<\/style\>/, function (str, $1) {
			css = $1;
		});
		if (css!=null) {
			log("Imported "+css.length+" bytes of CSS");
			if (old_version<9)
				css += "/* since v0.9 */\nh1 { font-size: 23px; }\nh2 { font-size: 20px; }\nh3 { font-size: 17px; }\nh4 { font-size: 14px; }\ndiv.taglinks {\n	border: 1px solid #aaa;\n/*	background-color: #f9f9f9; */\n	padding: 5px;\n	margin-top: 1em;\n	clear: both;\n}\n\na.tag {\n color: navy;\n}\n";
			document.getElementsByTagName("style")[0].innerHTML = css;
		}
	}
	
	// import the variables
	var new_main_page = main_page;
	var block_edits = false;
	for(i=0;i<var_names.length;i++) {
		if (var_names[i] == "main_page_")
			new_main_page = (version!=2) ? unescape(var_values[i]) : var_values[i];
		else if (var_names[i] == "permit_edits")
			block_edits = (var_values[i]=="0");
	}
	if (page_exists(new_main_page))
		main_page = new_main_page;
	
	//note: before v0.04 permit_edits didnt exist
	//note: in version 2 pages were not escaped
	
	for(i=0; i<page_names.length; i++)
	{
		if (!is_special(page_names[i]) || (page_names[i] == "Special:Menu") || (page_names[i] == "Special:Search"))
		{		
			pi = page_index(page_names[i]);
			if (pi == -1) {
				page_titles.push(page_names[i]);
				pages.push(page_contents[i]);
			} else {
				page_titles[pi] = page_names[i];
				pages[pi] = page_contents[i];
			}
			pages_imported++;
		}
	}

	// remove hourglass
	document.body.style.cursor= "auto";
	
	alert("Import completed: " + pages_imported + " pages imported.");
	
	current = main_page;
	// save everything
	save_all();

	back_or("Special:Import");
}

function loadFile(filePath)
{
	var r = null;
	r = mozillaLoadFile(filePath);
	if((r == null) || (r == false))
		r = ieLoadFile(filePath);
	if((r == null) || (r == false))
		r = operaLoadFile(filePath);
	return(r);
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function ieSaveFile(filePath, content)
{
	try
	{
		var fso = new ActiveXObject("Scripting.FileSystemObject");
	}
	catch(e)
	{
		alert("Exception while attempting to save\n\n" + e.toString());
		return(null);
	}
	var file = fso.OpenTextFile(filePath,2,-1,0);
	file.Write(content);
	file.Close();
	return(true);
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function ieLoadFile(filePath)
{
	try
	{
		var fso = new ActiveXObject("Scripting.FileSystemObject");
		var file = fso.OpenTextFile(filePath,1);
		var content = file.ReadAll();
		file.Close();
	}
	catch(e)
	{
		alert("Exception while attempting to load\n\n" + e.toString());
		return(null);
	}
	return(content);
}

// Returns null if it can't do it, false if there's an error, or a string of the content if successful
function mozillaLoadFile(filePath)
{
	if(window.Components)
		try
		{
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if (!file.exists())
				return(null);
			var inputStream = Components.classes["@mozilla.org/network/file-input-stream;1"].createInstance(Components.interfaces.nsIFileInputStream);
			inputStream.init(file, 0x01, 00004, null);
			var sInputStream = Components.classes["@mozilla.org/scriptableinputstream;1"].createInstance(Components.interfaces.nsIScriptableInputStream);
			sInputStream.init(inputStream);
			return(sInputStream.read(sInputStream.available()));
		}
		catch(e)
		{
			alert("Exception while attempting to load\n\n" + e);
			return(false);
		}
	return(null);
}

// Returns null if it can't do it, false if there's an error, true if it saved OK
function mozillaSaveFile(filePath, content)
{
	if(window.Components)
		try
		{
			netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
			var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
			file.initWithPath(filePath);
			if (!file.exists())
				file.create(0, 0664);
			var out = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
			out.init(file, 0x20 | 0x02, 00004,null);
			out.write(content, content.length);
			out.flush();
			out.close();
			return(true);
		}
		catch(e)
		{
			alert("Exception while attempting to save\n\n" + e);
			return(false);
		}
	return(null);
}

function operaUrlToFilename(url)
{
	var f = "//localhost";
	if(url.indexOf(f) == 0)
		return url.substring(f.length);
	var i = url.indexOf(":");
	if(i > 0)
		return url.substring(i-1);
	return url;
}

function operaLoadFile(filePath)
{
	var content = [];
	try
	{
		var r = new java.io.BufferedReader(new java.io.FileReader(operaUrlToFilename(filePath)));
		var line;
		while ((line = r.readLine()) != null)
			content.push(new String(line));
		r.close();
	}
	catch(e)
	{
		if(window.opera)
			opera.postError(e);
		return null;
	}
	return content.join("\n");
}

function operaSaveFile(filePath, content)
{
	try
	{
		var s = new java.io.PrintStream(new java.io.FileOutputStream(operaUrlToFilename(filePath)));
		s.print(content);
		s.close();
	}
	catch(e)
	{
		if(window.opera)
			opera.postError(e);
		return null;
	}
	return true;
}

function open_table_help()
{
	w = window.open("about:blank", "help", "height=200px, width=350px, menubar=no, toolbar=no, location=no, status=no, dialog=yes");
	w.document.writeln("<html><head><title>Building tables<\/title><\/head><body>");
	w.document.writeln("<u>Building tables:<\/u><br /><br />");
	w.document.writeln("<tt>{|   <\/tt><br />");
	w.document.writeln("<tt>|+ Table Caption<\/tt><br />");
	w.document.writeln("<tt>| *colum 1* || *column 2* || *column 3*<\/tt><br />");
	w.document.writeln("<tt>|-<\/tt><br />");
	w.document.writeln("<tt>| line 2 || [[a link]] || something<\/tt><br />");
	w.document.writeln("<tt>|-<\/tt><br />");
	w.document.writeln("<tt>| line 3 || || more stuff<\/tt><br />");
	w.document.writeln("<tt>|}   <\/tt>");
	w.document.writeln("<\/body><\/html>");
	w.document.close();
}

/* if((navigator.userAgent).indexOf("Opera")!=-1)
	opera = true;
else */ if(navigator.appName == "Netscape")
	firefox = true;
else if((navigator.appName).indexOf("Microsoft")!=-1)
	ie = true;

// finds out if Opera is trying to look like Mozilla
if(firefox == true && navigator.product != "Gecko")
	firefox = false;

// finds out if Opera is trying to look like IE
if(ie == true && navigator.userAgent.indexOf("Opera") != -1)
	ie = false;

if (debug) {
	// logging function - used in development

	function log(aMessage)
	{
	    var logbox = document.getElementById("swlogger");
		nls = logbox.value.match(new RegExp("\n", "g"));
		if (nls!=null && typeof(nls)=='object' && nls.length>20)
			logbox.value = "";
		logbox.value += aMessage + "\n";
	}
} else {
	function log(aMessage) { }
}

if (!ie)
	window.onresize = on_resize;

/*
if(ie)
	attachEvent("onload",on_load);
else
	addEventListener("load",on_load,false);
*/
// -->
</script></head><body style="cursor: wait;" id="body" onload="on_load()" onunload="before_quit()">
<table cellspacing="0">
<tbody>
<tr>
<td style="width: 100%;" valign="bottom">
<p class="title" id="wiki_title">Editing Main Page</p></td>
<td class="menu" onclick="go_back()">
<div id="menu_back" style="display: none; cursor: pointer;"><img id="img_back" style="display: inline;" alt="Back" src="data:image/png;base64,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"><span id="alt_back" style="display: none; font-size: 24pt; font-family: wingdings;"></span></div></td>
<td class="menu" onclick="go_forward()">
<div id="menu_forward" style="display: none; cursor: pointer;"><img id="img_forward" style="display: inline;" alt="Forward" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABf1JREFUeNp9lX+MVUcVxz9n7r3v7ntvd4G3CywL7KLBCJWlYLGmKWgBtVGM0Yj80zSaqLVp0n+0/qDxD00kjU2aaKoxKm1CYqJNq6kQuiFCkBawKVS2uIYohYUFusvuwr4f+37ce2fm+Mc+ZKPGSSYzZybne86ZM+d8hf8e0p6+Law3hu0CQwrL2ueTqpzzynFgrK0XtO+U/zNMGxyBXYHhOJC0lfyC9c6+bgwHgQf/U3+htwvBPbDMCC8ofFYVv6RTZNs9gd+4xmipG0ktjE97ffuil3OXvUktiCAoLyo8CTTauLrQwB3wdcYw7D1rerrI9n4pJ1/eEQW9PSIKijViHZpaS6WujI479h+x7venPF4JRTiryi5g6o4RWWBtVWA46TyDW9eb7Hd7i+HKNQXxjVA1taKagpuj0XQ0fJEktSiqYpDhs06fPpBls3PkRHhLlR1A/U5i5kMQXvbKfds3BNmRH3dFpZ4SabJUJCpJkOvG+ozx+iCmOEDeXsFLTJKpVBuqH1gpbF5rwmMjPm2lDDD/GQ4BJmi/06MKT/WXJBvel49Ki7s0c8skKvahuWWYKORyZZD4/v30DH0V7Bx26hTedKCqUq6r9PeIrigRHB1RD2wBTgBjASBG2K/Q/9zXYh76SCRZq0vCQi8a90FuNUYdPr+K3nVfIHBlpO9h1NVoTZzCSoxXpVKH968QuXJT/dhNjBEWK7wUiLBdlb3vWy7606/HEqtgooJouASJFoMpoAj5dBRVh5a2QXKLqO8T+KxG/cZfsBKTOS/Oo90FzJG3VRRWAi8HgeExVbbt3hr6PVsjaSVIlAsQcYgmiC9j7DSS3SJ47zcYTaFnKy6pEPfvwGVVKtfewklEM1HpKsDpC95X6nSIMBICmwA2rjFkFjxKuVzldnQvYXE5SAiq4FcgDJL87Tid3E/PwGay5iw9H/4eSWa5evYA1ueII2VwqTA+pQhsClVZDlDqRBJnpFWvcrXrCdbu3EdkLJgcIsF81ajHuwxxZXzWBASbzLJiy1PMVW9zeeQQHYUcizrdnTLu/3dpWw+ZVRopLO8fZFF3kVwIcSTEEXSEShx6Ch1CnAvxzgKKuhQRQ2ffFjILzovo3W4koQgzKEzOqiaZVSeR5K78hGpBCAt9gAMMqmCM0Jgr0+wYondpH2nSJMgVacyOMXbm16iBNHM6W2vDK1MhMAp88p0xT2KVZhagtVskb36HIACR+RSICM26csk/wL2f+yjezhGEMUltgvOHnqAycx2ViGrTMT6tbXxGjVeOAbzxdyeTs57MqTasoUmRhi/QcEVadFFpKhdlJ5t3v8Di7hBPQDI3yfk/Pk55ZhxncoDXsQm4PkMAtFR53ahyzAgXrs9gDp9xGoZQa3qaiaWROBqpp9WscS1Zx9BnnqE7qpBlSjo3yTuvfoPyzDjexDQThwJHz+k8jwingFHTtvRLgF8cdu7ypBdAa02lmSiNVKk2oNBVorSoiEqBdG6Cc68+zuz0ONbE1BqWOIee+YfK6QvzKVblZwub3TkRdjUSVl24pvZjQyYwBm20EOsUqyFZ7Spps0zaqjJ69IeUp8dxkqPedORj9NKEyvMHfZZmRMBB4Afzgdzlgo1GeMMr3RvWiP32bhOu7hVtJJBZRBWy1GIdqBjUBKBOw0Dkr+8qvxr2WaVOJMKYKg8CE4AEbVIwwOR9a82bwBcvTWj+xHmyzELvIqTQAYERgiiUIAwwAWqdl+sz8MpJ9S+dUNdMiPqWcC2f49ONhLG247qQMoOR5wsuF5oPff5Hrd/+84YdAnx3Ae4ZED+wDOnsQKyH2zWjY5PoxRvOpHaeTtavlj8/85XgkT+N+Pd+fsgbI3ivQGDm0R8aCsj+0Gnsa13UD6/OPfvYwJODffl3/wfR35XF+LX98fnv7zGPnH4uJ68/G8mBbwWm2LGA9EMz3yae3hOx79GYWl1NoStP0Nvva7Od+aNnqjuOnp3+1Ojl6obZWtaLWt+7amhq46YtIzt3fHz4gQ/qycqZb9rrN6tmrmVURPW7LzpGrypG4F/y5h6hh4BiQgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="><span id="alt_forward" style="display: none; font-size: 24pt; font-family: wingdings;"></span></div></td>
<td class="menu" onclick="advanced()">
<div id="menu_advanced" style="display: none; cursor: pointer;"><img id="img_advanced" style="display: inline;" alt="Advanced" src="data:image/png;base64,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"><span id="alt_advanced" style="display: none; font-size: 24pt; font-family: wingdings;">:</span></div></td>
<td class="menu" onclick="home()">
<div id="menu_home" style="display: none; cursor: pointer;"><img id="img_home" style="display: inline;" alt="Home" src="data:image/png;base64,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"><span id="alt_home" style="display: none; font-size: 24pt; font-family: wingdings;">G</span></div></td>
<td class="menu" onclick="edit()">
<div id="menu_edit" style="display: none; cursor: pointer;"><img id="img_edit" style="display: inline;" alt="Edit" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABSVJREFUeNqVlX9oXFUWxz/3vvfmR6aZyZB0YqKhlTUIldK0ILgisv6s9Rdrq1Y32P4hRcXUij/YNuLSFP3H+ttqtFiwTVfRrtbowhpo1iK7BbWg0qildfwRMzGTkNTxdd5kZt67Z//YmWnSpIoXDvdxL+98z/l+zzlXcWqFgAuBGGD4fUu01kPGmCxgAUH1QlVMgL3hcLgzGo0GIqIr56c8iMzrGMD3feV5Xk5rfZcx5k3ABvwqAEqplIik9+3bt2DlypUml8spy7JqTn9tFxEcx5GdO3eqnp4epbVeb4zZA2jA2JVINEBLSwuO46C1BsC27dq3Umpeq9yprVu3mnA4THd3926llIhIH1D5uwJijKFYLKogCFQ8HldKKVUsFpXv+yoIglnm+37t3Pd9JicnrS1btqienh5E5CWl1DmA0aeT6jgO+Xyevr4+RkdHicfjBEFAoVCgVCrNa+VyWWmtxfM8vWHDBj8ejy8QkXalFPZM50EQUFdXx+DgIF1dXbS2trJmzRrWrl1Lc3Mz4+PjGGOwbbtGW3Vva2tTlmVJoVBQFVpVjftaSSmF7/ssW7aM1tZW2s45m97eXjo7O3n22eewbZtEIk65XK4JPFP0qi4zK24OQKFQYPny5axYsYJ0Os2mTRt5/59vMzr6LTfccCMff3KYC5YsYeHChbS0tNTMcZzTy1nNdHwWkD948KC4rmvy+bzs3r1HOjouEGPyEgRGRET+PbhXzmpeIIcOfSwiRnK5nOTzefE8T1zXlWKxaNLptJ9IJAS4QinFHJEty8J1Xa6++iq0DvHFF5+idZGCd5LLLl/L80+sYt0dnfz8cw6lqIpcY+D0hpwFICI1HYLAZ+nSDvr6/g5EcCILmMh8yepVi7juyhC33LqekyddhoeHGRkZwff9Ws+cEaAahWVZnDhxgtWrb+If+97nyKHtlCYPkD78FIf/c4zt267BnfwvL+zYRTKZwPO8eQWeNwMArTWRSJSLL76Irvs2s/q2R5g4upOIU2C6pPnu6Div7/ozr+16iuPffE97+3mzOvs3KVJKkUqlsG2Hhx/axOXXb+TOv37I4rZGImGL0ZFfaIg4PP34RWzs2kQkEiUSCc87EOelqKqDMYapqSlefnE7pdAKHn1ikPP/0Igdsjjy+U+suXYJl1zosW79PYRC4VpvnLEPZmYwNjZGJpMhk8lw7NhxXtrxJPsP+rz13hDti5Og4LNPfuSZx1aRPtrPq7v2YFkWQRD8egbVVS6XKRaL+L6P67o4jkNv7w42P3mEr45N0NYaJ/dLkYmMy/33LueDf31QCdKcGaCagdaaZDJJU1MTjY2NpFIpHCfEZX+6lGeef4V1DxzAGKH93EakLPS/8yWLFi+q+Jgd6JxhFwQBxhiSyeSc2e/7AevvuJ10+juuW/c3tj34R/oHjjP0Q4revgdPJ0FmAijA1NfXEwqFTENDg7Isaw5tVQG3be0mtbCRNw4coL7xPD56bTtNTU0ANDQ0yMyGqwKUgGD//v0MDw+rfD6vbdtGKUWpVKqlrtT/34vp6WmaU0n+ctvNCEJ//7tMT08TiURkYmJCe54HUBCRWY/+5mg0ep9SqqSUUuVyGSOGumgUYwQQjAnwvGnq6+OUy6VTQmpdHRNijIl4nvcucPes2gcYGBgIZ7PZWCaTqRsYGIh1dCyNjY+nY647FZs6MRHz8l/Hrrliceyhh7tjnpePjYyMxMbGxmLZbDaWzWZjU1NTsaGhoWgikaj5/R958KLgEIeBwgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII="><span id="alt_edit" style="display: none; font-size: 24pt; font-family: wingdings;">!</span></div></td>
<td class="menu" onclick="cancel()">
<div id="menu_cancel" style="display: inline; cursor: pointer;"><img id="img_cancel" style="display: inline;" alt="Cancel" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAABlhJREFUeNp1lW2M3FUVh59z739mdmZ2d2a324XutkWEbl8otEpFm0LbKBVSX6IEgoKpRYONfDAKopA2MdHaqDHWQARCVCIfSDFaEiFCiWkbamybVKyUtltb3G7ftt3dbvdlZuf/cu89ftipCQZPcpOb++H3u/fcc84jfHBYwBtAhC6v3AF8BOgBDDACvGtgH8LpoNA81+b6vyFNcYywCPgtMJo36A1tJtw2Owofnx2FvnYbShYF6sBrAmuE/5rI/wq+by+gIvwgKFuWVG30jcUt+qmevM4pmZATkSwotVT1fC3I/uHM7BiIOXTZi8BLwDcVJptGgQ9wyym8nDd8ceuKkvvWslYKBWtCFiTJPIlTEg+ZBx8UCVDLvH/1TMbPjjaisVTfFbhb4XxTW68aiIAq7Kjk5P6dd7Wnn1xQySVSFm9yKsGLSetoPE2aeRoOGl6IM9GGC1JQr/3jPnv07/X8YD28I7BGYRwQ28x5AB4z8Ogrd7Wn6/oquWlbkSxX1JAvSVQsQ76IBI/xKYpAEjNdr0lIGkwFS0chilZ02HT3payn4ZkvsBMwFlArzFfY8eTyUsumZWVpUJIrpW4m1j4ihZX3IY1JZPISGEPkU9zUGIO9Kyg/9HOKNywn6z8gU7HTWQVru/Li9w67ZQIHgFNWZq7/+LyyWfeb1a1ZIcpFDmF8zSNy42e+RrF7HtHiO3Bnj2IvnUKnxniv5xPM3/wH5i65lfZbbieIMLH/dambIteV4NiENxdi7TTwkjFCDvjCfdcX6C4am3hVCU6q7e0AhCzGtJRo+fI23LV9nLrmVuY9+TId1U6mJ8ZwQGF+Hxi52gJm3bV5mPmHRVFQbgL61szJ0XCIipMoMpT++gL+5tXYWb0ElyItZXTjr5gblLZKJ0l9Cim242vjjOx8GpUIQGKP9rUaX7aU657bjcKi1ojc3JIN05nivBK8x549QvbMBtzlc0iUx6UJhWoX5Y4ukkYdKZTQrM75nzzAxKE9UCij3pMFpS0SulsMwM0GmN2aMxQMGntIPSSJwwXFnv4H6bb1TF4YwOQK+CzDZRnYHG5yhIs/vpeJA29CuQPnPV7Bh5lstUYC0B0BIaiSOsgiJSioCkGULG4w2NHBPJtHQyAERTWAKMEHGmPjZF7xKvig+ABeQVUJqgDBABenMmUs8eI8xA7SYKhNjNPfu4q5m1+h0t1DFjfAWojy+KSBqcymZ+trRAtuozE+hsPiguIVYq9MZgowZASONzzxyQlvfAg0nGhcr3Om52PcuHkH1UqVuF5DCkX85ChuZBApteFq49hShet/+EcKCz5KMl3HqQFVRpMgw4kCHDZGOAYc3Xsxw3tC7JUrU9N0fPohZnV20Zi8guSLhGSKC7/YyL+/fzfp0ACmtUo6PkKu4xp6H/wuaZqRBtSgHJsMJgmMG9hnmrP8929cyBiYCkEDknhUTx/BA7nqLEIyxemtX2L0wG5qF87R/73P0jh3inz3PKKCJR4+S+pRF1Rih9874gB2KQza5hDvjwNfaTitrp5tQ52CSU4c0mTismSTo5x97nEuH9xDKFZxNk995CIjf/szWMPowV2ceHE79dRTtMLuESe7R5wIPKxw7ipgvMAGhd89saQl+1xvIRpLg5hGTQUVyeWRlhLBe0JQvFiyJCGpx2SKprkCpSiSkzWf/vREnI8DvwS+w0xZoE1AHC5HUn1r2K2q5CRbWokkiYomi1rUSSTOeVyALEDqlAxLlm/REOWlbIX+KZ9tPxXnvfKXoGxsTmi1TR4oYHbe2f5GV8l0bD8WrxqqO11Uyfs2CyEEyfyMeNasdzSQQzVT8a9eSPTZgTS3pGLf3HJT6Z59Iy5OwgzMrJEZ9bVzcvqjFWW7/sOl12dXWgee+5dbu/N0rXx+PJEoEiJrA4h6RetedLDuZdeZWJ55L7H/rIm//0P5bU8sKT7cWzTppVjl+KRXA4iVme57emUrmxa3MK3GViotfmDB57t+PX7dpheef/aBocGBhaA230Rg2nxyW2fX2Xse/OqfNnRPPNXx1osnh33RBB/0+ITXxw5Pvw/07FlfZXlXBKLk8nlbqFSD/fpTmi68Mzp8cP/St985csu580NzvPemq2vW6NKFfcdWrFx1uPNKf/34lnu5ODRmUyKfukAtU779dp2RVPkPYy9lOpej6EMAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC"><span id="alt_cancel" style="display: none; font-size: 24pt; font-family: wingdings;"></span></div></td>
<td class="menu" onclick="save()">
<div id="menu_save" style="display: inline; cursor: pointer;"><img id="img_save" style="display: inline;" alt="Save" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAAK/INwWK6QAAAAZiS0dEAP8A/wD/oL2nkwAAA0FJREFUeNq1lc+KHFUUxn/n3qqu6h7tGdPByTBOEjQunK26EQRdhAGRuHGE2agLH8C1j5AXCFnkAYyBEIKoRHeabWQyJKIm+IdAdwSd0HZPdVXdc1xU9UynbZIe/xy4XG5R93z3fN937hWqeALYqGcFhH8WBkTAD8DXTCS64n18Jo6ToFo4792hAEQEVUUVc87baDR0ZvYBcEFAngO7eeatD5vHjq2XKysDee/dNxkOc9zcOIJzgXPnrhD0mfDVl+cbt29f/0zEvREBHqD9ZIckWfCdIwnLy8v0+3t47x7PiRkAcexoLy6SZW1arTaAQyq+ACSEAtVAURQyGo3I8/krMANVoSxLQigtaKjKsgkAREAEmRjOzVeBCDgnCPXecU7g8Rn+ZfzvANHkYprxsYD/GYABiExAzS+yWcX/IwEATEu8V7w3vNc5skvVvt7Qyj2zAVSVVqvJj3d6nD37MeAxJimSh+qxuj5DMVNUA7t/wFNHInSC2mhyh6AkyQrd3gOKYhcRv2/V6dOJCBoCjWSJNG2jqiSpAPrQUaLpTXk+4mhnyObma4QAWTZABNJ0AdWDk5mB98bFi9fJ8gWSxBFCybQt/gagqjSbTU6cOMknl66xvd0DjJdfWmNj41WGwwznBFVIU0+z1WQwDMRRNNMUUyJXzIYQyPOMbvcB8DSqSre7S1mOKIoc5xxmRp57NITaebMjmvlVqmq8czingOJ8Zd8DK8pB3ke0y34n26y/qutp8n45dEQ1fPA+qkU0MzMxM4q8JMsCqkpelJgZqoZz4xvU6m6vZqs6bnxYA4hEBDNz/f7vliQtnBuQNBJL0xbr68cpw6+Asf7CsyRJimpFk1klcqOR4HxEVIvsfSzeRQAmApGZfQ9c/uLz81tpupB3Oidd736X7e0dVlc7rK4u1g6LuHXru30NzMA55f5vPfLc0CCEMkgIZTkY7Hog7PebiHNLS8uXKlQpqR5+O+wQEQVCvX6/lrHq+M13PmplWf760c7QnT79Cnt7h3nRFO+Fq1e/saLoRDd3rv10986Nb0WECMTAiOMkWzv+4qfPnyrY2nqb/p97+DletDFdcSz8/EtgNFrj3r0d7nJDRMT+AqKAkRUl/oStAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg=="><span id="alt_save" style="display: none; font-size: 24pt; font-family: wingdings;">&lt;</span></div></td></tr></tbody></table>
<hr>
<div id="unsupported_browser" style="display: none;"><i>Your browser is not supported. You can access the wiki but you won't be able to save.</i></div>
<table id="text_area" style="display: none;" cellspacing="10">
<tbody>
<tr>
<td valign="top">
<div class="menu_area">
<div class="wiki" id="menu_area" ondblclick="menu_dblclick()"></div>
<div id="menu_edit_button" style="display: inline;">
<hr>

<div style="text-align: center;"><a class="link" onclick="edit_menu()">[Edit]</a></div></div></div></td>
<td style="width: 88%;" rowspan="2" valign="top">
<div class="text_area" id="wiki_text" ondblclick="page_dblclick()"></div></td></tr>
<tr>
<td>&nbsp;</td></tr></tbody></table><!-- Editor -->
<div id="edit_area" style="display: block;">
<div id="edit_page_title" style="display: block;">Page title: <input id="wiki_page_title" value="Main Page"></div><textarea id="wiki_editor" style="width: 994px; height: 430px;" rows="0" cols="0"></textarea> 
<table style="font-size: 8pt;">
<tbody>
<tr>
<td>[[link]]</td>
<td>[[http://link.com]]</td>
<td>*bold*</td>
<td>+ list</td>
<td>!header</td>
<td>--- (ruler)</td></tr>
<tr>
<td>[[text|link]]</td>
<td>_underline_</td>
<td>/italic/</td>
<td># numbered list</td>
<td>!!subheader</td>
<td><a class="world" onclick="open_table_help()">(tables)</a></td></tr></tbody></table></div>
<div id="debug_info" style="display: block;"><h2>Debug console</h2><p>This is a development BETA version of Wiki On a Stick; it is not suggested to use it with important data. If you want to disable this debug console, you will have to find the line that says <b><tt>var debug = true;</tt></b> and change it to <b><tt>false</tt></b>. Note: in the currently active debug mode changes will be saved only if <b><tt>var save_override</tt></b> is set to <b><tt>true</tt></b></p><div align="center"><textarea id="swlogger" cols="70" rows="12" style="width: 90%; background-color: lightgray;" readonly="true"></textarea></div>
</div>
<hr>
<div align="center"><sub><a class="link" onclick="go_to('Special:About')">About Wiki on a Stick v0.9B</a></sub></div>
</body></html>